var MA=Object.defineProperty;var C_=Object.getOwnPropertySymbols;var SA=Object.prototype.hasOwnProperty,TA=Object.prototype.propertyIsEnumerable;var P_=(a,e,t)=>e in a?MA(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,I_=(a,e)=>{for(var t in e||(e={}))SA.call(e,t)&&P_(a,t,e[t]);if(C_)for(var t of C_(e))TA.call(e,t)&&P_(a,t,e[t]);return a};var Ws=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function EA(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Bf={exports:{}},Oo=typeof Reflect=="object"?Reflect:null,D_=Oo&&typeof Oo.apply=="function"?Oo.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Jc;Oo&&typeof Oo.ownKeys=="function"?Jc=Oo.ownKeys:Object.getOwnPropertySymbols?Jc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jc=function(e){return Object.getOwnPropertyNames(e)};function AA(a){console&&console.warn&&console.warn(a)}var O_=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}Bf.exports=Lt;Bf.exports.once=PA;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var F_=10;function Kc(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return F_},set:function(a){if(typeof a!="number"||a<0||O_(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");F_=a}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||O_(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function N_(a){return a._maxListeners===void 0?Lt.defaultMaxListeners:a._maxListeners}Lt.prototype.getMaxListeners=function(){return N_(this)};Lt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",r=this._events;if(r!==void 0)i=i&&r.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var c=r[e];if(c===void 0)return!1;if(typeof c=="function")D_(c,this,t);else for(var h=c.length,f=G_(c,h),n=0;n<h;++n)D_(f[n],this,t);return!0};function B_(a,e,t,n){var i,r,s;if(Kc(t),r=a._events,r===void 0?(r=a._events=Object.create(null),a._eventsCount=0):(r.newListener!==void 0&&(a.emit("newListener",e,t.listener?t.listener:t),r=a._events),s=r[e]),s===void 0)s=r[e]=t,++a._eventsCount;else if(typeof s=="function"?s=r[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=N_(a),i>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=a,l.type=e,l.count=s.length,AA(l)}return a}Lt.prototype.addListener=function(e,t){return B_(this,e,t,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,t){return B_(this,e,t,!0)};function LA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U_(a,e,t){var n={fired:!1,wrapFn:void 0,target:a,type:e,listener:t},i=LA.bind(n);return i.listener=t,n.wrapFn=i,i}Lt.prototype.once=function(e,t){return Kc(t),this.on(e,U_(this,e,t)),this};Lt.prototype.prependOnceListener=function(e,t){return Kc(t),this.prependListener(e,U_(this,e,t)),this};Lt.prototype.removeListener=function(e,t){var n,i,r,s,l;if(Kc(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){l=n[s].listener,r=s;break}if(r<0)return this;r===0?n.shift():RA(n,r),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var r=Object.keys(n),s;for(i=0;i<r.length;++i)s=r[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function z_(a,e,t){var n=a._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?CA(i):G_(i,i.length)}Lt.prototype.listeners=function(e){return z_(this,e,!0)};Lt.prototype.rawListeners=function(e){return z_(this,e,!1)};Lt.listenerCount=function(a,e){return typeof a.listenerCount=="function"?a.listenerCount(e):k_.call(a,e)};Lt.prototype.listenerCount=k_;function k_(a){var e=this._events;if(e!==void 0){var t=e[a];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?Jc(this._events):[]};function G_(a,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=a[n];return t}function RA(a,e){for(;e+1<a.length;e++)a[e]=a[e+1];a.pop()}function CA(a){for(var e=new Array(a.length),t=0;t<e.length;++t)e[t]=a[t].listener||a[t];return e}function PA(a,e){return new Promise(function(t,n){function i(s){a.removeListener(e,r),n(s)}function r(){typeof a.removeListener=="function"&&a.removeListener("error",i),t([].slice.call(arguments))}H_(a,e,r,{once:!0}),e!=="error"&&IA(a,i,{once:!0})})}function IA(a,e,t){typeof a.on=="function"&&H_(a,"error",e,t)}function H_(a,e,t,n){if(typeof a.on=="function")n.once?a.once(e,t):a.on(e,t);else if(typeof a.addEventListener=="function")a.addEventListener(e,function i(r){n.once&&a.removeEventListener(e,i),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var MF=Bf.exports,V_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(a,e){(function(){var t,n="4.17.21",i=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",d=1,g=2,p=4,_=1,x=2,b=1,v=2,y=4,S=8,M=16,A=32,R=64,T=128,N=256,X=512,H=30,O="...",te=800,V=16,Y=1,$=2,W=3,ee=1/0,re=9007199254740991,Le=17976931348623157e292,J=0/0,ve=4294967295,ze=ve-1,fe=ve>>>1,Me=[["ary",T],["bind",b],["bindKey",v],["curry",S],["curryRight",M],["flip",X],["partial",A],["partialRight",R],["rearg",N]],Te="[object Arguments]",z="[object Array]",F="[object AsyncFunction]",k="[object Boolean]",ne="[object Date]",de="[object DOMException]",ge="[object Error]",Z="[object Function]",oe="[object GeneratorFunction]",ce="[object Map]",Se="[object Number]",xe="[object Null]",I="[object Object]",P="[object Promise]",le="[object Proxy]",ye="[object RegExp]",we="[object Set]",Ae="[object String]",We="[object Symbol]",ke="[object Undefined]",Xe="[object WeakMap]",Be="[object WeakSet]",q="[object ArrayBuffer]",Re="[object DataView]",_e="[object Float32Array]",Ue="[object Float64Array]",Oe="[object Int8Array]",tt="[object Int16Array]",zt="[object Int32Array]",Vt="[object Uint8Array]",Et="[object Uint8ClampedArray]",xt="[object Uint16Array]",Kt="[object Uint32Array]",on=/\b__p \+= '';/g,pr=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mr=/&(?:amp|lt|gt|quot|#39);/g,Yn=/[&<>"']/g,Os=RegExp(mr.source),xo=RegExp(Yn.source),gt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yn=/^\w*$/,$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(Ct.source),D=/^\s+/,Q=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ie=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,Ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qe=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,Qe=/^0b[01]+$/i,At=/^\[object .+?Constructor\]$/,xi=/^0o[0-7]+$/i,ot=/^(?:0|[1-9]\d*)$/,gr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,_r=/['\n\r\u2028\u2029\\]/g,yi="\\ud800-\\udfff",vr="\\u0300-\\u036f",Ki="\\ufe20-\\ufe2f",Wt="\\u20d0-\\u20ff",Xr=vr+Ki+Wt,qn="\\u2700-\\u27bf",am="a-z\\xdf-\\xf6\\xf8-\\xff",xw="\\xac\\xb1\\xd7\\xf7",yw="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ww="\\u2000-\\u206f",bw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lm="A-Z\\xc0-\\xd6\\xd8-\\xde",cm="\\ufe0e\\ufe0f",um=xw+yw+ww+bw,Eh="['\u2019]",Mw="["+yi+"]",hm="["+um+"]",uc="["+Xr+"]",fm="\\d+",Sw="["+qn+"]",dm="["+am+"]",pm="[^"+yi+um+fm+qn+am+lm+"]",Ah="\\ud83c[\\udffb-\\udfff]",Tw="(?:"+uc+"|"+Ah+")",mm="[^"+yi+"]",Lh="(?:\\ud83c[\\udde6-\\uddff]){2}",Rh="[\\ud800-\\udbff][\\udc00-\\udfff]",yo="["+lm+"]",gm="\\u200d",_m="(?:"+dm+"|"+pm+")",Ew="(?:"+yo+"|"+pm+")",vm="(?:"+Eh+"(?:d|ll|m|re|s|t|ve))?",xm="(?:"+Eh+"(?:D|LL|M|RE|S|T|VE))?",ym=Tw+"?",wm="["+cm+"]?",Aw="(?:"+gm+"(?:"+[mm,Lh,Rh].join("|")+")"+wm+ym+")*",Lw="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bm=wm+ym+Aw,Cw="(?:"+[Sw,Lh,Rh].join("|")+")"+bm,Pw="(?:"+[mm+uc+"?",uc,Lh,Rh,Mw].join("|")+")",Iw=RegExp(Eh,"g"),Dw=RegExp(uc,"g"),Ch=RegExp(Ah+"(?="+Ah+")|"+Pw+bm,"g"),Ow=RegExp([yo+"?"+dm+"+"+vm+"(?="+[hm,yo,"$"].join("|")+")",Ew+"+"+xm+"(?="+[hm,yo+_m,"$"].join("|")+")",yo+"?"+_m+"+"+vm,yo+"+"+xm,Rw,Lw,fm,Cw].join("|"),"g"),Fw=RegExp("["+gm+yi+Xr+cm+"]"),Nw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uw=-1,kt={};kt[_e]=kt[Ue]=kt[Oe]=kt[tt]=kt[zt]=kt[Vt]=kt[Et]=kt[xt]=kt[Kt]=!0,kt[Te]=kt[z]=kt[q]=kt[k]=kt[Re]=kt[ne]=kt[ge]=kt[Z]=kt[ce]=kt[Se]=kt[I]=kt[ye]=kt[we]=kt[Ae]=kt[Xe]=!1;var Bt={};Bt[Te]=Bt[z]=Bt[q]=Bt[Re]=Bt[k]=Bt[ne]=Bt[_e]=Bt[Ue]=Bt[Oe]=Bt[tt]=Bt[zt]=Bt[ce]=Bt[Se]=Bt[I]=Bt[ye]=Bt[we]=Bt[Ae]=Bt[We]=Bt[Vt]=Bt[Et]=Bt[xt]=Bt[Kt]=!0,Bt[ge]=Bt[Z]=Bt[Xe]=!1;var zw={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},kw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vw=parseFloat,Ww=parseInt,Mm=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws,Xw=typeof self=="object"&&self&&self.Object===Object&&self,wn=Mm||Xw||Function("return this")(),Ph=e&&!e.nodeType&&e,Fs=Ph&&!0&&a&&!a.nodeType&&a,Sm=Fs&&Fs.exports===Ph,Ih=Sm&&Mm.process,wi=function(){try{var j=Fs&&Fs.require&&Fs.require("util").types;return j||Ih&&Ih.binding&&Ih.binding("util")}catch{}}(),Tm=wi&&wi.isArrayBuffer,Em=wi&&wi.isDate,Am=wi&&wi.isMap,Lm=wi&&wi.isRegExp,Rm=wi&&wi.isSet,Cm=wi&&wi.isTypedArray;function oi(j,he,se){switch(se.length){case 0:return j.call(he);case 1:return j.call(he,se[0]);case 2:return j.call(he,se[0],se[1]);case 3:return j.call(he,se[0],se[1],se[2])}return j.apply(he,se)}function Yw(j,he,se,De){for(var et=-1,vt=j==null?0:j.length;++et<vt;){var un=j[et];he(De,un,se(un),j)}return De}function bi(j,he){for(var se=-1,De=j==null?0:j.length;++se<De&&he(j[se],se,j)!==!1;);return j}function qw(j,he){for(var se=j==null?0:j.length;se--&&he(j[se],se,j)!==!1;);return j}function Pm(j,he){for(var se=-1,De=j==null?0:j.length;++se<De;)if(!he(j[se],se,j))return!1;return!0}function Yr(j,he){for(var se=-1,De=j==null?0:j.length,et=0,vt=[];++se<De;){var un=j[se];he(un,se,j)&&(vt[et++]=un)}return vt}function hc(j,he){var se=j==null?0:j.length;return!!se&&wo(j,he,0)>-1}function Dh(j,he,se){for(var De=-1,et=j==null?0:j.length;++De<et;)if(se(he,j[De]))return!0;return!1}function Xt(j,he){for(var se=-1,De=j==null?0:j.length,et=Array(De);++se<De;)et[se]=he(j[se],se,j);return et}function qr(j,he){for(var se=-1,De=he.length,et=j.length;++se<De;)j[et+se]=he[se];return j}function Oh(j,he,se,De){var et=-1,vt=j==null?0:j.length;for(De&&vt&&(se=j[++et]);++et<vt;)se=he(se,j[et],et,j);return se}function jw(j,he,se,De){var et=j==null?0:j.length;for(De&&et&&(se=j[--et]);et--;)se=he(se,j[et],et,j);return se}function Fh(j,he){for(var se=-1,De=j==null?0:j.length;++se<De;)if(he(j[se],se,j))return!0;return!1}var Zw=Nh("length");function Jw(j){return j.split("")}function Kw(j){return j.match(Fe)||[]}function Im(j,he,se){var De;return se(j,function(et,vt,un){if(he(et,vt,un))return De=vt,!1}),De}function fc(j,he,se,De){for(var et=j.length,vt=se+(De?1:-1);De?vt--:++vt<et;)if(he(j[vt],vt,j))return vt;return-1}function wo(j,he,se){return he===he?cb(j,he,se):fc(j,Dm,se)}function $w(j,he,se,De){for(var et=se-1,vt=j.length;++et<vt;)if(De(j[et],he))return et;return-1}function Dm(j){return j!==j}function Om(j,he){var se=j==null?0:j.length;return se?Uh(j,he)/se:J}function Nh(j){return function(he){return he==null?t:he[j]}}function Bh(j){return function(he){return j==null?t:j[he]}}function Fm(j,he,se,De,et){return et(j,function(vt,un,It){se=De?(De=!1,vt):he(se,vt,un,It)}),se}function Qw(j,he){var se=j.length;for(j.sort(he);se--;)j[se]=j[se].value;return j}function Uh(j,he){for(var se,De=-1,et=j.length;++De<et;){var vt=he(j[De]);vt!==t&&(se=se===t?vt:se+vt)}return se}function zh(j,he){for(var se=-1,De=Array(j);++se<j;)De[se]=he(se);return De}function eb(j,he){return Xt(he,function(se){return[se,j[se]]})}function Nm(j){return j&&j.slice(0,km(j)+1).replace(D,"")}function ai(j){return function(he){return j(he)}}function kh(j,he){return Xt(he,function(se){return j[se]})}function qa(j,he){return j.has(he)}function Bm(j,he){for(var se=-1,De=j.length;++se<De&&wo(he,j[se],0)>-1;);return se}function Um(j,he){for(var se=j.length;se--&&wo(he,j[se],0)>-1;);return se}function tb(j,he){for(var se=j.length,De=0;se--;)j[se]===he&&++De;return De}var nb=Bh(zw),ib=Bh(kw);function rb(j){return"\\"+Hw[j]}function sb(j,he){return j==null?t:j[he]}function bo(j){return Fw.test(j)}function ob(j){return Nw.test(j)}function ab(j){for(var he,se=[];!(he=j.next()).done;)se.push(he.value);return se}function Gh(j){var he=-1,se=Array(j.size);return j.forEach(function(De,et){se[++he]=[et,De]}),se}function zm(j,he){return function(se){return j(he(se))}}function jr(j,he){for(var se=-1,De=j.length,et=0,vt=[];++se<De;){var un=j[se];(un===he||un===f)&&(j[se]=f,vt[et++]=se)}return vt}function dc(j){var he=-1,se=Array(j.size);return j.forEach(function(De){se[++he]=De}),se}function lb(j){var he=-1,se=Array(j.size);return j.forEach(function(De){se[++he]=[De,De]}),se}function cb(j,he,se){for(var De=se-1,et=j.length;++De<et;)if(j[De]===he)return De;return-1}function ub(j,he,se){for(var De=se+1;De--;)if(j[De]===he)return De;return De}function Mo(j){return bo(j)?fb(j):Zw(j)}function Gi(j){return bo(j)?db(j):Jw(j)}function km(j){for(var he=j.length;he--&&Q.test(j.charAt(he)););return he}var hb=Bh(Gw);function fb(j){for(var he=Ch.lastIndex=0;Ch.test(j);)++he;return he}function db(j){return j.match(Ch)||[]}function pb(j){return j.match(Ow)||[]}var mb=function j(he){he=he==null?wn:So.defaults(wn.Object(),he,So.pick(wn,Bw));var se=he.Array,De=he.Date,et=he.Error,vt=he.Function,un=he.Math,It=he.Object,Hh=he.RegExp,gb=he.String,Mi=he.TypeError,pc=se.prototype,_b=vt.prototype,To=It.prototype,mc=he["__core-js_shared__"],gc=_b.toString,Tt=To.hasOwnProperty,vb=0,Gm=function(){var o=/[^.]+$/.exec(mc&&mc.keys&&mc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_c=To.toString,xb=gc.call(It),yb=wn._,wb=Hh("^"+gc.call(Tt).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vc=Sm?he.Buffer:t,Zr=he.Symbol,xc=he.Uint8Array,Hm=vc?vc.allocUnsafe:t,yc=zm(It.getPrototypeOf,It),Vm=It.create,Wm=To.propertyIsEnumerable,wc=pc.splice,Xm=Zr?Zr.isConcatSpreadable:t,ja=Zr?Zr.iterator:t,Ns=Zr?Zr.toStringTag:t,bc=function(){try{var o=Gs(It,"defineProperty");return o({},"",{}),o}catch{}}(),bb=he.clearTimeout!==wn.clearTimeout&&he.clearTimeout,Mb=De&&De.now!==wn.Date.now&&De.now,Sb=he.setTimeout!==wn.setTimeout&&he.setTimeout,Mc=un.ceil,Sc=un.floor,Vh=It.getOwnPropertySymbols,Tb=vc?vc.isBuffer:t,Ym=he.isFinite,Eb=pc.join,Ab=zm(It.keys,It),hn=un.max,An=un.min,Lb=De.now,Rb=he.parseInt,qm=un.random,Cb=pc.reverse,Wh=Gs(he,"DataView"),Za=Gs(he,"Map"),Xh=Gs(he,"Promise"),Eo=Gs(he,"Set"),Ja=Gs(he,"WeakMap"),Ka=Gs(It,"create"),Tc=Ja&&new Ja,Ao={},Pb=Hs(Wh),Ib=Hs(Za),Db=Hs(Xh),Ob=Hs(Eo),Fb=Hs(Ja),Ec=Zr?Zr.prototype:t,$a=Ec?Ec.valueOf:t,jm=Ec?Ec.toString:t;function L(o){if($t(o)&&!nt(o)&&!(o instanceof ut)){if(o instanceof Si)return o;if(Tt.call(o,"__wrapped__"))return Zg(o)}return new Si(o)}var Lo=function(){function o(){}return function(u){if(!qt(u))return{};if(Vm)return Vm(u);o.prototype=u;var m=new o;return o.prototype=t,m}}();function Ac(){}function Si(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}L.templateSettings={escape:gt,evaluate:dt,interpolate:_t,variable:"",imports:{_:L}},L.prototype=Ac.prototype,L.prototype.constructor=L,Si.prototype=Lo(Ac.prototype),Si.prototype.constructor=Si;function ut(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function Nb(){var o=new ut(this.__wrapped__);return o.__actions__=jn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=jn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=jn(this.__views__),o}function Bb(){if(this.__filtered__){var o=new ut(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function Ub(){var o=this.__wrapped__.value(),u=this.__dir__,m=nt(o),w=u<0,E=m?o.length:0,C=JM(0,E,this.__views__),B=C.start,G=C.end,K=G-B,pe=w?G:B-1,me=this.__iteratees__,be=me.length,Ce=0,Ge=An(K,this.__takeCount__);if(!m||!w&&E==K&&Ge==K)return vg(o,this.__actions__);var Ze=[];e:for(;K--&&Ce<Ge;){pe+=u;for(var st=-1,Je=o[pe];++st<be;){var lt=me[st],ht=lt.iteratee,ui=lt.type,Bn=ht(Je);if(ui==$)Je=Bn;else if(!Bn){if(ui==Y)continue e;break e}}Ze[Ce++]=Je}return Ze}ut.prototype=Lo(Ac.prototype),ut.prototype.constructor=ut;function Bs(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var w=o[u];this.set(w[0],w[1])}}function zb(){this.__data__=Ka?Ka(null):{},this.size=0}function kb(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Gb(o){var u=this.__data__;if(Ka){var m=u[o];return m===c?t:m}return Tt.call(u,o)?u[o]:t}function Hb(o){var u=this.__data__;return Ka?u[o]!==t:Tt.call(u,o)}function Vb(o,u){var m=this.__data__;return this.size+=this.has(o)?0:1,m[o]=Ka&&u===t?c:u,this}Bs.prototype.clear=zb,Bs.prototype.delete=kb,Bs.prototype.get=Gb,Bs.prototype.has=Hb,Bs.prototype.set=Vb;function xr(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var w=o[u];this.set(w[0],w[1])}}function Wb(){this.__data__=[],this.size=0}function Xb(o){var u=this.__data__,m=Lc(u,o);if(m<0)return!1;var w=u.length-1;return m==w?u.pop():wc.call(u,m,1),--this.size,!0}function Yb(o){var u=this.__data__,m=Lc(u,o);return m<0?t:u[m][1]}function qb(o){return Lc(this.__data__,o)>-1}function jb(o,u){var m=this.__data__,w=Lc(m,o);return w<0?(++this.size,m.push([o,u])):m[w][1]=u,this}xr.prototype.clear=Wb,xr.prototype.delete=Xb,xr.prototype.get=Yb,xr.prototype.has=qb,xr.prototype.set=jb;function yr(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var w=o[u];this.set(w[0],w[1])}}function Zb(){this.size=0,this.__data__={hash:new Bs,map:new(Za||xr),string:new Bs}}function Jb(o){var u=kc(this,o).delete(o);return this.size-=u?1:0,u}function Kb(o){return kc(this,o).get(o)}function $b(o){return kc(this,o).has(o)}function Qb(o,u){var m=kc(this,o),w=m.size;return m.set(o,u),this.size+=m.size==w?0:1,this}yr.prototype.clear=Zb,yr.prototype.delete=Jb,yr.prototype.get=Kb,yr.prototype.has=$b,yr.prototype.set=Qb;function Us(o){var u=-1,m=o==null?0:o.length;for(this.__data__=new yr;++u<m;)this.add(o[u])}function eM(o){return this.__data__.set(o,c),this}function tM(o){return this.__data__.has(o)}Us.prototype.add=Us.prototype.push=eM,Us.prototype.has=tM;function Hi(o){var u=this.__data__=new xr(o);this.size=u.size}function nM(){this.__data__=new xr,this.size=0}function iM(o){var u=this.__data__,m=u.delete(o);return this.size=u.size,m}function rM(o){return this.__data__.get(o)}function sM(o){return this.__data__.has(o)}function oM(o,u){var m=this.__data__;if(m instanceof xr){var w=m.__data__;if(!Za||w.length<i-1)return w.push([o,u]),this.size=++m.size,this;m=this.__data__=new yr(w)}return m.set(o,u),this.size=m.size,this}Hi.prototype.clear=nM,Hi.prototype.delete=iM,Hi.prototype.get=rM,Hi.prototype.has=sM,Hi.prototype.set=oM;function Zm(o,u){var m=nt(o),w=!m&&Vs(o),E=!m&&!w&&es(o),C=!m&&!w&&!E&&Io(o),B=m||w||E||C,G=B?zh(o.length,gb):[],K=G.length;for(var pe in o)(u||Tt.call(o,pe))&&!(B&&(pe=="length"||E&&(pe=="offset"||pe=="parent")||C&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||Sr(pe,K)))&&G.push(pe);return G}function Jm(o){var u=o.length;return u?o[nf(0,u-1)]:t}function aM(o,u){return Gc(jn(o),zs(u,0,o.length))}function lM(o){return Gc(jn(o))}function Yh(o,u,m){(m!==t&&!Vi(o[u],m)||m===t&&!(u in o))&&wr(o,u,m)}function Qa(o,u,m){var w=o[u];(!(Tt.call(o,u)&&Vi(w,m))||m===t&&!(u in o))&&wr(o,u,m)}function Lc(o,u){for(var m=o.length;m--;)if(Vi(o[m][0],u))return m;return-1}function cM(o,u,m,w){return Jr(o,function(E,C,B){u(w,E,m(E),B)}),w}function Km(o,u){return o&&Qi(u,gn(u),o)}function uM(o,u){return o&&Qi(u,Jn(u),o)}function wr(o,u,m){u=="__proto__"&&bc?bc(o,u,{configurable:!0,enumerable:!0,value:m,writable:!0}):o[u]=m}function qh(o,u){for(var m=-1,w=u.length,E=se(w),C=o==null;++m<w;)E[m]=C?t:Lf(o,u[m]);return E}function zs(o,u,m){return o===o&&(m!==t&&(o=o<=m?o:m),u!==t&&(o=o>=u?o:u)),o}function Ti(o,u,m,w,E,C){var B,G=u&d,K=u&g,pe=u&p;if(m&&(B=E?m(o,w,E,C):m(o)),B!==t)return B;if(!qt(o))return o;var me=nt(o);if(me){if(B=$M(o),!G)return jn(o,B)}else{var be=Ln(o),Ce=be==Z||be==oe;if(es(o))return wg(o,G);if(be==I||be==Te||Ce&&!E){if(B=K||Ce?{}:kg(o),!G)return K?GM(o,uM(B,o)):kM(o,Km(B,o))}else{if(!Bt[be])return E?o:{};B=QM(o,be,G)}}C||(C=new Hi);var Ge=C.get(o);if(Ge)return Ge;C.set(o,B),m_(o)?o.forEach(function(Je){B.add(Ti(Je,u,m,Je,o,C))}):d_(o)&&o.forEach(function(Je,lt){B.set(lt,Ti(Je,u,m,lt,o,C))});var Ze=pe?K?pf:df:K?Jn:gn,st=me?t:Ze(o);return bi(st||o,function(Je,lt){st&&(lt=Je,Je=o[lt]),Qa(B,lt,Ti(Je,u,m,lt,o,C))}),B}function hM(o){var u=gn(o);return function(m){return $m(m,o,u)}}function $m(o,u,m){var w=m.length;if(o==null)return!w;for(o=It(o);w--;){var E=m[w],C=u[E],B=o[E];if(B===t&&!(E in o)||!C(B))return!1}return!0}function Qm(o,u,m){if(typeof o!="function")throw new Mi(s);return ol(function(){o.apply(t,m)},u)}function el(o,u,m,w){var E=-1,C=hc,B=!0,G=o.length,K=[],pe=u.length;if(!G)return K;m&&(u=Xt(u,ai(m))),w?(C=Dh,B=!1):u.length>=i&&(C=qa,B=!1,u=new Us(u));e:for(;++E<G;){var me=o[E],be=m==null?me:m(me);if(me=w||me!==0?me:0,B&&be===be){for(var Ce=pe;Ce--;)if(u[Ce]===be)continue e;K.push(me)}else C(u,be,w)||K.push(me)}return K}var Jr=Eg($i),eg=Eg(Zh,!0);function fM(o,u){var m=!0;return Jr(o,function(w,E,C){return m=!!u(w,E,C),m}),m}function Rc(o,u,m){for(var w=-1,E=o.length;++w<E;){var C=o[w],B=u(C);if(B!=null&&(G===t?B===B&&!ci(B):m(B,G)))var G=B,K=C}return K}function dM(o,u,m,w){var E=o.length;for(m=it(m),m<0&&(m=-m>E?0:E+m),w=w===t||w>E?E:it(w),w<0&&(w+=E),w=m>w?0:__(w);m<w;)o[m++]=u;return o}function tg(o,u){var m=[];return Jr(o,function(w,E,C){u(w,E,C)&&m.push(w)}),m}function bn(o,u,m,w,E){var C=-1,B=o.length;for(m||(m=tS),E||(E=[]);++C<B;){var G=o[C];u>0&&m(G)?u>1?bn(G,u-1,m,w,E):qr(E,G):w||(E[E.length]=G)}return E}var jh=Ag(),ng=Ag(!0);function $i(o,u){return o&&jh(o,u,gn)}function Zh(o,u){return o&&ng(o,u,gn)}function Cc(o,u){return Yr(u,function(m){return Tr(o[m])})}function ks(o,u){u=$r(u,o);for(var m=0,w=u.length;o!=null&&m<w;)o=o[er(u[m++])];return m&&m==w?o:t}function ig(o,u,m){var w=u(o);return nt(o)?w:qr(w,m(o))}function Fn(o){return o==null?o===t?ke:xe:Ns&&Ns in It(o)?ZM(o):lS(o)}function Jh(o,u){return o>u}function pM(o,u){return o!=null&&Tt.call(o,u)}function mM(o,u){return o!=null&&u in It(o)}function gM(o,u,m){return o>=An(u,m)&&o<hn(u,m)}function Kh(o,u,m){for(var w=m?Dh:hc,E=o[0].length,C=o.length,B=C,G=se(C),K=1/0,pe=[];B--;){var me=o[B];B&&u&&(me=Xt(me,ai(u))),K=An(me.length,K),G[B]=!m&&(u||E>=120&&me.length>=120)?new Us(B&&me):t}me=o[0];var be=-1,Ce=G[0];e:for(;++be<E&&pe.length<K;){var Ge=me[be],Ze=u?u(Ge):Ge;if(Ge=m||Ge!==0?Ge:0,!(Ce?qa(Ce,Ze):w(pe,Ze,m))){for(B=C;--B;){var st=G[B];if(!(st?qa(st,Ze):w(o[B],Ze,m)))continue e}Ce&&Ce.push(Ze),pe.push(Ge)}}return pe}function _M(o,u,m,w){return $i(o,function(E,C,B){u(w,m(E),C,B)}),w}function tl(o,u,m){u=$r(u,o),o=Wg(o,u);var w=o==null?o:o[er(Ai(u))];return w==null?t:oi(w,o,m)}function rg(o){return $t(o)&&Fn(o)==Te}function vM(o){return $t(o)&&Fn(o)==q}function xM(o){return $t(o)&&Fn(o)==ne}function nl(o,u,m,w,E){return o===u?!0:o==null||u==null||!$t(o)&&!$t(u)?o!==o&&u!==u:yM(o,u,m,w,nl,E)}function yM(o,u,m,w,E,C){var B=nt(o),G=nt(u),K=B?z:Ln(o),pe=G?z:Ln(u);K=K==Te?I:K,pe=pe==Te?I:pe;var me=K==I,be=pe==I,Ce=K==pe;if(Ce&&es(o)){if(!es(u))return!1;B=!0,me=!1}if(Ce&&!me)return C||(C=new Hi),B||Io(o)?Bg(o,u,m,w,E,C):qM(o,u,K,m,w,E,C);if(!(m&_)){var Ge=me&&Tt.call(o,"__wrapped__"),Ze=be&&Tt.call(u,"__wrapped__");if(Ge||Ze){var st=Ge?o.value():o,Je=Ze?u.value():u;return C||(C=new Hi),E(st,Je,m,w,C)}}return Ce?(C||(C=new Hi),jM(o,u,m,w,E,C)):!1}function wM(o){return $t(o)&&Ln(o)==ce}function $h(o,u,m,w){var E=m.length,C=E,B=!w;if(o==null)return!C;for(o=It(o);E--;){var G=m[E];if(B&&G[2]?G[1]!==o[G[0]]:!(G[0]in o))return!1}for(;++E<C;){G=m[E];var K=G[0],pe=o[K],me=G[1];if(B&&G[2]){if(pe===t&&!(K in o))return!1}else{var be=new Hi;if(w)var Ce=w(pe,me,K,o,u,be);if(!(Ce===t?nl(me,pe,_|x,w,be):Ce))return!1}}return!0}function sg(o){if(!qt(o)||iS(o))return!1;var u=Tr(o)?wb:At;return u.test(Hs(o))}function bM(o){return $t(o)&&Fn(o)==ye}function MM(o){return $t(o)&&Ln(o)==we}function SM(o){return $t(o)&&qc(o.length)&&!!kt[Fn(o)]}function og(o){return typeof o=="function"?o:o==null?Kn:typeof o=="object"?nt(o)?cg(o[0],o[1]):lg(o):L_(o)}function Qh(o){if(!sl(o))return Ab(o);var u=[];for(var m in It(o))Tt.call(o,m)&&m!="constructor"&&u.push(m);return u}function TM(o){if(!qt(o))return aS(o);var u=sl(o),m=[];for(var w in o)w=="constructor"&&(u||!Tt.call(o,w))||m.push(w);return m}function ef(o,u){return o<u}function ag(o,u){var m=-1,w=Zn(o)?se(o.length):[];return Jr(o,function(E,C,B){w[++m]=u(E,C,B)}),w}function lg(o){var u=gf(o);return u.length==1&&u[0][2]?Hg(u[0][0],u[0][1]):function(m){return m===o||$h(m,o,u)}}function cg(o,u){return vf(o)&&Gg(u)?Hg(er(o),u):function(m){var w=Lf(m,o);return w===t&&w===u?Rf(m,o):nl(u,w,_|x)}}function Pc(o,u,m,w,E){o!==u&&jh(u,function(C,B){if(E||(E=new Hi),qt(C))EM(o,u,B,m,Pc,w,E);else{var G=w?w(yf(o,B),C,B+"",o,u,E):t;G===t&&(G=C),Yh(o,B,G)}},Jn)}function EM(o,u,m,w,E,C,B){var G=yf(o,m),K=yf(u,m),pe=B.get(K);if(pe){Yh(o,m,pe);return}var me=C?C(G,K,m+"",o,u,B):t,be=me===t;if(be){var Ce=nt(K),Ge=!Ce&&es(K),Ze=!Ce&&!Ge&&Io(K);me=K,Ce||Ge||Ze?nt(G)?me=G:en(G)?me=jn(G):Ge?(be=!1,me=wg(K,!0)):Ze?(be=!1,me=bg(K,!0)):me=[]:al(K)||Vs(K)?(me=G,Vs(G)?me=v_(G):(!qt(G)||Tr(G))&&(me=kg(K))):be=!1}be&&(B.set(K,me),E(me,K,w,C,B),B.delete(K)),Yh(o,m,me)}function ug(o,u){var m=o.length;if(!!m)return u+=u<0?m:0,Sr(u,m)?o[u]:t}function hg(o,u,m){u.length?u=Xt(u,function(C){return nt(C)?function(B){return ks(B,C.length===1?C[0]:C)}:C}):u=[Kn];var w=-1;u=Xt(u,ai(je()));var E=ag(o,function(C,B,G){var K=Xt(u,function(pe){return pe(C)});return{criteria:K,index:++w,value:C}});return Qw(E,function(C,B){return zM(C,B,m)})}function AM(o,u){return fg(o,u,function(m,w){return Rf(o,w)})}function fg(o,u,m){for(var w=-1,E=u.length,C={};++w<E;){var B=u[w],G=ks(o,B);m(G,B)&&il(C,$r(B,o),G)}return C}function LM(o){return function(u){return ks(u,o)}}function tf(o,u,m,w){var E=w?$w:wo,C=-1,B=u.length,G=o;for(o===u&&(u=jn(u)),m&&(G=Xt(o,ai(m)));++C<B;)for(var K=0,pe=u[C],me=m?m(pe):pe;(K=E(G,me,K,w))>-1;)G!==o&&wc.call(G,K,1),wc.call(o,K,1);return o}function dg(o,u){for(var m=o?u.length:0,w=m-1;m--;){var E=u[m];if(m==w||E!==C){var C=E;Sr(E)?wc.call(o,E,1):of(o,E)}}return o}function nf(o,u){return o+Sc(qm()*(u-o+1))}function RM(o,u,m,w){for(var E=-1,C=hn(Mc((u-o)/(m||1)),0),B=se(C);C--;)B[w?C:++E]=o,o+=m;return B}function rf(o,u){var m="";if(!o||u<1||u>re)return m;do u%2&&(m+=o),u=Sc(u/2),u&&(o+=o);while(u);return m}function at(o,u){return wf(Vg(o,u,Kn),o+"")}function CM(o){return Jm(Do(o))}function PM(o,u){var m=Do(o);return Gc(m,zs(u,0,m.length))}function il(o,u,m,w){if(!qt(o))return o;u=$r(u,o);for(var E=-1,C=u.length,B=C-1,G=o;G!=null&&++E<C;){var K=er(u[E]),pe=m;if(K==="__proto__"||K==="constructor"||K==="prototype")return o;if(E!=B){var me=G[K];pe=w?w(me,K,G):t,pe===t&&(pe=qt(me)?me:Sr(u[E+1])?[]:{})}Qa(G,K,pe),G=G[K]}return o}var pg=Tc?function(o,u){return Tc.set(o,u),o}:Kn,IM=bc?function(o,u){return bc(o,"toString",{configurable:!0,enumerable:!1,value:Pf(u),writable:!0})}:Kn;function DM(o){return Gc(Do(o))}function Ei(o,u,m){var w=-1,E=o.length;u<0&&(u=-u>E?0:E+u),m=m>E?E:m,m<0&&(m+=E),E=u>m?0:m-u>>>0,u>>>=0;for(var C=se(E);++w<E;)C[w]=o[w+u];return C}function OM(o,u){var m;return Jr(o,function(w,E,C){return m=u(w,E,C),!m}),!!m}function Ic(o,u,m){var w=0,E=o==null?w:o.length;if(typeof u=="number"&&u===u&&E<=fe){for(;w<E;){var C=w+E>>>1,B=o[C];B!==null&&!ci(B)&&(m?B<=u:B<u)?w=C+1:E=C}return E}return sf(o,u,Kn,m)}function sf(o,u,m,w){var E=0,C=o==null?0:o.length;if(C===0)return 0;u=m(u);for(var B=u!==u,G=u===null,K=ci(u),pe=u===t;E<C;){var me=Sc((E+C)/2),be=m(o[me]),Ce=be!==t,Ge=be===null,Ze=be===be,st=ci(be);if(B)var Je=w||Ze;else pe?Je=Ze&&(w||Ce):G?Je=Ze&&Ce&&(w||!Ge):K?Je=Ze&&Ce&&!Ge&&(w||!st):Ge||st?Je=!1:Je=w?be<=u:be<u;Je?E=me+1:C=me}return An(C,ze)}function mg(o,u){for(var m=-1,w=o.length,E=0,C=[];++m<w;){var B=o[m],G=u?u(B):B;if(!m||!Vi(G,K)){var K=G;C[E++]=B===0?0:B}}return C}function gg(o){return typeof o=="number"?o:ci(o)?J:+o}function li(o){if(typeof o=="string")return o;if(nt(o))return Xt(o,li)+"";if(ci(o))return jm?jm.call(o):"";var u=o+"";return u=="0"&&1/o==-ee?"-0":u}function Kr(o,u,m){var w=-1,E=hc,C=o.length,B=!0,G=[],K=G;if(m)B=!1,E=Dh;else if(C>=i){var pe=u?null:XM(o);if(pe)return dc(pe);B=!1,E=qa,K=new Us}else K=u?[]:G;e:for(;++w<C;){var me=o[w],be=u?u(me):me;if(me=m||me!==0?me:0,B&&be===be){for(var Ce=K.length;Ce--;)if(K[Ce]===be)continue e;u&&K.push(be),G.push(me)}else E(K,be,m)||(K!==G&&K.push(be),G.push(me))}return G}function of(o,u){return u=$r(u,o),o=Wg(o,u),o==null||delete o[er(Ai(u))]}function _g(o,u,m,w){return il(o,u,m(ks(o,u)),w)}function Dc(o,u,m,w){for(var E=o.length,C=w?E:-1;(w?C--:++C<E)&&u(o[C],C,o););return m?Ei(o,w?0:C,w?C+1:E):Ei(o,w?C+1:0,w?E:C)}function vg(o,u){var m=o;return m instanceof ut&&(m=m.value()),Oh(u,function(w,E){return E.func.apply(E.thisArg,qr([w],E.args))},m)}function af(o,u,m){var w=o.length;if(w<2)return w?Kr(o[0]):[];for(var E=-1,C=se(w);++E<w;)for(var B=o[E],G=-1;++G<w;)G!=E&&(C[E]=el(C[E]||B,o[G],u,m));return Kr(bn(C,1),u,m)}function xg(o,u,m){for(var w=-1,E=o.length,C=u.length,B={};++w<E;){var G=w<C?u[w]:t;m(B,o[w],G)}return B}function lf(o){return en(o)?o:[]}function cf(o){return typeof o=="function"?o:Kn}function $r(o,u){return nt(o)?o:vf(o,u)?[o]:jg(wt(o))}var FM=at;function Qr(o,u,m){var w=o.length;return m=m===t?w:m,!u&&m>=w?o:Ei(o,u,m)}var yg=bb||function(o){return wn.clearTimeout(o)};function wg(o,u){if(u)return o.slice();var m=o.length,w=Hm?Hm(m):new o.constructor(m);return o.copy(w),w}function uf(o){var u=new o.constructor(o.byteLength);return new xc(u).set(new xc(o)),u}function NM(o,u){var m=u?uf(o.buffer):o.buffer;return new o.constructor(m,o.byteOffset,o.byteLength)}function BM(o){var u=new o.constructor(o.source,qe.exec(o));return u.lastIndex=o.lastIndex,u}function UM(o){return $a?It($a.call(o)):{}}function bg(o,u){var m=u?uf(o.buffer):o.buffer;return new o.constructor(m,o.byteOffset,o.length)}function Mg(o,u){if(o!==u){var m=o!==t,w=o===null,E=o===o,C=ci(o),B=u!==t,G=u===null,K=u===u,pe=ci(u);if(!G&&!pe&&!C&&o>u||C&&B&&K&&!G&&!pe||w&&B&&K||!m&&K||!E)return 1;if(!w&&!C&&!pe&&o<u||pe&&m&&E&&!w&&!C||G&&m&&E||!B&&E||!K)return-1}return 0}function zM(o,u,m){for(var w=-1,E=o.criteria,C=u.criteria,B=E.length,G=m.length;++w<B;){var K=Mg(E[w],C[w]);if(K){if(w>=G)return K;var pe=m[w];return K*(pe=="desc"?-1:1)}}return o.index-u.index}function Sg(o,u,m,w){for(var E=-1,C=o.length,B=m.length,G=-1,K=u.length,pe=hn(C-B,0),me=se(K+pe),be=!w;++G<K;)me[G]=u[G];for(;++E<B;)(be||E<C)&&(me[m[E]]=o[E]);for(;pe--;)me[G++]=o[E++];return me}function Tg(o,u,m,w){for(var E=-1,C=o.length,B=-1,G=m.length,K=-1,pe=u.length,me=hn(C-G,0),be=se(me+pe),Ce=!w;++E<me;)be[E]=o[E];for(var Ge=E;++K<pe;)be[Ge+K]=u[K];for(;++B<G;)(Ce||E<C)&&(be[Ge+m[B]]=o[E++]);return be}function jn(o,u){var m=-1,w=o.length;for(u||(u=se(w));++m<w;)u[m]=o[m];return u}function Qi(o,u,m,w){var E=!m;m||(m={});for(var C=-1,B=u.length;++C<B;){var G=u[C],K=w?w(m[G],o[G],G,m,o):t;K===t&&(K=o[G]),E?wr(m,G,K):Qa(m,G,K)}return m}function kM(o,u){return Qi(o,_f(o),u)}function GM(o,u){return Qi(o,Ug(o),u)}function Oc(o,u){return function(m,w){var E=nt(m)?Yw:cM,C=u?u():{};return E(m,o,je(w,2),C)}}function Ro(o){return at(function(u,m){var w=-1,E=m.length,C=E>1?m[E-1]:t,B=E>2?m[2]:t;for(C=o.length>3&&typeof C=="function"?(E--,C):t,B&&Nn(m[0],m[1],B)&&(C=E<3?t:C,E=1),u=It(u);++w<E;){var G=m[w];G&&o(u,G,w,C)}return u})}function Eg(o,u){return function(m,w){if(m==null)return m;if(!Zn(m))return o(m,w);for(var E=m.length,C=u?E:-1,B=It(m);(u?C--:++C<E)&&w(B[C],C,B)!==!1;);return m}}function Ag(o){return function(u,m,w){for(var E=-1,C=It(u),B=w(u),G=B.length;G--;){var K=B[o?G:++E];if(m(C[K],K,C)===!1)break}return u}}function HM(o,u,m){var w=u&b,E=rl(o);function C(){var B=this&&this!==wn&&this instanceof C?E:o;return B.apply(w?m:this,arguments)}return C}function Lg(o){return function(u){u=wt(u);var m=bo(u)?Gi(u):t,w=m?m[0]:u.charAt(0),E=m?Qr(m,1).join(""):u.slice(1);return w[o]()+E}}function Co(o){return function(u){return Oh(E_(T_(u).replace(Iw,"")),o,"")}}function rl(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var m=Lo(o.prototype),w=o.apply(m,u);return qt(w)?w:m}}function VM(o,u,m){var w=rl(o);function E(){for(var C=arguments.length,B=se(C),G=C,K=Po(E);G--;)B[G]=arguments[G];var pe=C<3&&B[0]!==K&&B[C-1]!==K?[]:jr(B,K);if(C-=pe.length,C<m)return Dg(o,u,Fc,E.placeholder,t,B,pe,t,t,m-C);var me=this&&this!==wn&&this instanceof E?w:o;return oi(me,this,B)}return E}function Rg(o){return function(u,m,w){var E=It(u);if(!Zn(u)){var C=je(m,3);u=gn(u),m=function(G){return C(E[G],G,E)}}var B=o(u,m,w);return B>-1?E[C?u[B]:B]:t}}function Cg(o){return Mr(function(u){var m=u.length,w=m,E=Si.prototype.thru;for(o&&u.reverse();w--;){var C=u[w];if(typeof C!="function")throw new Mi(s);if(E&&!B&&zc(C)=="wrapper")var B=new Si([],!0)}for(w=B?w:m;++w<m;){C=u[w];var G=zc(C),K=G=="wrapper"?mf(C):t;K&&xf(K[0])&&K[1]==(T|S|A|N)&&!K[4].length&&K[9]==1?B=B[zc(K[0])].apply(B,K[3]):B=C.length==1&&xf(C)?B[G]():B.thru(C)}return function(){var pe=arguments,me=pe[0];if(B&&pe.length==1&&nt(me))return B.plant(me).value();for(var be=0,Ce=m?u[be].apply(this,pe):me;++be<m;)Ce=u[be].call(this,Ce);return Ce}})}function Fc(o,u,m,w,E,C,B,G,K,pe){var me=u&T,be=u&b,Ce=u&v,Ge=u&(S|M),Ze=u&X,st=Ce?t:rl(o);function Je(){for(var lt=arguments.length,ht=se(lt),ui=lt;ui--;)ht[ui]=arguments[ui];if(Ge)var Bn=Po(Je),hi=tb(ht,Bn);if(w&&(ht=Sg(ht,w,E,Ge)),C&&(ht=Tg(ht,C,B,Ge)),lt-=hi,Ge&&lt<pe){var tn=jr(ht,Bn);return Dg(o,u,Fc,Je.placeholder,m,ht,tn,G,K,pe-lt)}var Wi=be?m:this,Ar=Ce?Wi[o]:o;return lt=ht.length,G?ht=cS(ht,G):Ze&&lt>1&&ht.reverse(),me&&K<lt&&(ht.length=K),this&&this!==wn&&this instanceof Je&&(Ar=st||rl(Ar)),Ar.apply(Wi,ht)}return Je}function Pg(o,u){return function(m,w){return _M(m,o,u(w),{})}}function Nc(o,u){return function(m,w){var E;if(m===t&&w===t)return u;if(m!==t&&(E=m),w!==t){if(E===t)return w;typeof m=="string"||typeof w=="string"?(m=li(m),w=li(w)):(m=gg(m),w=gg(w)),E=o(m,w)}return E}}function hf(o){return Mr(function(u){return u=Xt(u,ai(je())),at(function(m){var w=this;return o(u,function(E){return oi(E,w,m)})})})}function Bc(o,u){u=u===t?" ":li(u);var m=u.length;if(m<2)return m?rf(u,o):u;var w=rf(u,Mc(o/Mo(u)));return bo(u)?Qr(Gi(w),0,o).join(""):w.slice(0,o)}function WM(o,u,m,w){var E=u&b,C=rl(o);function B(){for(var G=-1,K=arguments.length,pe=-1,me=w.length,be=se(me+K),Ce=this&&this!==wn&&this instanceof B?C:o;++pe<me;)be[pe]=w[pe];for(;K--;)be[pe++]=arguments[++G];return oi(Ce,E?m:this,be)}return B}function Ig(o){return function(u,m,w){return w&&typeof w!="number"&&Nn(u,m,w)&&(m=w=t),u=Er(u),m===t?(m=u,u=0):m=Er(m),w=w===t?u<m?1:-1:Er(w),RM(u,m,w,o)}}function Uc(o){return function(u,m){return typeof u=="string"&&typeof m=="string"||(u=Li(u),m=Li(m)),o(u,m)}}function Dg(o,u,m,w,E,C,B,G,K,pe){var me=u&S,be=me?B:t,Ce=me?t:B,Ge=me?C:t,Ze=me?t:C;u|=me?A:R,u&=~(me?R:A),u&y||(u&=~(b|v));var st=[o,u,E,Ge,be,Ze,Ce,G,K,pe],Je=m.apply(t,st);return xf(o)&&Xg(Je,st),Je.placeholder=w,Yg(Je,o,u)}function ff(o){var u=un[o];return function(m,w){if(m=Li(m),w=w==null?0:An(it(w),292),w&&Ym(m)){var E=(wt(m)+"e").split("e"),C=u(E[0]+"e"+(+E[1]+w));return E=(wt(C)+"e").split("e"),+(E[0]+"e"+(+E[1]-w))}return u(m)}}var XM=Eo&&1/dc(new Eo([,-0]))[1]==ee?function(o){return new Eo(o)}:Of;function Og(o){return function(u){var m=Ln(u);return m==ce?Gh(u):m==we?lb(u):eb(u,o(u))}}function br(o,u,m,w,E,C,B,G){var K=u&v;if(!K&&typeof o!="function")throw new Mi(s);var pe=w?w.length:0;if(pe||(u&=~(A|R),w=E=t),B=B===t?B:hn(it(B),0),G=G===t?G:it(G),pe-=E?E.length:0,u&R){var me=w,be=E;w=E=t}var Ce=K?t:mf(o),Ge=[o,u,m,w,E,me,be,C,B,G];if(Ce&&oS(Ge,Ce),o=Ge[0],u=Ge[1],m=Ge[2],w=Ge[3],E=Ge[4],G=Ge[9]=Ge[9]===t?K?0:o.length:hn(Ge[9]-pe,0),!G&&u&(S|M)&&(u&=~(S|M)),!u||u==b)var Ze=HM(o,u,m);else u==S||u==M?Ze=VM(o,u,G):(u==A||u==(b|A))&&!E.length?Ze=WM(o,u,m,w):Ze=Fc.apply(t,Ge);var st=Ce?pg:Xg;return Yg(st(Ze,Ge),o,u)}function Fg(o,u,m,w){return o===t||Vi(o,To[m])&&!Tt.call(w,m)?u:o}function Ng(o,u,m,w,E,C){return qt(o)&&qt(u)&&(C.set(u,o),Pc(o,u,t,Ng,C),C.delete(u)),o}function YM(o){return al(o)?t:o}function Bg(o,u,m,w,E,C){var B=m&_,G=o.length,K=u.length;if(G!=K&&!(B&&K>G))return!1;var pe=C.get(o),me=C.get(u);if(pe&&me)return pe==u&&me==o;var be=-1,Ce=!0,Ge=m&x?new Us:t;for(C.set(o,u),C.set(u,o);++be<G;){var Ze=o[be],st=u[be];if(w)var Je=B?w(st,Ze,be,u,o,C):w(Ze,st,be,o,u,C);if(Je!==t){if(Je)continue;Ce=!1;break}if(Ge){if(!Fh(u,function(lt,ht){if(!qa(Ge,ht)&&(Ze===lt||E(Ze,lt,m,w,C)))return Ge.push(ht)})){Ce=!1;break}}else if(!(Ze===st||E(Ze,st,m,w,C))){Ce=!1;break}}return C.delete(o),C.delete(u),Ce}function qM(o,u,m,w,E,C,B){switch(m){case Re:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case q:return!(o.byteLength!=u.byteLength||!C(new xc(o),new xc(u)));case k:case ne:case Se:return Vi(+o,+u);case ge:return o.name==u.name&&o.message==u.message;case ye:case Ae:return o==u+"";case ce:var G=Gh;case we:var K=w&_;if(G||(G=dc),o.size!=u.size&&!K)return!1;var pe=B.get(o);if(pe)return pe==u;w|=x,B.set(o,u);var me=Bg(G(o),G(u),w,E,C,B);return B.delete(o),me;case We:if($a)return $a.call(o)==$a.call(u)}return!1}function jM(o,u,m,w,E,C){var B=m&_,G=df(o),K=G.length,pe=df(u),me=pe.length;if(K!=me&&!B)return!1;for(var be=K;be--;){var Ce=G[be];if(!(B?Ce in u:Tt.call(u,Ce)))return!1}var Ge=C.get(o),Ze=C.get(u);if(Ge&&Ze)return Ge==u&&Ze==o;var st=!0;C.set(o,u),C.set(u,o);for(var Je=B;++be<K;){Ce=G[be];var lt=o[Ce],ht=u[Ce];if(w)var ui=B?w(ht,lt,Ce,u,o,C):w(lt,ht,Ce,o,u,C);if(!(ui===t?lt===ht||E(lt,ht,m,w,C):ui)){st=!1;break}Je||(Je=Ce=="constructor")}if(st&&!Je){var Bn=o.constructor,hi=u.constructor;Bn!=hi&&"constructor"in o&&"constructor"in u&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof hi=="function"&&hi instanceof hi)&&(st=!1)}return C.delete(o),C.delete(u),st}function Mr(o){return wf(Vg(o,t,$g),o+"")}function df(o){return ig(o,gn,_f)}function pf(o){return ig(o,Jn,Ug)}var mf=Tc?function(o){return Tc.get(o)}:Of;function zc(o){for(var u=o.name+"",m=Ao[u],w=Tt.call(Ao,u)?m.length:0;w--;){var E=m[w],C=E.func;if(C==null||C==o)return E.name}return u}function Po(o){var u=Tt.call(L,"placeholder")?L:o;return u.placeholder}function je(){var o=L.iteratee||If;return o=o===If?og:o,arguments.length?o(arguments[0],arguments[1]):o}function kc(o,u){var m=o.__data__;return nS(u)?m[typeof u=="string"?"string":"hash"]:m.map}function gf(o){for(var u=gn(o),m=u.length;m--;){var w=u[m],E=o[w];u[m]=[w,E,Gg(E)]}return u}function Gs(o,u){var m=sb(o,u);return sg(m)?m:t}function ZM(o){var u=Tt.call(o,Ns),m=o[Ns];try{o[Ns]=t;var w=!0}catch{}var E=_c.call(o);return w&&(u?o[Ns]=m:delete o[Ns]),E}var _f=Vh?function(o){return o==null?[]:(o=It(o),Yr(Vh(o),function(u){return Wm.call(o,u)}))}:Ff,Ug=Vh?function(o){for(var u=[];o;)qr(u,_f(o)),o=yc(o);return u}:Ff,Ln=Fn;(Wh&&Ln(new Wh(new ArrayBuffer(1)))!=Re||Za&&Ln(new Za)!=ce||Xh&&Ln(Xh.resolve())!=P||Eo&&Ln(new Eo)!=we||Ja&&Ln(new Ja)!=Xe)&&(Ln=function(o){var u=Fn(o),m=u==I?o.constructor:t,w=m?Hs(m):"";if(w)switch(w){case Pb:return Re;case Ib:return ce;case Db:return P;case Ob:return we;case Fb:return Xe}return u});function JM(o,u,m){for(var w=-1,E=m.length;++w<E;){var C=m[w],B=C.size;switch(C.type){case"drop":o+=B;break;case"dropRight":u-=B;break;case"take":u=An(u,o+B);break;case"takeRight":o=hn(o,u-B);break}}return{start:o,end:u}}function KM(o){var u=o.match(ie);return u?u[1].split(ue):[]}function zg(o,u,m){u=$r(u,o);for(var w=-1,E=u.length,C=!1;++w<E;){var B=er(u[w]);if(!(C=o!=null&&m(o,B)))break;o=o[B]}return C||++w!=E?C:(E=o==null?0:o.length,!!E&&qc(E)&&Sr(B,E)&&(nt(o)||Vs(o)))}function $M(o){var u=o.length,m=new o.constructor(u);return u&&typeof o[0]=="string"&&Tt.call(o,"index")&&(m.index=o.index,m.input=o.input),m}function kg(o){return typeof o.constructor=="function"&&!sl(o)?Lo(yc(o)):{}}function QM(o,u,m){var w=o.constructor;switch(u){case q:return uf(o);case k:case ne:return new w(+o);case Re:return NM(o,m);case _e:case Ue:case Oe:case tt:case zt:case Vt:case Et:case xt:case Kt:return bg(o,m);case ce:return new w;case Se:case Ae:return new w(o);case ye:return BM(o);case we:return new w;case We:return UM(o)}}function eS(o,u){var m=u.length;if(!m)return o;var w=m-1;return u[w]=(m>1?"& ":"")+u[w],u=u.join(m>2?", ":" "),o.replace(ae,`{
/* [wrapped with `+u+`] */
`)}function tS(o){return nt(o)||Vs(o)||!!(Xm&&o&&o[Xm])}function Sr(o,u){var m=typeof o;return u=u==null?re:u,!!u&&(m=="number"||m!="symbol"&&ot.test(o))&&o>-1&&o%1==0&&o<u}function Nn(o,u,m){if(!qt(m))return!1;var w=typeof u;return(w=="number"?Zn(m)&&Sr(u,m.length):w=="string"&&u in m)?Vi(m[u],o):!1}function vf(o,u){if(nt(o))return!1;var m=typeof o;return m=="number"||m=="symbol"||m=="boolean"||o==null||ci(o)?!0:yn.test(o)||!pt.test(o)||u!=null&&o in It(u)}function nS(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function xf(o){var u=zc(o),m=L[u];if(typeof m!="function"||!(u in ut.prototype))return!1;if(o===m)return!0;var w=mf(m);return!!w&&o===w[0]}function iS(o){return!!Gm&&Gm in o}var rS=mc?Tr:Nf;function sl(o){var u=o&&o.constructor,m=typeof u=="function"&&u.prototype||To;return o===m}function Gg(o){return o===o&&!qt(o)}function Hg(o,u){return function(m){return m==null?!1:m[o]===u&&(u!==t||o in It(m))}}function sS(o){var u=Xc(o,function(w){return m.size===h&&m.clear(),w}),m=u.cache;return u}function oS(o,u){var m=o[1],w=u[1],E=m|w,C=E<(b|v|T),B=w==T&&m==S||w==T&&m==N&&o[7].length<=u[8]||w==(T|N)&&u[7].length<=u[8]&&m==S;if(!(C||B))return o;w&b&&(o[2]=u[2],E|=m&b?0:y);var G=u[3];if(G){var K=o[3];o[3]=K?Sg(K,G,u[4]):G,o[4]=K?jr(o[3],f):u[4]}return G=u[5],G&&(K=o[5],o[5]=K?Tg(K,G,u[6]):G,o[6]=K?jr(o[5],f):u[6]),G=u[7],G&&(o[7]=G),w&T&&(o[8]=o[8]==null?u[8]:An(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=E,o}function aS(o){var u=[];if(o!=null)for(var m in It(o))u.push(m);return u}function lS(o){return _c.call(o)}function Vg(o,u,m){return u=hn(u===t?o.length-1:u,0),function(){for(var w=arguments,E=-1,C=hn(w.length-u,0),B=se(C);++E<C;)B[E]=w[u+E];E=-1;for(var G=se(u+1);++E<u;)G[E]=w[E];return G[u]=m(B),oi(o,this,G)}}function Wg(o,u){return u.length<2?o:ks(o,Ei(u,0,-1))}function cS(o,u){for(var m=o.length,w=An(u.length,m),E=jn(o);w--;){var C=u[w];o[w]=Sr(C,m)?E[C]:t}return o}function yf(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Xg=qg(pg),ol=Sb||function(o,u){return wn.setTimeout(o,u)},wf=qg(IM);function Yg(o,u,m){var w=u+"";return wf(o,eS(w,uS(KM(w),m)))}function qg(o){var u=0,m=0;return function(){var w=Lb(),E=V-(w-m);if(m=w,E>0){if(++u>=te)return arguments[0]}else u=0;return o.apply(t,arguments)}}function Gc(o,u){var m=-1,w=o.length,E=w-1;for(u=u===t?w:u;++m<u;){var C=nf(m,E),B=o[C];o[C]=o[m],o[m]=B}return o.length=u,o}var jg=sS(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace($e,function(m,w,E,C){u.push(E?C.replace(He,"$1"):w||m)}),u});function er(o){if(typeof o=="string"||ci(o))return o;var u=o+"";return u=="0"&&1/o==-ee?"-0":u}function Hs(o){if(o!=null){try{return gc.call(o)}catch{}try{return o+""}catch{}}return""}function uS(o,u){return bi(Me,function(m){var w="_."+m[0];u&m[1]&&!hc(o,w)&&o.push(w)}),o.sort()}function Zg(o){if(o instanceof ut)return o.clone();var u=new Si(o.__wrapped__,o.__chain__);return u.__actions__=jn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function hS(o,u,m){(m?Nn(o,u,m):u===t)?u=1:u=hn(it(u),0);var w=o==null?0:o.length;if(!w||u<1)return[];for(var E=0,C=0,B=se(Mc(w/u));E<w;)B[C++]=Ei(o,E,E+=u);return B}function fS(o){for(var u=-1,m=o==null?0:o.length,w=0,E=[];++u<m;){var C=o[u];C&&(E[w++]=C)}return E}function dS(){var o=arguments.length;if(!o)return[];for(var u=se(o-1),m=arguments[0],w=o;w--;)u[w-1]=arguments[w];return qr(nt(m)?jn(m):[m],bn(u,1))}var pS=at(function(o,u){return en(o)?el(o,bn(u,1,en,!0)):[]}),mS=at(function(o,u){var m=Ai(u);return en(m)&&(m=t),en(o)?el(o,bn(u,1,en,!0),je(m,2)):[]}),gS=at(function(o,u){var m=Ai(u);return en(m)&&(m=t),en(o)?el(o,bn(u,1,en,!0),t,m):[]});function _S(o,u,m){var w=o==null?0:o.length;return w?(u=m||u===t?1:it(u),Ei(o,u<0?0:u,w)):[]}function vS(o,u,m){var w=o==null?0:o.length;return w?(u=m||u===t?1:it(u),u=w-u,Ei(o,0,u<0?0:u)):[]}function xS(o,u){return o&&o.length?Dc(o,je(u,3),!0,!0):[]}function yS(o,u){return o&&o.length?Dc(o,je(u,3),!0):[]}function wS(o,u,m,w){var E=o==null?0:o.length;return E?(m&&typeof m!="number"&&Nn(o,u,m)&&(m=0,w=E),dM(o,u,m,w)):[]}function Jg(o,u,m){var w=o==null?0:o.length;if(!w)return-1;var E=m==null?0:it(m);return E<0&&(E=hn(w+E,0)),fc(o,je(u,3),E)}function Kg(o,u,m){var w=o==null?0:o.length;if(!w)return-1;var E=w-1;return m!==t&&(E=it(m),E=m<0?hn(w+E,0):An(E,w-1)),fc(o,je(u,3),E,!0)}function $g(o){var u=o==null?0:o.length;return u?bn(o,1):[]}function bS(o){var u=o==null?0:o.length;return u?bn(o,ee):[]}function MS(o,u){var m=o==null?0:o.length;return m?(u=u===t?1:it(u),bn(o,u)):[]}function SS(o){for(var u=-1,m=o==null?0:o.length,w={};++u<m;){var E=o[u];w[E[0]]=E[1]}return w}function Qg(o){return o&&o.length?o[0]:t}function TS(o,u,m){var w=o==null?0:o.length;if(!w)return-1;var E=m==null?0:it(m);return E<0&&(E=hn(w+E,0)),wo(o,u,E)}function ES(o){var u=o==null?0:o.length;return u?Ei(o,0,-1):[]}var AS=at(function(o){var u=Xt(o,lf);return u.length&&u[0]===o[0]?Kh(u):[]}),LS=at(function(o){var u=Ai(o),m=Xt(o,lf);return u===Ai(m)?u=t:m.pop(),m.length&&m[0]===o[0]?Kh(m,je(u,2)):[]}),RS=at(function(o){var u=Ai(o),m=Xt(o,lf);return u=typeof u=="function"?u:t,u&&m.pop(),m.length&&m[0]===o[0]?Kh(m,t,u):[]});function CS(o,u){return o==null?"":Eb.call(o,u)}function Ai(o){var u=o==null?0:o.length;return u?o[u-1]:t}function PS(o,u,m){var w=o==null?0:o.length;if(!w)return-1;var E=w;return m!==t&&(E=it(m),E=E<0?hn(w+E,0):An(E,w-1)),u===u?ub(o,u,E):fc(o,Dm,E,!0)}function IS(o,u){return o&&o.length?ug(o,it(u)):t}var DS=at(e_);function e_(o,u){return o&&o.length&&u&&u.length?tf(o,u):o}function OS(o,u,m){return o&&o.length&&u&&u.length?tf(o,u,je(m,2)):o}function FS(o,u,m){return o&&o.length&&u&&u.length?tf(o,u,t,m):o}var NS=Mr(function(o,u){var m=o==null?0:o.length,w=qh(o,u);return dg(o,Xt(u,function(E){return Sr(E,m)?+E:E}).sort(Mg)),w});function BS(o,u){var m=[];if(!(o&&o.length))return m;var w=-1,E=[],C=o.length;for(u=je(u,3);++w<C;){var B=o[w];u(B,w,o)&&(m.push(B),E.push(w))}return dg(o,E),m}function bf(o){return o==null?o:Cb.call(o)}function US(o,u,m){var w=o==null?0:o.length;return w?(m&&typeof m!="number"&&Nn(o,u,m)?(u=0,m=w):(u=u==null?0:it(u),m=m===t?w:it(m)),Ei(o,u,m)):[]}function zS(o,u){return Ic(o,u)}function kS(o,u,m){return sf(o,u,je(m,2))}function GS(o,u){var m=o==null?0:o.length;if(m){var w=Ic(o,u);if(w<m&&Vi(o[w],u))return w}return-1}function HS(o,u){return Ic(o,u,!0)}function VS(o,u,m){return sf(o,u,je(m,2),!0)}function WS(o,u){var m=o==null?0:o.length;if(m){var w=Ic(o,u,!0)-1;if(Vi(o[w],u))return w}return-1}function XS(o){return o&&o.length?mg(o):[]}function YS(o,u){return o&&o.length?mg(o,je(u,2)):[]}function qS(o){var u=o==null?0:o.length;return u?Ei(o,1,u):[]}function jS(o,u,m){return o&&o.length?(u=m||u===t?1:it(u),Ei(o,0,u<0?0:u)):[]}function ZS(o,u,m){var w=o==null?0:o.length;return w?(u=m||u===t?1:it(u),u=w-u,Ei(o,u<0?0:u,w)):[]}function JS(o,u){return o&&o.length?Dc(o,je(u,3),!1,!0):[]}function KS(o,u){return o&&o.length?Dc(o,je(u,3)):[]}var $S=at(function(o){return Kr(bn(o,1,en,!0))}),QS=at(function(o){var u=Ai(o);return en(u)&&(u=t),Kr(bn(o,1,en,!0),je(u,2))}),e1=at(function(o){var u=Ai(o);return u=typeof u=="function"?u:t,Kr(bn(o,1,en,!0),t,u)});function t1(o){return o&&o.length?Kr(o):[]}function n1(o,u){return o&&o.length?Kr(o,je(u,2)):[]}function i1(o,u){return u=typeof u=="function"?u:t,o&&o.length?Kr(o,t,u):[]}function Mf(o){if(!(o&&o.length))return[];var u=0;return o=Yr(o,function(m){if(en(m))return u=hn(m.length,u),!0}),zh(u,function(m){return Xt(o,Nh(m))})}function t_(o,u){if(!(o&&o.length))return[];var m=Mf(o);return u==null?m:Xt(m,function(w){return oi(u,t,w)})}var r1=at(function(o,u){return en(o)?el(o,u):[]}),s1=at(function(o){return af(Yr(o,en))}),o1=at(function(o){var u=Ai(o);return en(u)&&(u=t),af(Yr(o,en),je(u,2))}),a1=at(function(o){var u=Ai(o);return u=typeof u=="function"?u:t,af(Yr(o,en),t,u)}),l1=at(Mf);function c1(o,u){return xg(o||[],u||[],Qa)}function u1(o,u){return xg(o||[],u||[],il)}var h1=at(function(o){var u=o.length,m=u>1?o[u-1]:t;return m=typeof m=="function"?(o.pop(),m):t,t_(o,m)});function n_(o){var u=L(o);return u.__chain__=!0,u}function f1(o,u){return u(o),o}function Hc(o,u){return u(o)}var d1=Mr(function(o){var u=o.length,m=u?o[0]:0,w=this.__wrapped__,E=function(C){return qh(C,o)};return u>1||this.__actions__.length||!(w instanceof ut)||!Sr(m)?this.thru(E):(w=w.slice(m,+m+(u?1:0)),w.__actions__.push({func:Hc,args:[E],thisArg:t}),new Si(w,this.__chain__).thru(function(C){return u&&!C.length&&C.push(t),C}))});function p1(){return n_(this)}function m1(){return new Si(this.value(),this.__chain__)}function g1(){this.__values__===t&&(this.__values__=g_(this.value()));var o=this.__index__>=this.__values__.length,u=o?t:this.__values__[this.__index__++];return{done:o,value:u}}function _1(){return this}function v1(o){for(var u,m=this;m instanceof Ac;){var w=Zg(m);w.__index__=0,w.__values__=t,u?E.__wrapped__=w:u=w;var E=w;m=m.__wrapped__}return E.__wrapped__=o,u}function x1(){var o=this.__wrapped__;if(o instanceof ut){var u=o;return this.__actions__.length&&(u=new ut(this)),u=u.reverse(),u.__actions__.push({func:Hc,args:[bf],thisArg:t}),new Si(u,this.__chain__)}return this.thru(bf)}function y1(){return vg(this.__wrapped__,this.__actions__)}var w1=Oc(function(o,u,m){Tt.call(o,m)?++o[m]:wr(o,m,1)});function b1(o,u,m){var w=nt(o)?Pm:fM;return m&&Nn(o,u,m)&&(u=t),w(o,je(u,3))}function M1(o,u){var m=nt(o)?Yr:tg;return m(o,je(u,3))}var S1=Rg(Jg),T1=Rg(Kg);function E1(o,u){return bn(Vc(o,u),1)}function A1(o,u){return bn(Vc(o,u),ee)}function L1(o,u,m){return m=m===t?1:it(m),bn(Vc(o,u),m)}function i_(o,u){var m=nt(o)?bi:Jr;return m(o,je(u,3))}function r_(o,u){var m=nt(o)?qw:eg;return m(o,je(u,3))}var R1=Oc(function(o,u,m){Tt.call(o,m)?o[m].push(u):wr(o,m,[u])});function C1(o,u,m,w){o=Zn(o)?o:Do(o),m=m&&!w?it(m):0;var E=o.length;return m<0&&(m=hn(E+m,0)),jc(o)?m<=E&&o.indexOf(u,m)>-1:!!E&&wo(o,u,m)>-1}var P1=at(function(o,u,m){var w=-1,E=typeof u=="function",C=Zn(o)?se(o.length):[];return Jr(o,function(B){C[++w]=E?oi(u,B,m):tl(B,u,m)}),C}),I1=Oc(function(o,u,m){wr(o,m,u)});function Vc(o,u){var m=nt(o)?Xt:ag;return m(o,je(u,3))}function D1(o,u,m,w){return o==null?[]:(nt(u)||(u=u==null?[]:[u]),m=w?t:m,nt(m)||(m=m==null?[]:[m]),hg(o,u,m))}var O1=Oc(function(o,u,m){o[m?0:1].push(u)},function(){return[[],[]]});function F1(o,u,m){var w=nt(o)?Oh:Fm,E=arguments.length<3;return w(o,je(u,4),m,E,Jr)}function N1(o,u,m){var w=nt(o)?jw:Fm,E=arguments.length<3;return w(o,je(u,4),m,E,eg)}function B1(o,u){var m=nt(o)?Yr:tg;return m(o,Yc(je(u,3)))}function U1(o){var u=nt(o)?Jm:CM;return u(o)}function z1(o,u,m){(m?Nn(o,u,m):u===t)?u=1:u=it(u);var w=nt(o)?aM:PM;return w(o,u)}function k1(o){var u=nt(o)?lM:DM;return u(o)}function G1(o){if(o==null)return 0;if(Zn(o))return jc(o)?Mo(o):o.length;var u=Ln(o);return u==ce||u==we?o.size:Qh(o).length}function H1(o,u,m){var w=nt(o)?Fh:OM;return m&&Nn(o,u,m)&&(u=t),w(o,je(u,3))}var V1=at(function(o,u){if(o==null)return[];var m=u.length;return m>1&&Nn(o,u[0],u[1])?u=[]:m>2&&Nn(u[0],u[1],u[2])&&(u=[u[0]]),hg(o,bn(u,1),[])}),Wc=Mb||function(){return wn.Date.now()};function W1(o,u){if(typeof u!="function")throw new Mi(s);return o=it(o),function(){if(--o<1)return u.apply(this,arguments)}}function s_(o,u,m){return u=m?t:u,u=o&&u==null?o.length:u,br(o,T,t,t,t,t,u)}function o_(o,u){var m;if(typeof u!="function")throw new Mi(s);return o=it(o),function(){return--o>0&&(m=u.apply(this,arguments)),o<=1&&(u=t),m}}var Sf=at(function(o,u,m){var w=b;if(m.length){var E=jr(m,Po(Sf));w|=A}return br(o,w,u,m,E)}),a_=at(function(o,u,m){var w=b|v;if(m.length){var E=jr(m,Po(a_));w|=A}return br(u,w,o,m,E)});function l_(o,u,m){u=m?t:u;var w=br(o,S,t,t,t,t,t,u);return w.placeholder=l_.placeholder,w}function c_(o,u,m){u=m?t:u;var w=br(o,M,t,t,t,t,t,u);return w.placeholder=c_.placeholder,w}function u_(o,u,m){var w,E,C,B,G,K,pe=0,me=!1,be=!1,Ce=!0;if(typeof o!="function")throw new Mi(s);u=Li(u)||0,qt(m)&&(me=!!m.leading,be="maxWait"in m,C=be?hn(Li(m.maxWait)||0,u):C,Ce="trailing"in m?!!m.trailing:Ce);function Ge(tn){var Wi=w,Ar=E;return w=E=t,pe=tn,B=o.apply(Ar,Wi),B}function Ze(tn){return pe=tn,G=ol(lt,u),me?Ge(tn):B}function st(tn){var Wi=tn-K,Ar=tn-pe,R_=u-Wi;return be?An(R_,C-Ar):R_}function Je(tn){var Wi=tn-K,Ar=tn-pe;return K===t||Wi>=u||Wi<0||be&&Ar>=C}function lt(){var tn=Wc();if(Je(tn))return ht(tn);G=ol(lt,st(tn))}function ht(tn){return G=t,Ce&&w?Ge(tn):(w=E=t,B)}function ui(){G!==t&&yg(G),pe=0,w=K=E=G=t}function Bn(){return G===t?B:ht(Wc())}function hi(){var tn=Wc(),Wi=Je(tn);if(w=arguments,E=this,K=tn,Wi){if(G===t)return Ze(K);if(be)return yg(G),G=ol(lt,u),Ge(K)}return G===t&&(G=ol(lt,u)),B}return hi.cancel=ui,hi.flush=Bn,hi}var X1=at(function(o,u){return Qm(o,1,u)}),Y1=at(function(o,u,m){return Qm(o,Li(u)||0,m)});function q1(o){return br(o,X)}function Xc(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Mi(s);var m=function(){var w=arguments,E=u?u.apply(this,w):w[0],C=m.cache;if(C.has(E))return C.get(E);var B=o.apply(this,w);return m.cache=C.set(E,B)||C,B};return m.cache=new(Xc.Cache||yr),m}Xc.Cache=yr;function Yc(o){if(typeof o!="function")throw new Mi(s);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function j1(o){return o_(2,o)}var Z1=FM(function(o,u){u=u.length==1&&nt(u[0])?Xt(u[0],ai(je())):Xt(bn(u,1),ai(je()));var m=u.length;return at(function(w){for(var E=-1,C=An(w.length,m);++E<C;)w[E]=u[E].call(this,w[E]);return oi(o,this,w)})}),Tf=at(function(o,u){var m=jr(u,Po(Tf));return br(o,A,t,u,m)}),h_=at(function(o,u){var m=jr(u,Po(h_));return br(o,R,t,u,m)}),J1=Mr(function(o,u){return br(o,N,t,t,t,u)});function K1(o,u){if(typeof o!="function")throw new Mi(s);return u=u===t?u:it(u),at(o,u)}function $1(o,u){if(typeof o!="function")throw new Mi(s);return u=u==null?0:hn(it(u),0),at(function(m){var w=m[u],E=Qr(m,0,u);return w&&qr(E,w),oi(o,this,E)})}function Q1(o,u,m){var w=!0,E=!0;if(typeof o!="function")throw new Mi(s);return qt(m)&&(w="leading"in m?!!m.leading:w,E="trailing"in m?!!m.trailing:E),u_(o,u,{leading:w,maxWait:u,trailing:E})}function eT(o){return s_(o,1)}function tT(o,u){return Tf(cf(u),o)}function nT(){if(!arguments.length)return[];var o=arguments[0];return nt(o)?o:[o]}function iT(o){return Ti(o,p)}function rT(o,u){return u=typeof u=="function"?u:t,Ti(o,p,u)}function sT(o){return Ti(o,d|p)}function oT(o,u){return u=typeof u=="function"?u:t,Ti(o,d|p,u)}function aT(o,u){return u==null||$m(o,u,gn(u))}function Vi(o,u){return o===u||o!==o&&u!==u}var lT=Uc(Jh),cT=Uc(function(o,u){return o>=u}),Vs=rg(function(){return arguments}())?rg:function(o){return $t(o)&&Tt.call(o,"callee")&&!Wm.call(o,"callee")},nt=se.isArray,uT=Tm?ai(Tm):vM;function Zn(o){return o!=null&&qc(o.length)&&!Tr(o)}function en(o){return $t(o)&&Zn(o)}function hT(o){return o===!0||o===!1||$t(o)&&Fn(o)==k}var es=Tb||Nf,fT=Em?ai(Em):xM;function dT(o){return $t(o)&&o.nodeType===1&&!al(o)}function pT(o){if(o==null)return!0;if(Zn(o)&&(nt(o)||typeof o=="string"||typeof o.splice=="function"||es(o)||Io(o)||Vs(o)))return!o.length;var u=Ln(o);if(u==ce||u==we)return!o.size;if(sl(o))return!Qh(o).length;for(var m in o)if(Tt.call(o,m))return!1;return!0}function mT(o,u){return nl(o,u)}function gT(o,u,m){m=typeof m=="function"?m:t;var w=m?m(o,u):t;return w===t?nl(o,u,t,m):!!w}function Ef(o){if(!$t(o))return!1;var u=Fn(o);return u==ge||u==de||typeof o.message=="string"&&typeof o.name=="string"&&!al(o)}function _T(o){return typeof o=="number"&&Ym(o)}function Tr(o){if(!qt(o))return!1;var u=Fn(o);return u==Z||u==oe||u==F||u==le}function f_(o){return typeof o=="number"&&o==it(o)}function qc(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=re}function qt(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function $t(o){return o!=null&&typeof o=="object"}var d_=Am?ai(Am):wM;function vT(o,u){return o===u||$h(o,u,gf(u))}function xT(o,u,m){return m=typeof m=="function"?m:t,$h(o,u,gf(u),m)}function yT(o){return p_(o)&&o!=+o}function wT(o){if(rS(o))throw new et(r);return sg(o)}function bT(o){return o===null}function MT(o){return o==null}function p_(o){return typeof o=="number"||$t(o)&&Fn(o)==Se}function al(o){if(!$t(o)||Fn(o)!=I)return!1;var u=yc(o);if(u===null)return!0;var m=Tt.call(u,"constructor")&&u.constructor;return typeof m=="function"&&m instanceof m&&gc.call(m)==xb}var Af=Lm?ai(Lm):bM;function ST(o){return f_(o)&&o>=-re&&o<=re}var m_=Rm?ai(Rm):MM;function jc(o){return typeof o=="string"||!nt(o)&&$t(o)&&Fn(o)==Ae}function ci(o){return typeof o=="symbol"||$t(o)&&Fn(o)==We}var Io=Cm?ai(Cm):SM;function TT(o){return o===t}function ET(o){return $t(o)&&Ln(o)==Xe}function AT(o){return $t(o)&&Fn(o)==Be}var LT=Uc(ef),RT=Uc(function(o,u){return o<=u});function g_(o){if(!o)return[];if(Zn(o))return jc(o)?Gi(o):jn(o);if(ja&&o[ja])return ab(o[ja]());var u=Ln(o),m=u==ce?Gh:u==we?dc:Do;return m(o)}function Er(o){if(!o)return o===0?o:0;if(o=Li(o),o===ee||o===-ee){var u=o<0?-1:1;return u*Le}return o===o?o:0}function it(o){var u=Er(o),m=u%1;return u===u?m?u-m:u:0}function __(o){return o?zs(it(o),0,ve):0}function Li(o){if(typeof o=="number")return o;if(ci(o))return J;if(qt(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=qt(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Nm(o);var m=Qe.test(o);return m||xi.test(o)?Ww(o.slice(2),m?2:8):Ye.test(o)?J:+o}function v_(o){return Qi(o,Jn(o))}function CT(o){return o?zs(it(o),-re,re):o===0?o:0}function wt(o){return o==null?"":li(o)}var PT=Ro(function(o,u){if(sl(u)||Zn(u)){Qi(u,gn(u),o);return}for(var m in u)Tt.call(u,m)&&Qa(o,m,u[m])}),x_=Ro(function(o,u){Qi(u,Jn(u),o)}),Zc=Ro(function(o,u,m,w){Qi(u,Jn(u),o,w)}),IT=Ro(function(o,u,m,w){Qi(u,gn(u),o,w)}),DT=Mr(qh);function OT(o,u){var m=Lo(o);return u==null?m:Km(m,u)}var FT=at(function(o,u){o=It(o);var m=-1,w=u.length,E=w>2?u[2]:t;for(E&&Nn(u[0],u[1],E)&&(w=1);++m<w;)for(var C=u[m],B=Jn(C),G=-1,K=B.length;++G<K;){var pe=B[G],me=o[pe];(me===t||Vi(me,To[pe])&&!Tt.call(o,pe))&&(o[pe]=C[pe])}return o}),NT=at(function(o){return o.push(t,Ng),oi(y_,t,o)});function BT(o,u){return Im(o,je(u,3),$i)}function UT(o,u){return Im(o,je(u,3),Zh)}function zT(o,u){return o==null?o:jh(o,je(u,3),Jn)}function kT(o,u){return o==null?o:ng(o,je(u,3),Jn)}function GT(o,u){return o&&$i(o,je(u,3))}function HT(o,u){return o&&Zh(o,je(u,3))}function VT(o){return o==null?[]:Cc(o,gn(o))}function WT(o){return o==null?[]:Cc(o,Jn(o))}function Lf(o,u,m){var w=o==null?t:ks(o,u);return w===t?m:w}function XT(o,u){return o!=null&&zg(o,u,pM)}function Rf(o,u){return o!=null&&zg(o,u,mM)}var YT=Pg(function(o,u,m){u!=null&&typeof u.toString!="function"&&(u=_c.call(u)),o[u]=m},Pf(Kn)),qT=Pg(function(o,u,m){u!=null&&typeof u.toString!="function"&&(u=_c.call(u)),Tt.call(o,u)?o[u].push(m):o[u]=[m]},je),jT=at(tl);function gn(o){return Zn(o)?Zm(o):Qh(o)}function Jn(o){return Zn(o)?Zm(o,!0):TM(o)}function ZT(o,u){var m={};return u=je(u,3),$i(o,function(w,E,C){wr(m,u(w,E,C),w)}),m}function JT(o,u){var m={};return u=je(u,3),$i(o,function(w,E,C){wr(m,E,u(w,E,C))}),m}var KT=Ro(function(o,u,m){Pc(o,u,m)}),y_=Ro(function(o,u,m,w){Pc(o,u,m,w)}),$T=Mr(function(o,u){var m={};if(o==null)return m;var w=!1;u=Xt(u,function(C){return C=$r(C,o),w||(w=C.length>1),C}),Qi(o,pf(o),m),w&&(m=Ti(m,d|g|p,YM));for(var E=u.length;E--;)of(m,u[E]);return m});function QT(o,u){return w_(o,Yc(je(u)))}var eE=Mr(function(o,u){return o==null?{}:AM(o,u)});function w_(o,u){if(o==null)return{};var m=Xt(pf(o),function(w){return[w]});return u=je(u),fg(o,m,function(w,E){return u(w,E[0])})}function tE(o,u,m){u=$r(u,o);var w=-1,E=u.length;for(E||(E=1,o=t);++w<E;){var C=o==null?t:o[er(u[w])];C===t&&(w=E,C=m),o=Tr(C)?C.call(o):C}return o}function nE(o,u,m){return o==null?o:il(o,u,m)}function iE(o,u,m,w){return w=typeof w=="function"?w:t,o==null?o:il(o,u,m,w)}var b_=Og(gn),M_=Og(Jn);function rE(o,u,m){var w=nt(o),E=w||es(o)||Io(o);if(u=je(u,4),m==null){var C=o&&o.constructor;E?m=w?new C:[]:qt(o)?m=Tr(C)?Lo(yc(o)):{}:m={}}return(E?bi:$i)(o,function(B,G,K){return u(m,B,G,K)}),m}function sE(o,u){return o==null?!0:of(o,u)}function oE(o,u,m){return o==null?o:_g(o,u,cf(m))}function aE(o,u,m,w){return w=typeof w=="function"?w:t,o==null?o:_g(o,u,cf(m),w)}function Do(o){return o==null?[]:kh(o,gn(o))}function lE(o){return o==null?[]:kh(o,Jn(o))}function cE(o,u,m){return m===t&&(m=u,u=t),m!==t&&(m=Li(m),m=m===m?m:0),u!==t&&(u=Li(u),u=u===u?u:0),zs(Li(o),u,m)}function uE(o,u,m){return u=Er(u),m===t?(m=u,u=0):m=Er(m),o=Li(o),gM(o,u,m)}function hE(o,u,m){if(m&&typeof m!="boolean"&&Nn(o,u,m)&&(u=m=t),m===t&&(typeof u=="boolean"?(m=u,u=t):typeof o=="boolean"&&(m=o,o=t)),o===t&&u===t?(o=0,u=1):(o=Er(o),u===t?(u=o,o=0):u=Er(u)),o>u){var w=o;o=u,u=w}if(m||o%1||u%1){var E=qm();return An(o+E*(u-o+Vw("1e-"+((E+"").length-1))),u)}return nf(o,u)}var fE=Co(function(o,u,m){return u=u.toLowerCase(),o+(m?S_(u):u)});function S_(o){return Cf(wt(o).toLowerCase())}function T_(o){return o=wt(o),o&&o.replace(gr,nb).replace(Dw,"")}function dE(o,u,m){o=wt(o),u=li(u);var w=o.length;m=m===t?w:zs(it(m),0,w);var E=m;return m-=u.length,m>=0&&o.slice(m,E)==u}function pE(o){return o=wt(o),o&&xo.test(o)?o.replace(Yn,ib):o}function mE(o){return o=wt(o),o&&Pt.test(o)?o.replace(Ct,"\\$&"):o}var gE=Co(function(o,u,m){return o+(m?"-":"")+u.toLowerCase()}),_E=Co(function(o,u,m){return o+(m?" ":"")+u.toLowerCase()}),vE=Lg("toLowerCase");function xE(o,u,m){o=wt(o),u=it(u);var w=u?Mo(o):0;if(!u||w>=u)return o;var E=(u-w)/2;return Bc(Sc(E),m)+o+Bc(Mc(E),m)}function yE(o,u,m){o=wt(o),u=it(u);var w=u?Mo(o):0;return u&&w<u?o+Bc(u-w,m):o}function wE(o,u,m){o=wt(o),u=it(u);var w=u?Mo(o):0;return u&&w<u?Bc(u-w,m)+o:o}function bE(o,u,m){return m||u==null?u=0:u&&(u=+u),Rb(wt(o).replace(D,""),u||0)}function ME(o,u,m){return(m?Nn(o,u,m):u===t)?u=1:u=it(u),rf(wt(o),u)}function SE(){var o=arguments,u=wt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var TE=Co(function(o,u,m){return o+(m?"_":"")+u.toLowerCase()});function EE(o,u,m){return m&&typeof m!="number"&&Nn(o,u,m)&&(u=m=t),m=m===t?ve:m>>>0,m?(o=wt(o),o&&(typeof u=="string"||u!=null&&!Af(u))&&(u=li(u),!u&&bo(o))?Qr(Gi(o),0,m):o.split(u,m)):[]}var AE=Co(function(o,u,m){return o+(m?" ":"")+Cf(u)});function LE(o,u,m){return o=wt(o),m=m==null?0:zs(it(m),0,o.length),u=li(u),o.slice(m,m+u.length)==u}function RE(o,u,m){var w=L.templateSettings;m&&Nn(o,u,m)&&(u=t),o=wt(o),u=Zc({},u,w,Fg);var E=Zc({},u.imports,w.imports,Fg),C=gn(E),B=kh(E,C),G,K,pe=0,me=u.interpolate||yt,be="__p += '",Ce=Hh((u.escape||yt).source+"|"+me.source+"|"+(me===_t?Ke:yt).source+"|"+(u.evaluate||yt).source+"|$","g"),Ge="//# sourceURL="+(Tt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uw+"]")+`
`;o.replace(Ce,function(Je,lt,ht,ui,Bn,hi){return ht||(ht=ui),be+=o.slice(pe,hi).replace(_r,rb),lt&&(G=!0,be+=`' +
__e(`+lt+`) +
'`),Bn&&(K=!0,be+=`';
`+Bn+`;
__p += '`),ht&&(be+=`' +
((__t = (`+ht+`)) == null ? '' : __t) +
'`),pe=hi+Je.length,Je}),be+=`';
`;var Ze=Tt.call(u,"variable")&&u.variable;if(!Ze)be=`with (obj) {
`+be+`
}
`;else if(Ie.test(Ze))throw new et(l);be=(K?be.replace(on,""):be).replace(pr,"$1").replace(Ji,"$1;"),be="function("+(Ze||"obj")+`) {
`+(Ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var st=A_(function(){return vt(C,Ge+"return "+be).apply(t,B)});if(st.source=be,Ef(st))throw st;return st}function CE(o){return wt(o).toLowerCase()}function PE(o){return wt(o).toUpperCase()}function IE(o,u,m){if(o=wt(o),o&&(m||u===t))return Nm(o);if(!o||!(u=li(u)))return o;var w=Gi(o),E=Gi(u),C=Bm(w,E),B=Um(w,E)+1;return Qr(w,C,B).join("")}function DE(o,u,m){if(o=wt(o),o&&(m||u===t))return o.slice(0,km(o)+1);if(!o||!(u=li(u)))return o;var w=Gi(o),E=Um(w,Gi(u))+1;return Qr(w,0,E).join("")}function OE(o,u,m){if(o=wt(o),o&&(m||u===t))return o.replace(D,"");if(!o||!(u=li(u)))return o;var w=Gi(o),E=Bm(w,Gi(u));return Qr(w,E).join("")}function FE(o,u){var m=H,w=O;if(qt(u)){var E="separator"in u?u.separator:E;m="length"in u?it(u.length):m,w="omission"in u?li(u.omission):w}o=wt(o);var C=o.length;if(bo(o)){var B=Gi(o);C=B.length}if(m>=C)return o;var G=m-Mo(w);if(G<1)return w;var K=B?Qr(B,0,G).join(""):o.slice(0,G);if(E===t)return K+w;if(B&&(G+=K.length-G),Af(E)){if(o.slice(G).search(E)){var pe,me=K;for(E.global||(E=Hh(E.source,wt(qe.exec(E))+"g")),E.lastIndex=0;pe=E.exec(me);)var be=pe.index;K=K.slice(0,be===t?G:be)}}else if(o.indexOf(li(E),G)!=G){var Ce=K.lastIndexOf(E);Ce>-1&&(K=K.slice(0,Ce))}return K+w}function NE(o){return o=wt(o),o&&Os.test(o)?o.replace(mr,hb):o}var BE=Co(function(o,u,m){return o+(m?" ":"")+u.toUpperCase()}),Cf=Lg("toUpperCase");function E_(o,u,m){return o=wt(o),u=m?t:u,u===t?ob(o)?pb(o):Kw(o):o.match(u)||[]}var A_=at(function(o,u){try{return oi(o,t,u)}catch(m){return Ef(m)?m:new et(m)}}),UE=Mr(function(o,u){return bi(u,function(m){m=er(m),wr(o,m,Sf(o[m],o))}),o});function zE(o){var u=o==null?0:o.length,m=je();return o=u?Xt(o,function(w){if(typeof w[1]!="function")throw new Mi(s);return[m(w[0]),w[1]]}):[],at(function(w){for(var E=-1;++E<u;){var C=o[E];if(oi(C[0],this,w))return oi(C[1],this,w)}})}function kE(o){return hM(Ti(o,d))}function Pf(o){return function(){return o}}function GE(o,u){return o==null||o!==o?u:o}var HE=Cg(),VE=Cg(!0);function Kn(o){return o}function If(o){return og(typeof o=="function"?o:Ti(o,d))}function WE(o){return lg(Ti(o,d))}function XE(o,u){return cg(o,Ti(u,d))}var YE=at(function(o,u){return function(m){return tl(m,o,u)}}),qE=at(function(o,u){return function(m){return tl(o,m,u)}});function Df(o,u,m){var w=gn(u),E=Cc(u,w);m==null&&!(qt(u)&&(E.length||!w.length))&&(m=u,u=o,o=this,E=Cc(u,gn(u)));var C=!(qt(m)&&"chain"in m)||!!m.chain,B=Tr(o);return bi(E,function(G){var K=u[G];o[G]=K,B&&(o.prototype[G]=function(){var pe=this.__chain__;if(C||pe){var me=o(this.__wrapped__),be=me.__actions__=jn(this.__actions__);return be.push({func:K,args:arguments,thisArg:o}),me.__chain__=pe,me}return K.apply(o,qr([this.value()],arguments))})}),o}function jE(){return wn._===this&&(wn._=yb),this}function Of(){}function ZE(o){return o=it(o),at(function(u){return ug(u,o)})}var JE=hf(Xt),KE=hf(Pm),$E=hf(Fh);function L_(o){return vf(o)?Nh(er(o)):LM(o)}function QE(o){return function(u){return o==null?t:ks(o,u)}}var eA=Ig(),tA=Ig(!0);function Ff(){return[]}function Nf(){return!1}function nA(){return{}}function iA(){return""}function rA(){return!0}function sA(o,u){if(o=it(o),o<1||o>re)return[];var m=ve,w=An(o,ve);u=je(u),o-=ve;for(var E=zh(w,u);++m<o;)u(m);return E}function oA(o){return nt(o)?Xt(o,er):ci(o)?[o]:jn(jg(wt(o)))}function aA(o){var u=++vb;return wt(o)+u}var lA=Nc(function(o,u){return o+u},0),cA=ff("ceil"),uA=Nc(function(o,u){return o/u},1),hA=ff("floor");function fA(o){return o&&o.length?Rc(o,Kn,Jh):t}function dA(o,u){return o&&o.length?Rc(o,je(u,2),Jh):t}function pA(o){return Om(o,Kn)}function mA(o,u){return Om(o,je(u,2))}function gA(o){return o&&o.length?Rc(o,Kn,ef):t}function _A(o,u){return o&&o.length?Rc(o,je(u,2),ef):t}var vA=Nc(function(o,u){return o*u},1),xA=ff("round"),yA=Nc(function(o,u){return o-u},0);function wA(o){return o&&o.length?Uh(o,Kn):0}function bA(o,u){return o&&o.length?Uh(o,je(u,2)):0}return L.after=W1,L.ary=s_,L.assign=PT,L.assignIn=x_,L.assignInWith=Zc,L.assignWith=IT,L.at=DT,L.before=o_,L.bind=Sf,L.bindAll=UE,L.bindKey=a_,L.castArray=nT,L.chain=n_,L.chunk=hS,L.compact=fS,L.concat=dS,L.cond=zE,L.conforms=kE,L.constant=Pf,L.countBy=w1,L.create=OT,L.curry=l_,L.curryRight=c_,L.debounce=u_,L.defaults=FT,L.defaultsDeep=NT,L.defer=X1,L.delay=Y1,L.difference=pS,L.differenceBy=mS,L.differenceWith=gS,L.drop=_S,L.dropRight=vS,L.dropRightWhile=xS,L.dropWhile=yS,L.fill=wS,L.filter=M1,L.flatMap=E1,L.flatMapDeep=A1,L.flatMapDepth=L1,L.flatten=$g,L.flattenDeep=bS,L.flattenDepth=MS,L.flip=q1,L.flow=HE,L.flowRight=VE,L.fromPairs=SS,L.functions=VT,L.functionsIn=WT,L.groupBy=R1,L.initial=ES,L.intersection=AS,L.intersectionBy=LS,L.intersectionWith=RS,L.invert=YT,L.invertBy=qT,L.invokeMap=P1,L.iteratee=If,L.keyBy=I1,L.keys=gn,L.keysIn=Jn,L.map=Vc,L.mapKeys=ZT,L.mapValues=JT,L.matches=WE,L.matchesProperty=XE,L.memoize=Xc,L.merge=KT,L.mergeWith=y_,L.method=YE,L.methodOf=qE,L.mixin=Df,L.negate=Yc,L.nthArg=ZE,L.omit=$T,L.omitBy=QT,L.once=j1,L.orderBy=D1,L.over=JE,L.overArgs=Z1,L.overEvery=KE,L.overSome=$E,L.partial=Tf,L.partialRight=h_,L.partition=O1,L.pick=eE,L.pickBy=w_,L.property=L_,L.propertyOf=QE,L.pull=DS,L.pullAll=e_,L.pullAllBy=OS,L.pullAllWith=FS,L.pullAt=NS,L.range=eA,L.rangeRight=tA,L.rearg=J1,L.reject=B1,L.remove=BS,L.rest=K1,L.reverse=bf,L.sampleSize=z1,L.set=nE,L.setWith=iE,L.shuffle=k1,L.slice=US,L.sortBy=V1,L.sortedUniq=XS,L.sortedUniqBy=YS,L.split=EE,L.spread=$1,L.tail=qS,L.take=jS,L.takeRight=ZS,L.takeRightWhile=JS,L.takeWhile=KS,L.tap=f1,L.throttle=Q1,L.thru=Hc,L.toArray=g_,L.toPairs=b_,L.toPairsIn=M_,L.toPath=oA,L.toPlainObject=v_,L.transform=rE,L.unary=eT,L.union=$S,L.unionBy=QS,L.unionWith=e1,L.uniq=t1,L.uniqBy=n1,L.uniqWith=i1,L.unset=sE,L.unzip=Mf,L.unzipWith=t_,L.update=oE,L.updateWith=aE,L.values=Do,L.valuesIn=lE,L.without=r1,L.words=E_,L.wrap=tT,L.xor=s1,L.xorBy=o1,L.xorWith=a1,L.zip=l1,L.zipObject=c1,L.zipObjectDeep=u1,L.zipWith=h1,L.entries=b_,L.entriesIn=M_,L.extend=x_,L.extendWith=Zc,Df(L,L),L.add=lA,L.attempt=A_,L.camelCase=fE,L.capitalize=S_,L.ceil=cA,L.clamp=cE,L.clone=iT,L.cloneDeep=sT,L.cloneDeepWith=oT,L.cloneWith=rT,L.conformsTo=aT,L.deburr=T_,L.defaultTo=GE,L.divide=uA,L.endsWith=dE,L.eq=Vi,L.escape=pE,L.escapeRegExp=mE,L.every=b1,L.find=S1,L.findIndex=Jg,L.findKey=BT,L.findLast=T1,L.findLastIndex=Kg,L.findLastKey=UT,L.floor=hA,L.forEach=i_,L.forEachRight=r_,L.forIn=zT,L.forInRight=kT,L.forOwn=GT,L.forOwnRight=HT,L.get=Lf,L.gt=lT,L.gte=cT,L.has=XT,L.hasIn=Rf,L.head=Qg,L.identity=Kn,L.includes=C1,L.indexOf=TS,L.inRange=uE,L.invoke=jT,L.isArguments=Vs,L.isArray=nt,L.isArrayBuffer=uT,L.isArrayLike=Zn,L.isArrayLikeObject=en,L.isBoolean=hT,L.isBuffer=es,L.isDate=fT,L.isElement=dT,L.isEmpty=pT,L.isEqual=mT,L.isEqualWith=gT,L.isError=Ef,L.isFinite=_T,L.isFunction=Tr,L.isInteger=f_,L.isLength=qc,L.isMap=d_,L.isMatch=vT,L.isMatchWith=xT,L.isNaN=yT,L.isNative=wT,L.isNil=MT,L.isNull=bT,L.isNumber=p_,L.isObject=qt,L.isObjectLike=$t,L.isPlainObject=al,L.isRegExp=Af,L.isSafeInteger=ST,L.isSet=m_,L.isString=jc,L.isSymbol=ci,L.isTypedArray=Io,L.isUndefined=TT,L.isWeakMap=ET,L.isWeakSet=AT,L.join=CS,L.kebabCase=gE,L.last=Ai,L.lastIndexOf=PS,L.lowerCase=_E,L.lowerFirst=vE,L.lt=LT,L.lte=RT,L.max=fA,L.maxBy=dA,L.mean=pA,L.meanBy=mA,L.min=gA,L.minBy=_A,L.stubArray=Ff,L.stubFalse=Nf,L.stubObject=nA,L.stubString=iA,L.stubTrue=rA,L.multiply=vA,L.nth=IS,L.noConflict=jE,L.noop=Of,L.now=Wc,L.pad=xE,L.padEnd=yE,L.padStart=wE,L.parseInt=bE,L.random=hE,L.reduce=F1,L.reduceRight=N1,L.repeat=ME,L.replace=SE,L.result=tE,L.round=xA,L.runInContext=j,L.sample=U1,L.size=G1,L.snakeCase=TE,L.some=H1,L.sortedIndex=zS,L.sortedIndexBy=kS,L.sortedIndexOf=GS,L.sortedLastIndex=HS,L.sortedLastIndexBy=VS,L.sortedLastIndexOf=WS,L.startCase=AE,L.startsWith=LE,L.subtract=yA,L.sum=wA,L.sumBy=bA,L.template=RE,L.times=sA,L.toFinite=Er,L.toInteger=it,L.toLength=__,L.toLower=CE,L.toNumber=Li,L.toSafeInteger=CT,L.toString=wt,L.toUpper=PE,L.trim=IE,L.trimEnd=DE,L.trimStart=OE,L.truncate=FE,L.unescape=NE,L.uniqueId=aA,L.upperCase=BE,L.upperFirst=Cf,L.each=i_,L.eachRight=r_,L.first=Qg,Df(L,function(){var o={};return $i(L,function(u,m){Tt.call(L.prototype,m)||(o[m]=u)}),o}(),{chain:!1}),L.VERSION=n,bi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){L[o].placeholder=L}),bi(["drop","take"],function(o,u){ut.prototype[o]=function(m){m=m===t?1:hn(it(m),0);var w=this.__filtered__&&!u?new ut(this):this.clone();return w.__filtered__?w.__takeCount__=An(m,w.__takeCount__):w.__views__.push({size:An(m,ve),type:o+(w.__dir__<0?"Right":"")}),w},ut.prototype[o+"Right"]=function(m){return this.reverse()[o](m).reverse()}}),bi(["filter","map","takeWhile"],function(o,u){var m=u+1,w=m==Y||m==W;ut.prototype[o]=function(E){var C=this.clone();return C.__iteratees__.push({iteratee:je(E,3),type:m}),C.__filtered__=C.__filtered__||w,C}}),bi(["head","last"],function(o,u){var m="take"+(u?"Right":"");ut.prototype[o]=function(){return this[m](1).value()[0]}}),bi(["initial","tail"],function(o,u){var m="drop"+(u?"":"Right");ut.prototype[o]=function(){return this.__filtered__?new ut(this):this[m](1)}}),ut.prototype.compact=function(){return this.filter(Kn)},ut.prototype.find=function(o){return this.filter(o).head()},ut.prototype.findLast=function(o){return this.reverse().find(o)},ut.prototype.invokeMap=at(function(o,u){return typeof o=="function"?new ut(this):this.map(function(m){return tl(m,o,u)})}),ut.prototype.reject=function(o){return this.filter(Yc(je(o)))},ut.prototype.slice=function(o,u){o=it(o);var m=this;return m.__filtered__&&(o>0||u<0)?new ut(m):(o<0?m=m.takeRight(-o):o&&(m=m.drop(o)),u!==t&&(u=it(u),m=u<0?m.dropRight(-u):m.take(u-o)),m)},ut.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ut.prototype.toArray=function(){return this.take(ve)},$i(ut.prototype,function(o,u){var m=/^(?:filter|find|map|reject)|While$/.test(u),w=/^(?:head|last)$/.test(u),E=L[w?"take"+(u=="last"?"Right":""):u],C=w||/^find/.test(u);!E||(L.prototype[u]=function(){var B=this.__wrapped__,G=w?[1]:arguments,K=B instanceof ut,pe=G[0],me=K||nt(B),be=function(lt){var ht=E.apply(L,qr([lt],G));return w&&Ce?ht[0]:ht};me&&m&&typeof pe=="function"&&pe.length!=1&&(K=me=!1);var Ce=this.__chain__,Ge=!!this.__actions__.length,Ze=C&&!Ce,st=K&&!Ge;if(!C&&me){B=st?B:new ut(this);var Je=o.apply(B,G);return Je.__actions__.push({func:Hc,args:[be],thisArg:t}),new Si(Je,Ce)}return Ze&&st?o.apply(this,G):(Je=this.thru(be),Ze?w?Je.value()[0]:Je.value():Je)})}),bi(["pop","push","shift","sort","splice","unshift"],function(o){var u=pc[o],m=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",w=/^(?:pop|shift)$/.test(o);L.prototype[o]=function(){var E=arguments;if(w&&!this.__chain__){var C=this.value();return u.apply(nt(C)?C:[],E)}return this[m](function(B){return u.apply(nt(B)?B:[],E)})}}),$i(ut.prototype,function(o,u){var m=L[u];if(m){var w=m.name+"";Tt.call(Ao,w)||(Ao[w]=[]),Ao[w].push({name:u,func:m})}}),Ao[Fc(t,v).name]=[{name:"wrapper",func:t}],ut.prototype.clone=Nb,ut.prototype.reverse=Bb,ut.prototype.value=Ub,L.prototype.at=d1,L.prototype.chain=p1,L.prototype.commit=m1,L.prototype.next=g1,L.prototype.plant=v1,L.prototype.reverse=x1,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=y1,L.prototype.first=L.prototype.head,ja&&(L.prototype[ja]=_1),L},So=mb();Fs?((Fs.exports=So)._=So,Ph._=So):wn._=So}).call(Ws)})(V_,V_.exports);function Lr(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function W_(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.__proto__=e}/*!
 * GSAP 3.8.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var $n={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Fo={duration:.5,overwrite:!1,delay:0},Uf,tr=1e8,Dt=1/tr,zf=Math.PI*2,DA=zf/4,OA=0,X_=Math.sqrt,FA=Math.cos,NA=Math.sin,Mn=function(e){return typeof e=="string"},_n=function(e){return typeof e=="function"},Rr=function(e){return typeof e=="number"},kf=function(e){return typeof e=="undefined"},Cr=function(e){return typeof e=="object"},Qn=function(e){return e!==!1},Y_=function(){return typeof window!="undefined"},q_=function(e){return _n(e)||Mn(e)},j_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},fi=Array.isArray,Gf=/(?:-?\.?\d|\.)+/gi,Z_=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,No=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Hf=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,J_=/[+-]=-?[.\d]+/,K_=/[^,'"\[\]\s]+/gi,BA=/[\d.+\-=]+(?:e[-+]\d*)*/i,jt,nr,Vf,Wf,di={},$c={},$_,Q_=function(e){return($c=Uo(e,di))&&rr},Xf=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Qc=function(e,t){return!t&&console.warn(e)},e0=function(e,t){return e&&(di[e]=t)&&$c&&($c[e]=t)||di},Bo=function(){return 0},Yf={},ts=[],qf={},t0,pi={},jf={},n0=30,eu=[],Zf="",Jf=function(e){var t=e[0],n,i;if(Cr(t)||_n(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=eu.length;i--&&!eu[i].targetTest(t););n=eu[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new R0(e[i],n)))||e.splice(i,1);return e},Xs=function(e){return e._gsap||Jf(Pi(e))[0]._gsap},i0=function(e,t,n){return(n=e[t])&&_n(n)?e[t]():kf(n)&&e.getAttribute&&e.getAttribute(t)||n},mi=function(e,t){return(e=e.split(",")).forEach(t)||e},an=function(e){return Math.round(e*1e5)/1e5||0},Rn=function(e){return Math.round(e*1e7)/1e7||0},UA=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},tu=function(){var e=ts.length,t=ts.slice(0),n,i;for(qf={},ts.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},r0=function(e,t,n,i){ts.length&&tu(),e.render(t,n,i),ts.length&&tu()},s0=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(K_).length<2?t:Mn(e)?e.trim():e},o0=function(e){return e},Ri=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},zA=function(e,t){for(var n in t)n in e||n==="duration"||n==="ease"||(e[n]=t[n])},Uo=function(e,t){for(var n in t)e[n]=t[n];return e},a0=function a(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Cr(t[n])?a(e[n]||(e[n]={}),t[n]):t[n]);return e},Kf=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},ll=function(e){var t=e.parent||jt,n=e.keyframes?zA:Ri;if(Qn(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},kA=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},GA=function(e,t,n,i,r){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=e[i],l;if(r)for(l=t[r];s&&s[r]>l;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=s,t.parent=t._dp=e,t},nu=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var r=t._prev,s=t._next;r?r._next=s:e[n]===t&&(e[n]=s),s?s._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},ns=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ys=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},HA=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},VA=function a(e){return!e||e._ts&&a(e.parent)},l0=function(e){return e._repeat?zo(e._tTime,e=e.duration()+e._rDelay)*e:0},zo=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},iu=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ru=function(e){return e._end=Rn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Dt)||0))},c0=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Rn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ru(e),n._dirty||Ys(n,e)),e},u0=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=iu(e.rawTime(),t),(!t._dur||ul(0,t.totalDuration(),n)-t._tTime>Dt)&&t.render(n,!0)),Ys(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Dt}},ir=function(e,t,n,i){return t.parent&&ns(t),t._start=Rn((Rr(n)?n:n||e!==jt?Ci(e,n,t):e._time)+t._delay),t._end=Rn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),GA(e,t,"_first","_last",e._sort?"_start":0),$f(t)||(e._recent=t),i||u0(e,t),e},h0=function(e,t){return(di.ScrollTrigger||Xf("scrollTrigger",t))&&di.ScrollTrigger.create(t,e)},f0=function(e,t,n,i){if(fL(e,t),!e._initted)return 1;if(!n&&e._pt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&t0!==Di.frame)return ts.push(e),e._lazy=[t,i],1},WA=function a(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||a(t))},$f=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},XA=function(e,t,n,i){var r=e.ratio,s=t<0||!t&&(!e._start&&WA(e)&&!(!e._initted&&$f(e))||(e._ts<0||e._dp._ts<0)&&!$f(e))?0:1,l=e._rDelay,c=0,h,f,d;if(l&&e._repeat&&(c=ul(0,e._tDur,t),f=zo(c,l),d=zo(e._tTime,l),e._yoyo&&f&1&&(s=1-s),f!==d&&(r=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==r||i||e._zTime===Dt||!t&&e._zTime){if(!e._initted&&f0(e,t,i,n))return;for(d=e._zTime,e._zTime=t||(n?Dt:0),n||(n=t&&!d),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=c,h=e._pt;h;)h.r(s,h.d),h=h._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&Ii(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Ii(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===s&&(s&&ns(e,1),n||(Ii(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},YA=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(!i._dur&&i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(!i._dur&&i.data==="isPause"&&i._start<t)return i;i=i._prev}},ko=function(e,t,n,i){var r=e._repeat,s=Rn(t)||0,l=e._tTime/e._tDur;return l&&!i&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:Rn(s*(r+1)+e._rDelay*r):s,l&&!i?c0(e,e._tTime=e._tDur*l):e.parent&&ru(e),n||Ys(e.parent,e),e},d0=function(e){return e instanceof ei?Ys(e):ko(e,e._dur)},qA={_start:0,endTime:Bo,totalDuration:Bo},Ci=function a(e,t,n){var i=e.labels,r=e._recent||qA,s=e.duration()>=tr?r.endTime(!1):e._dur,l,c,h;return Mn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),h=t.substr(-1)==="%",l=t.indexOf("="),c==="<"||c===">"?(l>=0&&(t=t.replace(/=/,"")),(c==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(l<0?r:n).totalDuration()/100:1)):l<0?(t in i||(i[t]=s),i[t]):(c=parseFloat(t.charAt(l-1)+t.substr(l+1)),h&&n&&(c=c/100*(fi(n)?n[0]:n).totalDuration()),l>1?a(e,t.substr(0,l-1),n)+c:s+c)):t==null?s:+t},cl=function(e,t,n){var i=Rr(t[1]),r=(i?2:1)+(e<2?0:1),s=t[r],l,c;if(i&&(s.duration=t[1]),s.parent=n,e){for(l=s,c=n;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Qn(c.vars.inherit)&&c.parent;s.immediateRender=Qn(l.immediateRender),e<2?s.runBackwards=1:s.startAt=t[r-1]}return new vn(t[0],s,t[r+1])},is=function(e,t){return e||e===0?t(e):t},ul=function(e,t,n){return n<e?e:n>t?t:n},gi=function(e){if(typeof e!="string")return"";var t=BA.exec(e);return t?e.substr(t.index+t[0].length):""},jA=function(e,t,n){return is(n,function(i){return ul(e,t,i)})},Qf=[].slice,p0=function(e,t){return e&&Cr(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Cr(e[0]))&&!e.nodeType&&e!==nr},ZA=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var r;return Mn(i)&&!t||p0(i,1)?(r=n).push.apply(r,Pi(i)):n.push(i)})||n},Pi=function(e,t,n){return Mn(e)&&!n&&(Vf||!Ho())?Qf.call((t||Wf).querySelectorAll(e),0):fi(e)?ZA(e,n):p0(e)?Qf.call(e,0):e?[e]:[]},JA=function(e){return e=Pi(e)[0]||Qc("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Pi(t,n.querySelectorAll?n:n===e?Qc("Invalid scope")||Wf.createElement("div"):e)}},m0=function(e){return e.sort(function(){return .5-Math.random()})},g0=function(e){if(_n(e))return e;var t=Cr(e)?e:{each:e},n=Vo(t.ease),i=t.from||0,r=parseFloat(t.base)||0,s={},l=i>0&&i<1,c=isNaN(i)||l,h=t.axis,f=i,d=i;return Mn(i)?f=d={center:.5,edges:.5,end:1}[i]||0:!l&&c&&(f=i[0],d=i[1]),function(g,p,_){var x=(_||t).length,b=s[x],v,y,S,M,A,R,T,N,X;if(!b){if(X=t.grid==="auto"?0:(t.grid||[1,tr])[1],!X){for(T=-tr;T<(T=_[X++].getBoundingClientRect().left)&&X<x;);X--}for(b=s[x]=[],v=c?Math.min(X,x)*f-.5:i%X,y=c?x*d/X-.5:i/X|0,T=0,N=tr,R=0;R<x;R++)S=R%X-v,M=y-(R/X|0),b[R]=A=h?Math.abs(h==="y"?M:S):X_(S*S+M*M),A>T&&(T=A),A<N&&(N=A);i==="random"&&m0(b),b.max=T-N,b.min=N,b.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(X>x?x-1:h?h==="y"?x/X:X:Math.max(X,x/X))||0)*(i==="edges"?-1:1),b.b=x<0?r-x:r,b.u=gi(t.amount||t.each)||0,n=n&&x<0?E0(n):n}return x=(b[g]-b.min)/b.max||0,Rn(b.b+(n?n(x):x)*b.v)+b.u}},ed=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Math.round(parseFloat(n)/e)*e*t;return(i-i%1)/t+(Rr(n)?0:gi(n))}},_0=function(e,t){var n=fi(e),i,r;return!n&&Cr(e)&&(i=n=e.radius||tr,e.values?(e=Pi(e.values),(r=!Rr(e[0]))&&(i*=i)):e=ed(e.increment)),is(t,n?_n(e)?function(s){return r=e(s),Math.abs(r-s)<=i?r:s}:function(s){for(var l=parseFloat(r?s.x:s),c=parseFloat(r?s.y:0),h=tr,f=0,d=e.length,g,p;d--;)r?(g=e[d].x-l,p=e[d].y-c,g=g*g+p*p):g=Math.abs(e[d]-l),g<h&&(h=g,f=d);return f=!i||h<=i?e[f]:s,r||f===s||Rr(s)?f:f+gi(s)}:ed(e))},v0=function(e,t,n,i){return is(fi(e)?!t:n===!0?!!(n=0):!i,function(){return fi(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},KA=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(r,s){return s(r)},i)}},$A=function(e,t){return function(n){return e(parseFloat(n))+(t||gi(n))}},QA=function(e,t,n){return y0(e,t,0,1,n)},x0=function(e,t,n){return is(n,function(i){return e[~~t(i)]})},eL=function a(e,t,n){var i=t-e;return fi(e)?x0(e,a(0,e.length),t):is(n,function(r){return(i+(r-e)%i)%i+e})},tL=function a(e,t,n){var i=t-e,r=i*2;return fi(e)?x0(e,a(0,e.length-1),t):is(n,function(s){return s=(r+(s-e)%r)%r||0,e+(s>i?r-s:s)})},hl=function(e){for(var t=0,n="",i,r,s,l;~(i=e.indexOf("random(",t));)s=e.indexOf(")",i),l=e.charAt(i+7)==="[",r=e.substr(i+7,s-i-7).match(l?K_:Gf),n+=e.substr(t,i-t)+v0(l?r:+r[0],l?0:+r[1],+r[2]||1e-5),t=s+1;return n+e.substr(t,e.length-t)},y0=function(e,t,n,i,r){var s=t-e,l=i-n;return is(r,function(c){return n+((c-e)/s*l||0)})},nL=function a(e,t,n,i){var r=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!r){var s=Mn(e),l={},c,h,f,d,g;if(n===!0&&(i=1)&&(n=null),s)e={p:e},t={p:t};else if(fi(e)&&!fi(t)){for(f=[],d=e.length,g=d-2,h=1;h<d;h++)f.push(a(e[h-1],e[h]));d--,r=function(_){_*=d;var x=Math.min(g,~~_);return f[x](_-x)},n=t}else i||(e=Uo(fi(e)?[]:{},e));if(!f){for(c in t)rd.call(l,e,c,"get",t[c]);r=function(_){return ad(_,l)||(s?e.p:e)}}}return is(n,r)},w0=function(e,t,n){var i=e.labels,r=tr,s,l,c;for(s in i)l=i[s]-t,l<0==!!n&&l&&r>(l=Math.abs(l))&&(c=s,r=l);return c},Ii=function(e,t,n){var i=e.vars,r=i[t],s,l;if(!!r)return s=i[t+"Params"],l=i.callbackScope||e,n&&ts.length&&tu(),s?r.apply(l,s):r.call(l)},fl=function(e){return ns(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&Ii(e,"onInterrupt"),e},Go,iL=function(e){e=!e.name&&e.default||e;var t=e.name,n=_n(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:Bo,render:ad,add:rd,kill:xL,modifier:vL,rawVars:0},s={targetTest:0,get:0,getSetter:od,aliases:{},register:0};if(Ho(),e!==i){if(pi[t])return;Ri(i,Ri(Kf(e,r),s)),Uo(i.prototype,Uo(r,Kf(e,s))),pi[i.prop=t]=i,e.targetTest&&(eu.push(i),Yf[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}e0(t,i),e.register&&e.register(rr,i,ti)},Ot=255,dl={aqua:[0,Ot,Ot],lime:[0,Ot,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ot],navy:[0,0,128],white:[Ot,Ot,Ot],olive:[128,128,0],yellow:[Ot,Ot,0],orange:[Ot,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ot,0,0],pink:[Ot,192,203],cyan:[0,Ot,Ot],transparent:[Ot,Ot,Ot,0]},td=function(e,t,n){return e=e<0?e+1:e>1?e-1:e,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Ot+.5|0},b0=function(e,t,n){var i=e?Rr(e)?[e>>16,e>>8&Ot,e&Ot]:0:dl.black,r,s,l,c,h,f,d,g,p,_;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),dl[e])i=dl[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),s=e.charAt(2),l=e.charAt(3),e="#"+r+r+s+s+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ot,i&Ot,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ot,e&Ot]}else if(e.substr(0,3)==="hsl"){if(i=_=e.match(Gf),!t)c=+i[0]%360/360,h=+i[1]/100,f=+i[2]/100,s=f<=.5?f*(h+1):f+h-f*h,r=f*2-s,i.length>3&&(i[3]*=1),i[0]=td(c+1/3,r,s),i[1]=td(c,r,s),i[2]=td(c-1/3,r,s);else if(~e.indexOf("="))return i=e.match(Z_),n&&i.length<4&&(i[3]=1),i}else i=e.match(Gf)||dl.transparent;i=i.map(Number)}return t&&!_&&(r=i[0]/Ot,s=i[1]/Ot,l=i[2]/Ot,d=Math.max(r,s,l),g=Math.min(r,s,l),f=(d+g)/2,d===g?c=h=0:(p=d-g,h=f>.5?p/(2-d-g):p/(d+g),c=d===r?(s-l)/p+(s<l?6:0):d===s?(l-r)/p+2:(r-s)/p+4,c*=60),i[0]=~~(c+.5),i[1]=~~(h*100+.5),i[2]=~~(f*100+.5)),n&&i.length<4&&(i[3]=1),i},M0=function(e){var t=[],n=[],i=-1;return e.split(rs).forEach(function(r){var s=r.match(No)||[];t.push.apply(t,s),n.push(i+=s.length+1)}),t.c=n,t},S0=function(e,t,n){var i="",r=(e+i).match(rs),s=t?"hsla(":"rgba(",l=0,c,h,f,d;if(!r)return e;if(r=r.map(function(g){return(g=b0(g,t,1))&&s+(t?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),n&&(f=M0(e),c=n.c,c.join(i)!==f.c.join(i)))for(h=e.replace(rs,"1").split(No),d=h.length-1;l<d;l++)i+=h[l]+(~c.indexOf(l)?r.shift()||s+"0,0,0,0)":(f.length?f:r.length?r:n).shift());if(!h)for(h=e.split(rs),d=h.length-1;l<d;l++)i+=h[l]+r[l];return i+h[d]},rs=function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in dl)a+="|"+e+"\\b";return new RegExp(a+")","gi")}(),rL=/hsl[a]?\(/,T0=function(e){var t=e.join(" "),n;if(rs.lastIndex=0,rs.test(t))return n=rL.test(t),e[1]=S0(e[1],n),e[0]=S0(e[0],n,M0(e[1])),!0},su,Di=function(){var a=Date.now,e=500,t=33,n=a(),i=n,r=1e3/240,s=r,l=[],c,h,f,d,g,p,_=function x(b){var v=a()-i,y=b===!0,S,M,A,R;if(v>e&&(n+=v-t),i+=v,A=i-n,S=A-s,(S>0||y)&&(R=++d.frame,g=A-d.time*1e3,d.time=A=A/1e3,s+=S+(S>=r?4:r-S),M=1),y||(c=h(x)),M)for(p=0;p<l.length;p++)l[p](A,g,R,b)};return d={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(b){return g/(1e3/(b||60))},wake:function(){$_&&(!Vf&&Y_()&&(nr=Vf=window,Wf=nr.document||{},di.gsap=rr,(nr.gsapVersions||(nr.gsapVersions=[])).push(rr.version),Q_($c||nr.GreenSockGlobals||!nr.gsap&&nr||{}),f=nr.requestAnimationFrame),c&&d.sleep(),h=f||function(b){return setTimeout(b,s-d.time*1e3+1|0)},su=1,_(2))},sleep:function(){(f?nr.cancelAnimationFrame:clearTimeout)(c),su=0,h=Bo},lagSmoothing:function(b,v){e=b||1/Dt,t=Math.min(v,e,0)},fps:function(b){r=1e3/(b||240),s=d.time*1e3+r},add:function(b){l.indexOf(b)<0&&l.push(b),Ho()},remove:function(b){var v;~(v=l.indexOf(b))&&l.splice(v,1)&&p>=v&&p--},_listeners:l},d}(),Ho=function(){return!su&&Di.wake()},mt={},sL=/^[\d.\-M][\d.\-,\s]/,oL=/["']/g,aL=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],r=1,s=n.length,l,c,h;r<s;r++)c=n[r],l=r!==s-1?c.lastIndexOf(","):c.length,h=c.substr(0,l),t[i]=isNaN(h)?h.replace(oL,"").trim():+h,i=c.substr(l+1).trim();return t},lL=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},cL=function(e){var t=(e+"").split("("),n=mt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[aL(t[1])]:lL(e).split(",").map(s0)):mt._CE&&sL.test(e)?mt._CE("",e):n},E0=function(e){return function(t){return 1-e(1-t)}},A0=function a(e,t){for(var n=e._first,i;n;)n instanceof ei?a(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?a(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Vo=function(e,t){return e&&(_n(e)?e:mt[e]||cL(e))||t},qs=function(e,t,n,i){n===void 0&&(n=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var r={easeIn:t,easeOut:n,easeInOut:i},s;return mi(e,function(l){mt[l]=di[l]=r,mt[s=l.toLowerCase()]=n;for(var c in r)mt[s+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=mt[l+"."+c]=r[c]}),r},L0=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},nd=function a(e,t,n){var i=t>=1?t:1,r=(n||(e?.3:.45))/(t<1?t:1),s=r/zf*(Math.asin(1/i)||0),l=function(f){return f===1?1:i*Math.pow(2,-10*f)*NA((f-s)*r)+1},c=e==="out"?l:e==="in"?function(h){return 1-l(1-h)}:L0(l);return r=zf/r,c.config=function(h,f){return a(e,h,f)},c},id=function a(e,t){t===void 0&&(t=1.70158);var n=function(s){return s?--s*s*((t+1)*s+t)+1:0},i=e==="out"?n:e==="in"?function(r){return 1-n(1-r)}:L0(n);return i.config=function(r){return a(e,r)},i};mi("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,e){var t=e<5?e+1:e;qs(a+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});mt.Linear.easeNone=mt.none=mt.Linear.easeIn;qs("Elastic",nd("in"),nd("out"),nd());(function(a,e){var t=1/e,n=2*t,i=2.5*t,r=function(l){return l<t?a*l*l:l<n?a*Math.pow(l-1.5/e,2)+.75:l<i?a*(l-=2.25/e)*l+.9375:a*Math.pow(l-2.625/e,2)+.984375};qs("Bounce",function(s){return 1-r(1-s)},r)})(7.5625,2.75);qs("Expo",function(a){return a?Math.pow(2,10*(a-1)):0});qs("Circ",function(a){return-(X_(1-a*a)-1)});qs("Sine",function(a){return a===1?1:-FA(a*DA)+1});qs("Back",id("in"),id("out"),id());mt.SteppedEase=mt.steps=di.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0,s=1-Dt;return function(l){return((i*ul(0,s,l)|0)+r)*n}}};Fo.ease=mt["quad.out"];mi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(a){return Zf+=a+","+a+"Params,"});var R0=function(e,t){this.id=OA++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:i0,this.set=t?t.getSetter:od},pl=function(){function a(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ko(this,+t.duration,1,1),this.data=t.data,su||Di.wake()}var e=a.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ko(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Ho(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(c0(this,n),!r._dp||r.parent||u0(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ir(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Dt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),r0(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+l0(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+l0(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,i):this._repeat?zo(this._tTime,r)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-Dt?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?iu(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Dt?0:this._rts,HA(this.totalTime(ul(-this._delay,this._tDur,i),!0)),ru(this),this},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ho(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Dt&&(this._tTime-=Dt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ir(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Qn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?iu(i.rawTime(n),this):this._tTime:this._tTime},e.globalTime=function(n){for(var i=this,r=arguments.length?n:i.rawTime();i;)r=i._start+r/(i._ts||1),i=i._dp;return r},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,d0(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,d0(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(Ci(this,n),Qn(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Qn(i))},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Dt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Dt,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=i&&r<this.endTime(!0)-Dt)},e.eventCallback=function(n,i,r){var s=this.vars;return arguments.length>1?(i?(s[n]=i,r&&(s[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=i)):delete s[n],this):s[n]},e.then=function(n){var i=this;return new Promise(function(r){var s=_n(n)?n:o0,l=function(){var h=i.then;i.then=null,_n(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=h),r(s),i.then=h};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},e.kill=function(){fl(this)},a}();Ri(pl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Dt,_prom:0,_ps:!1,_rts:1});var ei=function(a){W_(e,a);function e(n,i){var r;return n===void 0&&(n={}),r=a.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=Qn(n.sortChildren),jt&&ir(n.parent||jt,Lr(r),i),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&h0(Lr(r),n.scrollTrigger),r}var t=e.prototype;return t.to=function(i,r,s){return cl(0,arguments,this),this},t.from=function(i,r,s){return cl(1,arguments,this),this},t.fromTo=function(i,r,s,l){return cl(2,arguments,this),this},t.set=function(i,r,s){return r.duration=0,r.parent=this,ll(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new vn(i,r,Ci(this,s),1),this},t.call=function(i,r,s){return ir(this,vn.delayedCall(0,i,r),s)},t.staggerTo=function(i,r,s,l,c,h,f){return s.duration=r,s.stagger=s.stagger||l,s.onComplete=h,s.onCompleteParams=f,s.parent=this,new vn(i,s,Ci(this,c)),this},t.staggerFrom=function(i,r,s,l,c,h,f){return s.runBackwards=1,ll(s).immediateRender=Qn(s.immediateRender),this.staggerTo(i,r,s,l,c,h,f)},t.staggerFromTo=function(i,r,s,l,c,h,f,d){return l.startAt=s,ll(l).immediateRender=Qn(l.immediateRender),this.staggerTo(i,r,l,c,h,f,d)},t.render=function(i,r,s){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=i<=0?0:Rn(i),d=this._zTime<0!=i<0&&(this._initted||!h),g,p,_,x,b,v,y,S,M,A,R,T;if(this!==jt&&f>c&&i>=0&&(f=c),f!==this._tTime||s||d){if(l!==this._time&&h&&(f+=this._time-l,i+=this._time-l),g=f,M=this._start,S=this._ts,v=!S,d&&(h||(l=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(R=this._yoyo,b=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(b*100+i,r,s);if(g=Rn(f%b),f===c?(x=this._repeat,g=h):(x=~~(f/b),x&&x===f/b&&(g=h,x--),g>h&&(g=h)),A=zo(this._tTime,b),!l&&this._tTime&&A!==x&&(A=x),R&&x&1&&(g=h-g,T=1),x!==A&&!this._lock){var N=R&&A&1,X=N===(R&&x&1);if(x<A&&(N=!N),l=N?0:h,this._lock=1,this.render(l||(T?0:Rn(x*b)),r,!h)._lock=0,this._tTime=f,!r&&this.parent&&Ii(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),l&&l!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,X&&(this._lock=2,l=N?h:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;A0(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=YA(this,Rn(l),Rn(g)),y&&(f-=g-(g=y._start))),this._tTime=f,this._time=g,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&g&&!r&&(Ii(this,"onStart"),this._tTime!==f))return this;if(g>=l&&i>=0)for(p=this._first;p;){if(_=p._next,(p._act||g>=p._start)&&p._ts&&y!==p){if(p.parent!==this)return this.render(i,r,s);if(p.render(p._ts>0?(g-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(g-p._start)*p._ts,r,s),g!==this._time||!this._ts&&!v){y=0,_&&(f+=this._zTime=-Dt);break}}p=_}else{p=this._last;for(var H=i<0?i:g;p;){if(_=p._prev,(p._act||H<=p._end)&&p._ts&&y!==p){if(p.parent!==this)return this.render(i,r,s);if(p.render(p._ts>0?(H-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(H-p._start)*p._ts,r,s),g!==this._time||!this._ts&&!v){y=0,_&&(f+=this._zTime=H?-Dt:Dt);break}}p=_}}if(y&&!r&&(this.pause(),y.render(g>=l?0:-Dt)._zTime=g>=l?1:-1,this._ts))return this._start=M,ru(this),this.render(i,r,s);this._onUpdate&&!r&&Ii(this,"onUpdate",!0),(f===c&&c>=this.totalDuration()||!f&&l)&&(M===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(f===c&&this._ts>0||!f&&this._ts<0)&&ns(this,1),!r&&!(i<0&&!l)&&(f||l||!c)&&(Ii(this,f===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,r){var s=this;if(Rr(r)||(r=Ci(this,r,i)),!(i instanceof pl)){if(fi(i))return i.forEach(function(l){return s.add(l,r)}),this;if(Mn(i))return this.addLabel(i,r);if(_n(i))i=vn.delayedCall(0,i);else return this}return this!==i?ir(this,i,r):this},t.getChildren=function(i,r,s,l){i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=!0),l===void 0&&(l=-tr);for(var c=[],h=this._first;h;)h._start>=l&&(h instanceof vn?r&&c.push(h):(s&&c.push(h),i&&c.push.apply(c,h.getChildren(!0,r,s)))),h=h._next;return c},t.getById=function(i){for(var r=this.getChildren(1,1,1),s=r.length;s--;)if(r[s].vars.id===i)return r[s]},t.remove=function(i){return Mn(i)?this.removeLabel(i):_n(i)?this.killTweensOf(i):(nu(this,i),i===this._recent&&(this._recent=this._last),Ys(this))},t.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Rn(Di.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),a.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},t.addLabel=function(i,r){return this.labels[i]=Ci(this,r),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,r,s){var l=vn.delayedCall(0,r||Bo,s);return l.data="isPause",this._hasPause=1,ir(this,l,Ci(this,i))},t.removePause=function(i){var r=this._first;for(i=Ci(this,i);r;)r._start===i&&r.data==="isPause"&&ns(r),r=r._next},t.killTweensOf=function(i,r,s){for(var l=this.getTweensOf(i,s),c=l.length;c--;)ss!==l[c]&&l[c].kill(i,r);return this},t.getTweensOf=function(i,r){for(var s=[],l=Pi(i),c=this._first,h=Rr(r),f;c;)c instanceof vn?UA(c._targets,l)&&(h?(!ss||c._initted&&c._ts)&&c.globalTime(0)<=r&&c.globalTime(c.totalDuration())>r:!r||c.isActive())&&s.push(c):(f=c.getTweensOf(l,r)).length&&s.push.apply(s,f),c=c._next;return s},t.tweenTo=function(i,r){r=r||{};var s=this,l=Ci(s,i),c=r,h=c.startAt,f=c.onStart,d=c.onStartParams,g=c.immediateRender,p,_=vn.to(s,Ri({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:r.duration||Math.abs((l-(h&&"time"in h?h.time:s._time))/s.timeScale())||Dt,onStart:function(){if(s.pause(),!p){var b=r.duration||Math.abs((l-(h&&"time"in h?h.time:s._time))/s.timeScale());_._dur!==b&&ko(_,b,0,1).render(_._time,!0,!0),p=1}f&&f.apply(_,d||[])}},r));return g?_.render(0):_},t.tweenFromTo=function(i,r,s){return this.tweenTo(r,Ri({startAt:{time:Ci(this,i)}},s))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),w0(this,Ci(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),w0(this,Ci(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Dt)},t.shiftChildren=function(i,r,s){s===void 0&&(s=0);for(var l=this._first,c=this.labels,h;l;)l._start>=s&&(l._start+=i,l._end+=i),l=l._next;if(r)for(h in c)c[h]>=s&&(c[h]+=i);return Ys(this)},t.invalidate=function(){var i=this._first;for(this._lock=0;i;)i.invalidate(),i=i._next;return a.prototype.invalidate.call(this)},t.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,s;r;)s=r._next,this.remove(r),r=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Ys(this)},t.totalDuration=function(i){var r=0,s=this,l=s._last,c=tr,h,f,d;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(d=s.parent;l;)h=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>c&&s._sort&&l._ts&&!s._lock?(s._lock=1,ir(s,l,f-l._delay,1)._lock=0):c=f,f<0&&l._ts&&(r-=f,(!d&&!s._dp||d&&d.smoothChildTiming)&&(s._start+=f/s._ts,s._time-=f,s._tTime-=f),s.shiftChildren(-f,!1,-1/0),c=0),l._end>r&&l._ts&&(r=l._end),l=h;ko(s,s===jt&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(i){if(jt._ts&&(r0(jt,iu(i,jt)),t0=Di.frame),Di.frame>=n0){n0+=$n.autoSleep||120;var r=jt._first;if((!r||!r._ts)&&$n.autoSleep&&Di._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Di.sleep()}}},e}(pl);Ri(ei.prototype,{_lock:0,_hasPause:0,_forcing:0});var uL=function(e,t,n,i,r,s,l){var c=new ti(this._pt,e,t,0,1,O0,null,r),h=0,f=0,d,g,p,_,x,b,v,y;for(c.b=n,c.e=i,n+="",i+="",(v=~i.indexOf("random("))&&(i=hl(i)),s&&(y=[n,i],s(y,e,t),n=y[0],i=y[1]),g=n.match(Hf)||[];d=Hf.exec(i);)_=d[0],x=i.substring(h,d.index),p?p=(p+1)%5:x.substr(-5)==="rgba("&&(p=1),_!==g[f++]&&(b=parseFloat(g[f-1])||0,c._pt={_next:c._pt,p:x||f===1?x:",",s:b,c:_.charAt(1)==="="?parseFloat(_.substr(2))*(_.charAt(0)==="-"?-1:1):parseFloat(_)-b,m:p&&p<4?Math.round:0},h=Hf.lastIndex);return c.c=h<i.length?i.substring(h,i.length):"",c.fp=l,(J_.test(i)||v)&&(c.e=0),this._pt=c,c},rd=function(e,t,n,i,r,s,l,c,h){_n(i)&&(i=i(r||0,e,s));var f=e[t],d=n!=="get"?n:_n(f)?h?e[t.indexOf("set")||!_n(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():f,g=_n(f)?h?mL:I0:sd,p;if(Mn(i)&&(~i.indexOf("random(")&&(i=hl(i)),i.charAt(1)==="="&&(p=parseFloat(d)+parseFloat(i.substr(2))*(i.charAt(0)==="-"?-1:1)+(gi(d)||0),(p||p===0)&&(i=p))),d!==i)return!isNaN(d*i)&&i!==""?(p=new ti(this._pt,e,t,+d||0,i-(d||0),typeof f=="boolean"?_L:D0,0,g),h&&(p.fp=h),l&&p.modifier(l,this,e),this._pt=p):(!f&&!(t in e)&&Xf(t,i),uL.call(this,e,t,d,i,g,c||$n.stringFilter,h))},hL=function(e,t,n,i,r){if(_n(e)&&(e=ml(e,r,t,n,i)),!Cr(e)||e.style&&e.nodeType||fi(e)||j_(e))return Mn(e)?ml(e,r,t,n,i):e;var s={},l;for(l in e)s[l]=ml(e[l],r,t,n,i);return s},C0=function(e,t,n,i,r,s){var l,c,h,f;if(pi[e]&&(l=new pi[e]).init(r,l.rawVars?t[e]:hL(t[e],i,r,s,n),n,i,s)!==!1&&(n._pt=c=new ti(n._pt,r,e,0,1,l.render,l,0,l.priority),n!==Go))for(h=n._ptLookup[n._targets.indexOf(r)],f=l._props.length;f--;)h[l._props[f]]=c;return l},ss,fL=function a(e,t){var n=e.vars,i=n.ease,r=n.startAt,s=n.immediateRender,l=n.lazy,c=n.onUpdate,h=n.onUpdateParams,f=n.callbackScope,d=n.runBackwards,g=n.yoyoEase,p=n.keyframes,_=n.autoRevert,x=e._dur,b=e._startAt,v=e._targets,y=e.parent,S=y&&y.data==="nested"?y.parent._targets:v,M=e._overwrite==="auto"&&!Uf,A=e.timeline,R,T,N,X,H,O,te,V,Y,$,W,ee,re;if(A&&(!p||!i)&&(i="none"),e._ease=Vo(i,Fo.ease),e._yEase=g?E0(Vo(g===!0?i:g,Fo.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!A&&!!n.runBackwards,!A){if(V=v[0]?Xs(v[0]).harness:0,ee=V&&n[V.prop],R=Kf(n,Yf),b&&b.render(-1,!0).kill(),r)if(ns(e._startAt=vn.set(v,Ri({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:Qn(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:h,callbackScope:f,stagger:0},r))),t<0&&!s&&!_&&e._startAt.render(-1,!0),s){if(t>0&&!_&&(e._startAt=0),x&&t<=0){t&&(e._zTime=t);return}}else _===!1&&(e._startAt=0);else if(d&&x){if(b)!_&&(e._startAt=0);else if(t&&(s=!1),N=Ri({overwrite:!1,data:"isFromStart",lazy:s&&Qn(l),immediateRender:s,stagger:0,parent:y},R),ee&&(N[V.prop]=ee),ns(e._startAt=vn.set(v,N)),t<0&&e._startAt.render(-1,!0),!s)a(e._startAt,Dt);else if(!t)return}for(e._pt=0,l=x&&Qn(l)||l&&!x,T=0;T<v.length;T++){if(H=v[T],te=H._gsap||Jf(v)[T]._gsap,e._ptLookup[T]=$={},qf[te.id]&&ts.length&&tu(),W=S===v?T:S.indexOf(H),V&&(Y=new V).init(H,ee||R,e,W,S)!==!1&&(e._pt=X=new ti(e._pt,H,Y.name,0,1,Y.render,Y,0,Y.priority),Y._props.forEach(function(Le){$[Le]=X}),Y.priority&&(O=1)),!V||ee)for(N in R)pi[N]&&(Y=C0(N,R,e,W,H,S))?Y.priority&&(O=1):$[N]=X=rd.call(e,H,N,"get",R[N],W,S,0,n.stringFilter);e._op&&e._op[T]&&e.kill(H,e._op[T]),M&&e._pt&&(ss=e,jt.killTweensOf(H,$,e.globalTime(t)),re=!e.parent,ss=0),e._pt&&l&&(qf[te.id]=1)}O&&F0(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!re},dL=function(e,t){var n=e[0]?Xs(e[0]).harness:0,i=n&&n.aliases,r,s,l,c;if(!i)return t;r=Uo({},t);for(s in i)if(s in r)for(c=i[s].split(","),l=c.length;l--;)r[c[l]]=r[s];return r},ml=function(e,t,n,i,r){return _n(e)?e.call(t,n,i,r):Mn(e)&&~e.indexOf("random(")?hl(e):e},P0=Zf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",pL=(P0+",id,stagger,delay,duration,paused,scrollTrigger").split(","),vn=function(a){W_(e,a);function e(n,i,r,s){var l;typeof i=="number"&&(r.duration=i,i=r,r=null),l=a.call(this,s?i:ll(i))||this;var c=l.vars,h=c.duration,f=c.delay,d=c.immediateRender,g=c.stagger,p=c.overwrite,_=c.keyframes,x=c.defaults,b=c.scrollTrigger,v=c.yoyoEase,y=i.parent||jt,S=(fi(n)||j_(n)?Rr(n[0]):"length"in i)?[n]:Pi(n),M,A,R,T,N,X,H,O;if(l._targets=S.length?Jf(S):Qc("GSAP target "+n+" not found. https://greensock.com",!$n.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=p,_||g||q_(h)||q_(f)){if(i=l.vars,M=l.timeline=new ei({data:"nested",defaults:x||{}}),M.kill(),M.parent=M._dp=Lr(l),M._start=0,_)ll(Ri(M.vars.defaults,{ease:"none"})),g?S.forEach(function(te,V){return _.forEach(function(Y,$){return M.to(te,Y,$?">":V*g)})}):_.forEach(function(te){return M.to(S,te,">")});else{if(T=S.length,H=g?g0(g):Bo,Cr(g))for(N in g)~P0.indexOf(N)&&(O||(O={}),O[N]=g[N]);for(A=0;A<T;A++){R={};for(N in i)pL.indexOf(N)<0&&(R[N]=i[N]);R.stagger=0,v&&(R.yoyoEase=v),O&&Uo(R,O),X=S[A],R.duration=+ml(h,Lr(l),A,X,S),R.delay=(+ml(f,Lr(l),A,X,S)||0)-l._delay,!g&&T===1&&R.delay&&(l._delay=f=R.delay,l._start+=f,R.delay=0),M.to(X,R,H(A,X,S))}M.duration()?h=f=0:l.timeline=0}h||l.duration(h=M.duration())}else l.timeline=0;return p===!0&&!Uf&&(ss=Lr(l),jt.killTweensOf(S),ss=0),ir(y,Lr(l),r),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(d||!h&&!_&&l._start===Rn(y._time)&&Qn(d)&&VA(Lr(l))&&y.data!=="nested")&&(l._tTime=-Dt,l.render(Math.max(0,-f))),b&&h0(Lr(l),b),l}var t=e.prototype;return t.render=function(i,r,s){var l=this._time,c=this._tDur,h=this._dur,f=i>c-Dt&&i>=0?c:i<Dt?0:i,d,g,p,_,x,b,v,y,S;if(!h)XA(this,i,r,s);else if(f!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=i<0){if(d=f,y=this.timeline,this._repeat){if(_=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(_*100+i,r,s);if(d=Rn(f%_),f===c?(p=this._repeat,d=h):(p=~~(f/_),p&&p===f/_&&(d=h,p--),d>h&&(d=h)),b=this._yoyo&&p&1,b&&(S=this._yEase,d=h-d),x=zo(this._tTime,_),d===l&&!s&&this._initted)return this;p!==x&&(y&&this._yEase&&A0(y,b),this.vars.repeatRefresh&&!b&&!this._lock&&(this._lock=s=1,this.render(Rn(_*p),!0).invalidate()._lock=0))}if(!this._initted){if(f0(this,i<0?i:d,s,r))return this._tTime=0,this;if(h!==this._dur)return this.render(i,r,s)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(S||this._ease)(d/h),this._from&&(this.ratio=v=1-v),d&&!l&&!r&&(Ii(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(v,g.d),g=g._next;y&&y.render(i<0?i:!d&&b?-Dt:y._dur*v,r,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(i<0&&this._startAt&&this._startAt.render(i,!0,s),Ii(this,"onUpdate")),this._repeat&&p!==x&&this.vars.onRepeat&&!r&&this.parent&&Ii(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(i<0&&this._startAt&&!this._onUpdate&&this._startAt.render(i,!0,!0),(i||!h)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&ns(this,1),!r&&!(i<0&&!l)&&(f||l)&&(Ii(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),a.prototype.invalidate.call(this)},t.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?fl(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,ss&&ss.vars.overwrite!==!0)._first||fl(this),this.parent&&s!==this.timeline.totalDuration()&&ko(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,c=i?Pi(i):l,h=this._ptLookup,f=this._pt,d,g,p,_,x,b,v;if((!r||r==="all")&&kA(l,c))return r==="all"&&(this._pt=0),fl(this);for(d=this._op=this._op||[],r!=="all"&&(Mn(r)&&(x={},mi(r,function(y){return x[y]=1}),r=x),r=dL(l,r)),v=l.length;v--;)if(~c.indexOf(l[v])){g=h[v],r==="all"?(d[v]=r,_=g,p={}):(p=d[v]=d[v]||{},_=r);for(x in _)b=g&&g[x],b&&((!("kill"in b.d)||b.d.kill(x)===!0)&&nu(this,b,"_pt"),delete g[x]),p!=="all"&&(p[x]=1)}return this._initted&&!this._pt&&f&&fl(this),this},e.to=function(i,r){return new e(i,r,arguments[2])},e.from=function(i,r){return cl(1,arguments)},e.delayedCall=function(i,r,s,l){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},e.fromTo=function(i,r,s){return cl(2,arguments)},e.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(i,r)},e.killTweensOf=function(i,r,s){return jt.killTweensOf(i,r,s)},e}(pl);Ri(vn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});mi("staggerTo,staggerFrom,staggerFromTo",function(a){vn[a]=function(){var e=new ei,t=Qf.call(arguments,0);return t.splice(a==="staggerFromTo"?5:4,0,0),e[a].apply(e,t)}});var sd=function(e,t,n){return e[t]=n},I0=function(e,t,n){return e[t](n)},mL=function(e,t,n,i){return e[t](i.fp,n)},gL=function(e,t,n){return e.setAttribute(t,n)},od=function(e,t){return _n(e[t])?I0:kf(e[t])&&e.setAttribute?gL:sd},D0=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},_L=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},O0=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},ad=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},vL=function(e,t,n,i){for(var r=this._pt,s;r;)s=r._next,r.p===i&&r.modifier(e,t,n),r=s},xL=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?nu(this,t,"_pt"):t.dep||(n=1),t=i;return!n},yL=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},F0=function(e){for(var t=e._pt,n,i,r,s;t;){for(n=t._next,i=r;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:s)?t._prev._next=t:r=t,(t._next=i)?i._prev=t:s=t,t=n}e._pt=r},ti=function(){function a(t,n,i,r,s,l,c,h,f){this.t=n,this.s=r,this.c=s,this.p=i,this.r=l||D0,this.d=c||this,this.set=h||sd,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=a.prototype;return e.modifier=function(n,i,r){this.mSet=this.mSet||this.set,this.set=yL,this.m=n,this.mt=r,this.tween=i},a}();mi(Zf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(a){return Yf[a]=1});di.TweenMax=di.TweenLite=vn;di.TimelineLite=di.TimelineMax=ei;jt=new ei({sortChildren:!1,defaults:Fo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});$n.stringFilter=T0;var ou={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return iL(i)})},timeline:function(e){return new ei(e)},getTweensOf:function(e,t){return jt.getTweensOf(e,t)},getProperty:function(e,t,n,i){Mn(e)&&(e=Pi(e)[0]);var r=Xs(e||{}).get,s=n?o0:s0;return n==="native"&&(n=""),e&&(t?s((pi[t]&&pi[t].get||r)(e,t,n,i)):function(l,c,h){return s((pi[l]&&pi[l].get||r)(e,l,c,h))})},quickSetter:function(e,t,n){if(e=Pi(e),e.length>1){var i=e.map(function(f){return rr.quickSetter(f,t,n)}),r=i.length;return function(f){for(var d=r;d--;)i[d](f)}}e=e[0]||{};var s=pi[t],l=Xs(e),c=l.harness&&(l.harness.aliases||{})[t]||t,h=s?function(f){var d=new s;Go._pt=0,d.init(e,n?f+n:f,Go,0,[e]),d.render(1,d),Go._pt&&ad(1,Go)}:l.set(e,c);return s?h:function(f){return h(e,c,n?f+n:f,l,1)}},isTweening:function(e){return jt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Vo(e.ease,Fo.ease)),a0(Fo,e||{})},config:function(e){return a0($n,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,s=e.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!pi[l]&&!di[l]&&Qc(t+" effect requires "+l+" plugin.")}),jf[t]=function(l,c,h){return n(Pi(l),Ri(c||{},r),h)},s&&(ei.prototype[t]=function(l,c,h){return this.add(jf[t](l,Cr(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){mt[e]=Vo(t)},parseEase:function(e,t){return arguments.length?Vo(e,t):mt},getById:function(e){return jt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ei(e),i,r;for(n.smoothChildTiming=Qn(e.smoothChildTiming),jt.remove(n),n._dp=0,n._time=n._tTime=jt._time,i=jt._first;i;)r=i._next,(t||!(!i._dur&&i instanceof vn&&i.vars.onComplete===i._targets[0]))&&ir(n,i,i._start-i._delay),i=r;return ir(jt,n,0),n},utils:{wrap:eL,wrapYoyo:tL,distribute:g0,random:v0,snap:_0,normalize:QA,getUnit:gi,clamp:jA,splitColor:b0,toArray:Pi,selector:JA,mapRange:y0,pipe:KA,unitize:$A,interpolate:nL,shuffle:m0},install:Q_,effects:jf,ticker:Di,updateRoot:ei.updateRoot,plugins:pi,globalTimeline:jt,core:{PropTween:ti,globals:e0,Tween:vn,Timeline:ei,Animation:pl,getCache:Xs,_removeLinkedListItem:nu,suppressOverwrites:function(e){return Uf=e}}};mi("to,from,fromTo,delayedCall,set,killTweensOf",function(a){return ou[a]=vn[a]});Di.add(ei.updateRoot);Go=ou.to({},{duration:0});var wL=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},bL=function(e,t){var n=e._targets,i,r,s;for(i in t)for(r=n.length;r--;)s=e._ptLookup[r][i],s&&(s=s.d)&&(s._pt&&(s=wL(s,i)),s&&s.modifier&&s.modifier(t[i],e,n[r],i))},ld=function(e,t){return{name:e,rawVars:1,init:function(i,r,s){s._onInit=function(l){var c,h;if(Mn(r)&&(c={},mi(r,function(f){return c[f]=1}),r=c),t){c={};for(h in r)c[h]=t(r[h]);r=c}bL(l,r)}}}},rr=ou.registerPlugin({name:"attr",init:function(e,t,n,i,r){var s,l;for(s in t)l=this.add(e,"setAttribute",(e.getAttribute(s)||0)+"",t[s],i,r,0,0,s),l&&(l.op=s),this._props.push(s)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},ld("roundProps",ed),ld("modifiers"),ld("snap",_0))||ou;vn.version=ei.version=rr.version="3.8.0";$_=1;Y_()&&Ho();mt.Power0;mt.Power1;mt.Power2;mt.Power3;mt.Power4;mt.Linear;mt.Quad;mt.Cubic;mt.Quart;mt.Quint;mt.Strong;mt.Elastic;mt.Back;mt.SteppedEase;mt.Bounce;mt.Sine;var SF=mt.Expo;mt.Circ;/*!
 * CSSPlugin 3.8.0
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var N0,os,Wo,cd,js,B0,ML=function(){return typeof window!="undefined"},as={},Zs=180/Math.PI,Xo=Math.PI/180,Yo=Math.atan2,U0=1e8,z0=/([A-Z])/g,SL=/(?:left|right|width|margin|padding|x)/i,TL=/[\s,\(]\S/,ls={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},k0=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},EL=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},AL=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},LL=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},G0=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},H0=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},RL=function(e,t,n){return e.style[t]=n},CL=function(e,t,n){return e.style.setProperty(t,n)},PL=function(e,t,n){return e._gsap[t]=n},IL=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},DL=function(e,t,n,i,r){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},OL=function(e,t,n,i,r){var s=e._gsap;s[t]=n,s.renderTransform(r,s)},Sn="transform",cs=Sn+"Origin",V0,ud=function(e,t){var n=os.createElementNS?os.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):os.createElement(e);return n.style?n:os.createElement(e)},Pr=function a(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(z0,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&a(e,qo(t)||t,1)||""},W0="O,Moz,ms,Ms,Webkit".split(","),qo=function(e,t,n){var i=t||js,r=i.style,s=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(W0[s]+e in r););return s<0?null:(s===3?"ms":s>=0?W0[s]:"")+e},hd=function(){ML()&&window.document&&(N0=window,os=N0.document,Wo=os.documentElement,js=ud("div")||{style:{}},ud("div"),Sn=qo(Sn),cs=Sn+"Origin",js.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",V0=!!qo("perspective"),cd=1)},fd=function a(e){var t=ud("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,r=this.style.cssText,s;if(Wo.appendChild(t),t.appendChild(this),this.style.display="block",e)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=a}catch{}else this._gsapBBox&&(s=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),Wo.removeChild(t),this.style.cssText=r,s},X0=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Y0=function(e){var t;try{t=e.getBBox()}catch{t=fd.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===fd||(t=fd.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+X0(e,["x","cx","x1"])||0,y:+X0(e,["y","cy","y1"])||0,width:0,height:0}:t},q0=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Y0(e))},gl=function(e,t){if(t){var n=e.style;t in as&&t!==cs&&(t=Sn),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(z0,"-$1").toLowerCase())):n.removeAttribute(t)}},us=function(e,t,n,i,r,s){var l=new ti(e._pt,t,n,0,1,s?H0:G0);return e._pt=l,l.b=i,l.e=r,e._props.push(n),l},j0={deg:1,rad:1,turn:1},hs=function a(e,t,n,i){var r=parseFloat(n)||0,s=(n+"").trim().substr((r+"").length)||"px",l=js.style,c=SL.test(t),h=e.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(c?"Width":"Height"),d=100,g=i==="px",p=i==="%",_,x,b,v;return i===s||!r||j0[i]||j0[s]?r:(s!=="px"&&!g&&(r=a(e,t,n,"px")),v=e.getCTM&&q0(e),(p||s==="%")&&(as[t]||~t.indexOf("adius"))?(_=v?e.getBBox()[c?"width":"height"]:e[f],an(p?r/_*d:r/100*_)):(l[c?"width":"height"]=d+(g?s:i),x=~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,v&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===os||!x.appendChild)&&(x=os.body),b=x._gsap,b&&p&&b.width&&c&&b.time===Di.time?an(r/b.width*d):((p||s==="%")&&(l.position=Pr(e,"position")),x===e&&(l.position="static"),x.appendChild(js),_=js[f],x.removeChild(js),l.position="absolute",c&&p&&(b=Xs(x),b.time=Di.time,b.width=x[f]),an(g?_*r/d:_&&r?d/_*r:0))))},jo=function(e,t,n,i){var r;return cd||hd(),t in ls&&t!=="transform"&&(t=ls[t],~t.indexOf(",")&&(t=t.split(",")[0])),as[t]&&t!=="transform"?(r=vl(e,i),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:lu(Pr(e,cs))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=au[t]&&au[t](e,t,n)||Pr(e,t)||i0(e,t)||(t==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?hs(e,t,r,n)+n:r},FL=function(e,t,n,i){if(!n||n==="none"){var r=qo(t,e,1),s=r&&Pr(e,r,1);s&&s!==n?(t=r,n=s):t==="borderColor"&&(n=Pr(e,"borderTopColor"))}var l=new ti(this._pt,e.style,t,0,1,O0),c=0,h=0,f,d,g,p,_,x,b,v,y,S,M,A,R;if(l.b=n,l.e=i,n+="",i+="",i==="auto"&&(e.style[t]=i,i=Pr(e,t)||i,e.style[t]=n),f=[n,i],T0(f),n=f[0],i=f[1],g=n.match(No)||[],R=i.match(No)||[],R.length){for(;d=No.exec(i);)b=d[0],y=i.substring(c,d.index),_?_=(_+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(_=1),b!==(x=g[h++]||"")&&(p=parseFloat(x)||0,M=x.substr((p+"").length),A=b.charAt(1)==="="?+(b.charAt(0)+"1"):0,A&&(b=b.substr(2)),v=parseFloat(b),S=b.substr((v+"").length),c=No.lastIndex-S.length,S||(S=S||$n.units[t]||M,c===i.length&&(i+=S,l.e+=S)),M!==S&&(p=hs(e,t,x,S)||0),l._pt={_next:l._pt,p:y||h===1?y:",",s:p,c:A?A*v:v-p,m:_&&_<4||t==="zIndex"?Math.round:0});l.c=c<i.length?i.substring(c,i.length):""}else l.r=t==="display"&&i==="none"?H0:G0;return J_.test(i)&&(l.e=0),this._pt=l,l},Z0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},NL=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=Z0[n]||n,t[1]=Z0[i]||i,t.join(" ")},BL=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,r=t.u,s=n._gsap,l,c,h;if(r==="all"||r===!0)i.cssText="",c=1;else for(r=r.split(","),h=r.length;--h>-1;)l=r[h],as[l]&&(c=1,l=l==="transformOrigin"?cs:Sn),gl(n,l);c&&(gl(n,Sn),s&&(s.svg&&n.removeAttribute("transform"),vl(n,1),s.uncache=1))}},au={clearProps:function(e,t,n,i,r){if(r.data!=="isFromStart"){var s=e._pt=new ti(e._pt,t,n,0,0,BL);return s.u=i,s.pr=-10,s.tween=r,e._props.push(n),1}}},_l=[1,0,0,1,0,0],J0={},K0=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},$0=function(e){var t=Pr(e,Sn);return K0(t)?_l:t.substr(7).match(Z_).map(an)},dd=function(e,t){var n=e._gsap||Xs(e),i=e.style,r=$0(e),s,l,c,h;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,r=[c.a,c.b,c.c,c.d,c.e,c.f],r.join(",")==="1,0,0,1,0,0"?_l:r):(r===_l&&!e.offsetParent&&e!==Wo&&!n.svg&&(c=i.display,i.display="block",s=e.parentNode,(!s||!e.offsetParent)&&(h=1,l=e.nextSibling,Wo.appendChild(e)),r=$0(e),c?i.display=c:gl(e,"display"),h&&(l?s.insertBefore(e,l):s?s.appendChild(e):Wo.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},pd=function(e,t,n,i,r,s){var l=e._gsap,c=r||dd(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,d=l.xOffset||0,g=l.yOffset||0,p=c[0],_=c[1],x=c[2],b=c[3],v=c[4],y=c[5],S=t.split(" "),M=parseFloat(S[0])||0,A=parseFloat(S[1])||0,R,T,N,X;n?c!==_l&&(T=p*b-_*x)&&(N=M*(b/T)+A*(-x/T)+(x*y-b*v)/T,X=M*(-_/T)+A*(p/T)-(p*y-_*v)/T,M=N,A=X):(R=Y0(e),M=R.x+(~S[0].indexOf("%")?M/100*R.width:M),A=R.y+(~(S[1]||S[0]).indexOf("%")?A/100*R.height:A)),i||i!==!1&&l.smooth?(v=M-h,y=A-f,l.xOffset=d+(v*p+y*x)-v,l.yOffset=g+(v*_+y*b)-y):l.xOffset=l.yOffset=0,l.xOrigin=M,l.yOrigin=A,l.smooth=!!i,l.origin=t,l.originIsAbsolute=!!n,e.style[cs]="0px 0px",s&&(us(s,l,"xOrigin",h,M),us(s,l,"yOrigin",f,A),us(s,l,"xOffset",d,l.xOffset),us(s,l,"yOffset",g,l.yOffset)),e.setAttribute("data-svg-origin",M+" "+A)},vl=function(e,t){var n=e._gsap||new R0(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,r=n.scaleX<0,s="px",l="deg",c=Pr(e,cs)||"0",h,f,d,g,p,_,x,b,v,y,S,M,A,R,T,N,X,H,O,te,V,Y,$,W,ee,re,Le,J,ve,ze,fe,Me;return h=f=d=_=x=b=v=y=S=0,g=p=1,n.svg=!!(e.getCTM&&q0(e)),R=dd(e,n.svg),n.svg&&(W=(!n.uncache||c==="0px 0px")&&!t&&e.getAttribute("data-svg-origin"),pd(e,W||c,!!W||n.originIsAbsolute,n.smooth!==!1,R)),M=n.xOrigin||0,A=n.yOrigin||0,R!==_l&&(H=R[0],O=R[1],te=R[2],V=R[3],h=Y=R[4],f=$=R[5],R.length===6?(g=Math.sqrt(H*H+O*O),p=Math.sqrt(V*V+te*te),_=H||O?Yo(O,H)*Zs:0,v=te||V?Yo(te,V)*Zs+_:0,v&&(p*=Math.abs(Math.cos(v*Xo))),n.svg&&(h-=M-(M*H+A*te),f-=A-(M*O+A*V))):(Me=R[6],ze=R[7],Le=R[8],J=R[9],ve=R[10],fe=R[11],h=R[12],f=R[13],d=R[14],T=Yo(Me,ve),x=T*Zs,T&&(N=Math.cos(-T),X=Math.sin(-T),W=Y*N+Le*X,ee=$*N+J*X,re=Me*N+ve*X,Le=Y*-X+Le*N,J=$*-X+J*N,ve=Me*-X+ve*N,fe=ze*-X+fe*N,Y=W,$=ee,Me=re),T=Yo(-te,ve),b=T*Zs,T&&(N=Math.cos(-T),X=Math.sin(-T),W=H*N-Le*X,ee=O*N-J*X,re=te*N-ve*X,fe=V*X+fe*N,H=W,O=ee,te=re),T=Yo(O,H),_=T*Zs,T&&(N=Math.cos(T),X=Math.sin(T),W=H*N+O*X,ee=Y*N+$*X,O=O*N-H*X,$=$*N-Y*X,H=W,Y=ee),x&&Math.abs(x)+Math.abs(_)>359.9&&(x=_=0,b=180-b),g=an(Math.sqrt(H*H+O*O+te*te)),p=an(Math.sqrt($*$+Me*Me)),T=Yo(Y,$),v=Math.abs(T)>2e-4?T*Zs:0,S=fe?1/(fe<0?-fe:fe):0),n.svg&&(W=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!K0(Pr(e,Sn)),W&&e.setAttribute("transform",W))),Math.abs(v)>90&&Math.abs(v)<270&&(r?(g*=-1,v+=_<=0?180:-180,_+=_<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),n.x=h-((n.xPercent=h&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+s,n.y=f-((n.yPercent=f&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+s,n.z=d+s,n.scaleX=an(g),n.scaleY=an(p),n.rotation=an(_)+l,n.rotationX=an(x)+l,n.rotationY=an(b)+l,n.skewX=v+l,n.skewY=y+l,n.transformPerspective=S+s,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(i[cs]=lu(c)),n.xOffset=n.yOffset=0,n.force3D=$n.force3D,n.renderTransform=n.svg?zL:V0?Q0:UL,n.uncache=0,n},lu=function(e){return(e=e.split(" "))[0]+" "+e[1]},md=function(e,t,n){var i=gi(t);return an(parseFloat(t)+parseFloat(hs(e,"x",n+"px",i)))+i},UL=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Q0(e,t)},Js="0deg",xl="0px",Ks=") ",Q0=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,s=n.x,l=n.y,c=n.z,h=n.rotation,f=n.rotationY,d=n.rotationX,g=n.skewX,p=n.skewY,_=n.scaleX,x=n.scaleY,b=n.transformPerspective,v=n.force3D,y=n.target,S=n.zOrigin,M="",A=v==="auto"&&e&&e!==1||v===!0;if(S&&(d!==Js||f!==Js)){var R=parseFloat(f)*Xo,T=Math.sin(R),N=Math.cos(R),X;R=parseFloat(d)*Xo,X=Math.cos(R),s=md(y,s,T*X*-S),l=md(y,l,-Math.sin(R)*-S),c=md(y,c,N*X*-S+S)}b!==xl&&(M+="perspective("+b+Ks),(i||r)&&(M+="translate("+i+"%, "+r+"%) "),(A||s!==xl||l!==xl||c!==xl)&&(M+=c!==xl||A?"translate3d("+s+", "+l+", "+c+") ":"translate("+s+", "+l+Ks),h!==Js&&(M+="rotate("+h+Ks),f!==Js&&(M+="rotateY("+f+Ks),d!==Js&&(M+="rotateX("+d+Ks),(g!==Js||p!==Js)&&(M+="skew("+g+", "+p+Ks),(_!==1||x!==1)&&(M+="scale("+_+", "+x+Ks),y.style[Sn]=M||"translate(0, 0)"},zL=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,s=n.x,l=n.y,c=n.rotation,h=n.skewX,f=n.skewY,d=n.scaleX,g=n.scaleY,p=n.target,_=n.xOrigin,x=n.yOrigin,b=n.xOffset,v=n.yOffset,y=n.forceCSS,S=parseFloat(s),M=parseFloat(l),A,R,T,N,X;c=parseFloat(c),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,c+=f),c||h?(c*=Xo,h*=Xo,A=Math.cos(c)*d,R=Math.sin(c)*d,T=Math.sin(c-h)*-g,N=Math.cos(c-h)*g,h&&(f*=Xo,X=Math.tan(h-f),X=Math.sqrt(1+X*X),T*=X,N*=X,f&&(X=Math.tan(f),X=Math.sqrt(1+X*X),A*=X,R*=X)),A=an(A),R=an(R),T=an(T),N=an(N)):(A=d,N=g,R=T=0),(S&&!~(s+"").indexOf("px")||M&&!~(l+"").indexOf("px"))&&(S=hs(p,"x",s,"px"),M=hs(p,"y",l,"px")),(_||x||b||v)&&(S=an(S+_-(_*A+x*T)+b),M=an(M+x-(_*R+x*N)+v)),(i||r)&&(X=p.getBBox(),S=an(S+i/100*X.width),M=an(M+r/100*X.height)),X="matrix("+A+","+R+","+T+","+N+","+S+","+M+")",p.setAttribute("transform",X),y&&(p.style[Sn]=X)},kL=function(e,t,n,i,r,s){var l=360,c=Mn(r),h=parseFloat(r)*(c&&~r.indexOf("rad")?Zs:1),f=s?h*s:h-i,d=i+f+"deg",g,p;return c&&(g=r.split("_")[1],g==="short"&&(f%=l,f!==f%(l/2)&&(f+=f<0?l:-l)),g==="cw"&&f<0?f=(f+l*U0)%l-~~(f/l)*l:g==="ccw"&&f>0&&(f=(f-l*U0)%l-~~(f/l)*l)),e._pt=p=new ti(e._pt,t,n,i,f,EL),p.e=d,p.u="deg",e._props.push(n),p},ev=function(e,t){for(var n in t)e[n]=t[n];return e},GL=function(e,t,n){var i=ev({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",s=n.style,l,c,h,f,d,g,p,_;i.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),s[Sn]=t,l=vl(n,1),gl(n,Sn),n.setAttribute("transform",h)):(h=getComputedStyle(n)[Sn],s[Sn]=t,l=vl(n,1),s[Sn]=h);for(c in as)h=i[c],f=l[c],h!==f&&r.indexOf(c)<0&&(p=gi(h),_=gi(f),d=p!==_?hs(n,c,h,_):parseFloat(h),g=parseFloat(f),e._pt=new ti(e._pt,l,c,d,g-d,k0),e._pt.u=_||0,e._props.push(c));ev(l,i)};mi("padding,margin,Width,Radius",function(a,e){var t="Top",n="Right",i="Bottom",r="Left",s=(e<3?[t,n,i,r]:[t+r,t+n,i+n,i+r]).map(function(l){return e<2?a+l:"border"+l+a});au[e>1?"border"+a:a]=function(l,c,h,f,d){var g,p;if(arguments.length<4)return g=s.map(function(_){return jo(l,_,h)}),p=g.join(" "),p.split(g[0]).length===5?g[0]:p;g=(f+"").split(" "),p={},s.forEach(function(_,x){return p[_]=g[x]=g[x]||g[(x-1)/2|0]}),l.init(c,p,d)}});var tv={name:"css",register:hd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var s=this._props,l=e.style,c=n.vars.startAt,h,f,d,g,p,_,x,b,v,y,S,M,A,R,T;cd||hd();for(x in t)if(x!=="autoRound"&&(f=t[x],!(pi[x]&&C0(x,t,n,i,e,r)))){if(p=typeof f,_=au[x],p==="function"&&(f=f.call(n,i,e,r),p=typeof f),p==="string"&&~f.indexOf("random(")&&(f=hl(f)),_)_(this,e,x,f,n)&&(T=1);else if(x.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(x)+"").trim(),f+="",rs.lastIndex=0,rs.test(h)||(b=gi(h),v=gi(f)),v?b!==v&&(h=hs(e,x,h,v)+v):b&&(f+=b),this.add(l,"setProperty",h,f,i,r,0,0,x),s.push(x);else if(p!=="undefined"){if(c&&x in c?(h=typeof c[x]=="function"?c[x].call(n,i,e,r):c[x],x in $n.units&&!gi(h)&&(h+=$n.units[x]),Mn(h)&&~h.indexOf("random(")&&(h=hl(h)),(h+"").charAt(1)==="="&&(h=jo(e,x))):h=jo(e,x),g=parseFloat(h),y=p==="string"&&f.charAt(1)==="="?+(f.charAt(0)+"1"):0,y&&(f=f.substr(2)),d=parseFloat(f),x in ls&&(x==="autoAlpha"&&(g===1&&jo(e,"visibility")==="hidden"&&d&&(g=0),us(this,l,"visibility",g?"inherit":"hidden",d?"inherit":"hidden",!d)),x!=="scale"&&x!=="transform"&&(x=ls[x],~x.indexOf(",")&&(x=x.split(",")[0]))),S=x in as,S){if(M||(A=e._gsap,A.renderTransform&&!t.parseTransform||vl(e,t.parseTransform),R=t.smoothOrigin!==!1&&A.smooth,M=this._pt=new ti(this._pt,l,Sn,0,1,A.renderTransform,A,0,-1),M.dep=1),x==="scale")this._pt=new ti(this._pt,A,"scaleY",A.scaleY,(y?y*d:d-A.scaleY)||0),s.push("scaleY",x),x+="X";else if(x==="transformOrigin"){f=NL(f),A.svg?pd(e,f,0,R,0,this):(v=parseFloat(f.split(" ")[2])||0,v!==A.zOrigin&&us(this,A,"zOrigin",A.zOrigin,v),us(this,l,x,lu(h),lu(f)));continue}else if(x==="svgOrigin"){pd(e,f,1,R,0,this);continue}else if(x in J0){kL(this,A,x,g,f,y);continue}else if(x==="smoothOrigin"){us(this,A,"smooth",A.smooth,f);continue}else if(x==="force3D"){A[x]=f;continue}else if(x==="transform"){GL(this,f,e);continue}}else x in l||(x=qo(x)||x);if(S||(d||d===0)&&(g||g===0)&&!TL.test(f)&&x in l)b=(h+"").substr((g+"").length),d||(d=0),v=gi(f)||(x in $n.units?$n.units[x]:b),b!==v&&(g=hs(e,x,h,v)),this._pt=new ti(this._pt,S?A:l,x,g,y?y*d:d-g,!S&&(v==="px"||x==="zIndex")&&t.autoRound!==!1?LL:k0),this._pt.u=v||0,b!==v&&v!=="%"&&(this._pt.b=h,this._pt.r=AL);else if(x in l)FL.call(this,e,x,h,f);else if(x in e)this.add(e,x,h||e[x],f,i,r);else{Xf(x,f);continue}s.push(x)}}T&&F0(this)},get:jo,aliases:ls,getSetter:function(e,t,n){var i=ls[t];return i&&i.indexOf(",")<0&&(t=i),t in as&&t!==cs&&(e._gsap.x||jo(e,"x"))?n&&B0===n?t==="scale"?IL:PL:(B0=n||{})&&(t==="scale"?DL:OL):e.style&&!kf(e.style[t])?RL:~t.indexOf("-")?CL:od(e,t)},core:{_removeProperty:gl,_getMatrix:dd}};rr.utils.checkPrefix=qo;(function(a,e,t,n){var i=mi(a+","+e+","+t,function(r){as[r]=1});mi(e,function(r){$n.units[r]="deg",J0[r]=1}),ls[i[13]]=a+","+e,mi(n,function(r){var s=r.split(":");ls[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");mi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(a){$n.units[a]="px"});rr.registerPlugin(tv);var HL=rr.registerPlugin(tv)||rr;HL.core.Tween;/*!
 * ScrollTrigger 3.8.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rt,Zo,Gt,Cn,Ir,nn,nv,gd,iv,_d,yl,cu,uu,vd,Un,hu,xd,zn,rv,sv,Jo,ov,yd,av,wd,wl=1,$s=[],Qs=[],fs=Date.now,bd=fs(),Oi=0,lv=1,fu=function(e){return e},sr=function(e){return yl(e)[0]||(Xi(e)?console.warn("Element not found:",e):null)},cv=function(e){return Math.round(e*1e5)/1e5||0},uv=function(){return typeof window!="undefined"},hv=function(){return rt||uv()&&(rt=window.gsap)&&rt.registerPlugin&&rt},Ko=function(e){return!!~nv.indexOf(e)},eo=function(e,t){return~$s.indexOf(e)&&$s[$s.indexOf(e)+1][t]},du=function(e,t){var n=t.s,i=t.sc,r=Qs.indexOf(e),s=i===Gn.sc?1:2;return!~r&&(r=Qs.push(e)-1),Qs[r+s]||(Qs[r+s]=eo(e,n)||(Ko(e)?i:function(l){return arguments.length?e[n]=l:e[n]}))},fv=function(e){return eo(e,"getBoundingClientRect")||(Ko(e)?function(){return Cu.width=Gt.innerWidth,Cu.height=Gt.innerHeight,Cu}:function(){return Or(e)})},VL=function(e,t,n){var i=n.d,r=n.d2,s=n.a;return(s=eo(e,"getBoundingClientRect"))?function(){return s()[i]}:function(){return(t?Gt["inner"+r]:e["client"+r])||0}},WL=function(e,t){return!t||~$s.indexOf(e)?fv(e):function(){return Cu}},Md=function(e,t){var n=t.s,i=t.d2,r=t.d,s=t.a;return(n="scroll"+i)&&(s=eo(e,n))?s()-fv(e)()[r]:Ko(e)?(nn[n]||Ir[n])-(Gt["inner"+i]||Ir["client"+i]||nn["client"+i]):e[n]-e["offset"+i]},Sd=function(e,t){for(var n=0;n<Jo.length;n+=3)(!t||~t.indexOf(Jo[n+1]))&&e(Jo[n],Jo[n+1],Jo[n+2])},Xi=function(e){return typeof e=="string"},or=function(e){return typeof e=="function"},bl=function(e){return typeof e=="number"},Td=function(e){return typeof e=="object"},pu=function(e){return or(e)&&e()},dv=function(e,t){return function(){var n=pu(e),i=pu(t);return function(){pu(n),pu(i)}}},Ml=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Ed=function(e,t){var n=t(e);n&&n.totalTime&&(e.callbackAnimation=n)},$o=Math.abs,mu="scrollLeft",gu="scrollTop",Ad="left",Ld="top",_u="right",vu="bottom",ds="width",ps="height",Qo="Right",ea="Left",ta="Top",na="Bottom",ln="padding",Fi="margin",to="Width",xu="Height",kn="px",Yi={s:mu,p:Ad,p2:ea,os:_u,os2:Qo,d:ds,d2:to,a:"x",sc:function(e){return arguments.length?Gt.scrollTo(e,Gn.sc()):Gt.pageXOffset||Cn[mu]||Ir[mu]||nn[mu]||0}},Gn={s:gu,p:Ld,p2:ta,os:vu,os2:na,d:ps,d2:xu,a:"y",op:Yi,sc:function(e){return arguments.length?Gt.scrollTo(Yi.sc(),e):Gt.pageYOffset||Cn[gu]||Ir[gu]||nn[gu]||0}},Dr=function(e){return Gt.getComputedStyle(e)},XL=function(e){var t=Dr(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},pv=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Or=function(e,t){var n=t&&Dr(e)[xd]!=="matrix(1, 0, 0, 1, 0, 0)"&&rt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return n&&n.progress(0).kill(),i},Rd=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},mv=function(e){var t=[],n=e.labels,i=e.duration(),r;for(r in n)t.push(n[r]/i);return t},YL=function(e){return function(t){return rt.utils.snap(mv(e),t)}},Cd=function(e){var t=rt.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(i,r){return i-r});return n?function(i,r){var s;if(!r)return t(i);if(r>0){for(i-=1e-4,s=0;s<n.length;s++)if(n[s]>=i)return n[s];return n[s-1]}else for(s=n.length,i+=1e-4;s--;)if(n[s]<=i)return n[s];return n[0]}:function(i,r){var s=t(i);return!r||Math.abs(s-i)<.001||s-i<0==r<0?s:t(r<0?i-e:i+e)}},qL=function(e){return function(t,n){return Cd(mv(e))(t,n.direction)}},gv=function(e,t,n,i){return n.split(",").forEach(function(r){return e(t,r,i)})},ni=function(e,t,n){return e.addEventListener(t,n,{passive:!0})},Sl=function(e,t,n){return e.removeEventListener(t,n)},_v={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Pd={toggleActions:"play",anticipatePin:0},yu={top:0,left:0,center:.5,bottom:1,right:1},wu=function(e,t){if(Xi(e)){var n=e.indexOf("="),i=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(i*=t/100),e=e.substr(0,n-1)),e=i+(e in yu?yu[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},bu=function(e,t,n,i,r,s,l,c){var h=r.startColor,f=r.endColor,d=r.fontSize,g=r.indent,p=r.fontWeight,_=Cn.createElement("div"),x=Ko(n)||eo(n,"pinType")==="fixed",b=e.indexOf("scroller")!==-1,v=x?nn:n,y=e.indexOf("start")!==-1,S=y?h:f,M="border-color:"+S+";font-size:"+d+";color:"+S+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return M+="position:"+((b||c)&&x?"fixed;":"absolute;"),(b||c||!x)&&(M+=(i===Gn?_u:vu)+":"+(s+parseFloat(g))+"px;"),l&&(M+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),_._isStart=y,_.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),_.style.cssText=M,_.innerText=t||t===0?e+"-"+t:e,v.children[0]?v.insertBefore(_,v.children[0]):v.appendChild(_),_._offset=_["offset"+i.op.d2],Mu(_,0,i,y),_},Mu=function(e,t,n,i){var r={display:"block"},s=n[i?"os2":"p2"],l=n[i?"p2":"os2"];e._isFlipped=i,r[n.a+"Percent"]=i?-100:0,r[n.a]=i?"1px":0,r["border"+s+to]=1,r["border"+l+to]=0,r[n.p]=t+"px",rt.set(e,r)},bt=[],Id={},vv=function(){return fs()-Oi>20&&Au()},Su=function(){var e=fs();Oi!==e?(Au(),Oi||ra("scrollStart"),Oi=e):_d||(_d=iv(Au))},Tl=function(){return!Un&&!av&&!Cn.fullscreenElement&&gd.restart(!0)},El={},jL=[],Qt=[],ia,xv,yv=function(e){var t=rt.ticker.frame,n=[],i=0,r;if(xv!==t||wl){for(Tu();i<Qt.length;i+=4)r=Gt.matchMedia(Qt[i]).matches,r!==Qt[i+3]&&(Qt[i+3]=r,r?n.push(i):Tu(1,Qt[i])||or(Qt[i+2])&&Qt[i+2]());for(bv(),i=0;i<n.length;i++)r=n[i],ia=Qt[r],Qt[r+2]=Qt[r+1](e);ia=0,Zo&&sa(0,1),xv=t,ra("matchMedia")}},wv=function a(){return Sl(Ht,"scrollEnd",a)||sa(!0)},ra=function(e){return El[e]&&El[e].map(function(t){return t()})||jL},Ni=[],bv=function(e){for(var t=0;t<Ni.length;t+=5)(!e||Ni[t+4]===e)&&(Ni[t].style.cssText=Ni[t+1],Ni[t].getBBox&&Ni[t].setAttribute("transform",Ni[t+2]||""),Ni[t+3].uncache=1)},Tu=function(e,t){var n;for(zn=0;zn<bt.length;zn++)n=bt[zn],(!t||n.media===t)&&(e?n.kill(1):n.revert());t&&bv(t),t||ra("revert")},Mv=function(){return Qs.forEach(function(e){return typeof e=="function"&&(e.rec=0)})},Dd,sa=function(e,t){if(Oi&&!e){ni(Ht,"scrollEnd",wv);return}Dd=!0;var n=ra("refreshInit");ov&&Ht.sort(),t||Tu(),bt.forEach(function(i){return i.refresh()}),n.forEach(function(i){return i&&i.render&&i.render(-1)}),Mv(),gd.pause(),Dd=!1,ra("refresh")},Sv=0,Eu=1,Au=function(){if(!Dd){var e=bt.length,t=fs(),n=t-bd>=50,i=e&&bt[0].scroll();if(Eu=Sv>i?-1:1,Sv=i,n&&(Oi&&!hu&&t-Oi>200&&(Oi=0,ra("scrollEnd")),uu=bd,bd=t),Eu<0){for(zn=e;zn-- >0;)bt[zn]&&bt[zn].update(0,n);Eu=1}else for(zn=0;zn<e;zn++)bt[zn]&&bt[zn].update(0,n);_d=0}},Od=[Ad,Ld,vu,_u,Fi+na,Fi+Qo,Fi+ta,Fi+ea,"display","flexShrink","float","zIndex","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","justify-self","align-self","place-self"],Lu=Od.concat([ds,ps,"boxSizing","max"+to,"max"+xu,"position",Fi,ln,ln+ta,ln+Qo,ln+na,ln+ea]),ZL=function(e,t,n){Al(n);var i=e._gsap;if(i.spacerIsNative)Al(i.spacerState);else if(e.parentNode===t){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}},Fd=function(e,t,n,i){if(e.parentNode!==t){for(var r=Od.length,s=t.style,l=e.style,c;r--;)c=Od[r],s[c]=n[c];s.position=n.position==="absolute"?"absolute":"relative",n.display==="inline"&&(s.display="inline-block"),l[vu]=l[_u]="auto",s.overflow="visible",s.boxSizing="border-box",s[ds]=Rd(e,Yi)+kn,s[ps]=Rd(e,Gn)+kn,s[ln]=l[Fi]=l[Ld]=l[Ad]="0",Al(i),l[ds]=l["max"+to]=n[ds],l[ps]=l["max"+xu]=n[ps],l[ln]=n[ln],e.parentNode.insertBefore(t,e),t.appendChild(e)}},JL=/([A-Z])/g,Al=function(e){if(e){var t=e.t.style,n=e.length,i=0,r,s;for((e.t._gsap||rt.core.getCache(e.t)).uncache=1;i<n;i+=2)s=e[i+1],r=e[i],s?t[r]=s:t[r]&&t.removeProperty(r.replace(JL,"-$1").toLowerCase())}},Ru=function(e){for(var t=Lu.length,n=e.style,i=[],r=0;r<t;r++)i.push(Lu[r],n[Lu[r]]);return i.t=e,i},KL=function(e,t,n){for(var i=[],r=e.length,s=n?8:0,l;s<r;s+=2)l=e[s],i.push(l,l in t?t[l]:e[s+1]);return i.t=e.t,i},Cu={left:0,top:0},Tv=function(e,t,n,i,r,s,l,c,h,f,d,g,p){or(e)&&(e=e(c)),Xi(e)&&e.substr(0,3)==="max"&&(e=g+(e.charAt(4)==="="?wu("0"+e.substr(3),n):0));var _=p?p.time():0,x,b,v;if(p&&p.seek(0),bl(e))l&&Mu(l,n,i,!0);else{or(t)&&(t=t(c));var y=e.split(" "),S,M,A,R;v=sr(t)||nn,S=Or(v)||{},(!S||!S.left&&!S.top)&&Dr(v).display==="none"&&(R=v.style.display,v.style.display="block",S=Or(v),R?v.style.display=R:v.style.removeProperty("display")),M=wu(y[0],S[i.d]),A=wu(y[1]||"0",n),e=S[i.p]-h[i.p]-f+M+r-A,l&&Mu(l,A,i,n-A<20||l._isStart&&A>20),n-=n-A}if(s){var T=e+n,N=s._isStart;x="scroll"+i.d2,Mu(s,T,i,N&&T>20||!N&&(d?Math.max(nn[x],Ir[x]):s.parentNode[x])<=T+1),d&&(h=Or(l),d&&(s.style[i.op.p]=h[i.op.p]-i.op.m-s._offset+kn))}return p&&v&&(x=Or(v),p.seek(g),b=Or(v),p._caScrollDist=x[i.p]-b[i.p],e=e/p._caScrollDist*g),p&&p.seek(_),p?e:Math.round(e)},$L=/(?:webkit|moz|length|cssText|inset)/i,Ev=function(e,t,n,i){if(e.parentNode!==t){var r=e.style,s,l;if(t===nn){e._stOrig=r.cssText,l=Dr(e);for(s in l)!+s&&!$L.test(s)&&l[s]&&typeof r[s]=="string"&&s!=="0"&&(r[s]=l[s]);r.top=n,r.left=i}else r.cssText=e._stOrig;rt.core.getCache(e).uncache=1,t.appendChild(e)}},Av=function(e,t){var n=du(e,t),i="_scroll"+t.p2,r,s,l=function c(h,f,d,g,p){var _=c.tween,x=f.onComplete,b={};return _&&_.kill(),r=Math.round(d),f[i]=h,f.modifiers=b,b[i]=function(v){return v=cv(n()),v!==r&&v!==s&&Math.abs(v-r)>2?(_.kill(),c.tween=0):v=d+g*_.ratio+p*_.ratio*_.ratio,s=r,r=cv(v)},f.onComplete=function(){c.tween=0,x&&x.call(_)},_=c.tween=rt.to(e,f),_};return e[i]=n,e.addEventListener("wheel",function(){return l.tween&&l.tween.kill()&&(l.tween=0)},{passive:!0}),l};Yi.op=Gn;var Ht=function(){function a(t,n){Zo||a.register(rt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,n)}var e=a.prototype;return e.init=function(n,i){if(this.progress=this.start=0,this.vars&&this.kill(1),!lv){this.update=this.refresh=this.kill=fu;return}n=pv(Xi(n)||bl(n)||n.nodeType?{trigger:n}:n,Pd);var r=n,s=r.onUpdate,l=r.toggleClass,c=r.id,h=r.onToggle,f=r.onRefresh,d=r.scrub,g=r.trigger,p=r.pin,_=r.pinSpacing,x=r.invalidateOnRefresh,b=r.anticipatePin,v=r.onScrubComplete,y=r.onSnapComplete,S=r.once,M=r.snap,A=r.pinReparent,R=r.pinSpacer,T=r.containerAnimation,N=r.fastScrollEnd,X=r.preventOverlaps,H=n.horizontal||n.containerAnimation&&n.horizontal!==!1?Yi:Gn,O=!d&&d!==0,te=sr(n.scroller||Gt),V=rt.core.getCache(te),Y=Ko(te),$=("pinType"in n?n.pinType:eo(te,"pinType")||Y&&"fixed")==="fixed",W=[n.onEnter,n.onLeave,n.onEnterBack,n.onLeaveBack],ee=O&&n.toggleActions.split(" "),re="markers"in n?n.markers:Pd.markers,Le=Y?0:parseFloat(Dr(te)["border"+H.p2+to])||0,J=this,ve=n.onRefreshInit&&function(){return n.onRefreshInit(J)},ze=VL(te,Y,H),fe=WL(te,Y),Me=0,Te=du(te,H),z,F,k,ne,de,ge,Z,oe,ce,Se,xe,I,P,le,ye,we,Ae,We,ke,Xe,Be,q,Re,_e,Ue,Oe,tt,zt,Vt,Et,xt,Kt,on,pr,Ji,mr,Yn;if(J.media=ia,b*=45,J.scroller=te,J.scroll=T?T.time.bind(T):Te,ne=Te(),J.vars=n,i=i||n.animation,"refreshPriority"in n&&(ov=1),V.tweenScroll=V.tweenScroll||{top:Av(te,Gn),left:Av(te,Yi)},J.tweenTo=z=V.tweenScroll[H.p],i&&(i.vars.lazy=!1,i._initted||i.vars.immediateRender!==!1&&n.immediateRender!==!1&&i.render(0,!0,!0),J.animation=i.pause(),i.scrollTrigger=J,xt=bl(d)&&d,xt&&(Et=rt.to(i,{ease:"power3",duration:xt,onComplete:function(){return v&&v(J)}})),zt=0,c||(c=i.vars.id)),bt.push(J),M&&((!Td(M)||M.push)&&(M={snapTo:M}),"scrollBehavior"in nn.style&&rt.set(Y?[nn,Ir]:te,{scrollBehavior:"auto"}),k=or(M.snapTo)?M.snapTo:M.snapTo==="labels"?YL(i):M.snapTo==="labelsDirectional"?qL(i):M.directional!==!1?function(gt,dt){return Cd(M.snapTo)(gt,dt.direction)}:rt.utils.snap(M.snapTo),Kt=M.duration||{min:.1,max:2},Kt=Td(Kt)?cu(Kt.min,Kt.max):cu(Kt,Kt),on=rt.delayedCall(M.delay||xt/2||.1,function(){if(Math.abs(J.getVelocity())<10&&!hu&&Me!==Te()){var gt=i&&!O?i.totalProgress():J.progress,dt=(gt-Vt)/(fs()-uu)*1e3||0,_t=rt.utils.clamp(-J.progress,1-J.progress,$o(dt/2)*dt/.185),pt=J.progress+(M.inertia===!1?0:_t),yn=cu(0,1,k(pt,J)),$e=Te(),Ct=Math.round(ge+yn*P),Pt=M,D=Pt.onStart,Q=Pt.onInterrupt,ae=Pt.onComplete,ie=z.tween;if($e<=Z&&$e>=ge&&Ct!==$e){if(ie&&!ie._initted&&ie.data<=$o(Ct-$e))return;M.inertia===!1&&(_t=yn-J.progress),z(Ct,{duration:Kt($o(Math.max($o(pt-gt),$o(yn-gt))*.185/dt/.05||0)),ease:M.ease||"power3",data:$o(Ct-$e),onInterrupt:function(){return on.restart(!0)&&Q&&Q(J)},onComplete:function(){Me=Te(),zt=Vt=i&&!O?i.totalProgress():J.progress,y&&y(J),ae&&ae(J)}},$e,_t*P,Ct-$e-_t*P),D&&D(J,z.tween)}}else J.isActive&&on.restart(!0)}).pause()),c&&(Id[c]=J),g=J.trigger=sr(g||p),p=p===!0?g:sr(p),Xi(l)&&(l={targets:g,className:l}),p&&(_===!1||_===Fi||(_=!_&&Dr(p.parentNode).display==="flex"?!1:ln),J.pin=p,n.force3D!==!1&&rt.set(p,{force3D:!0}),F=rt.core.getCache(p),F.spacer?le=F.pinState:(R&&(R=sr(R),R&&!R.nodeType&&(R=R.current||R.nativeElement),F.spacerIsNative=!!R,R&&(F.spacerState=Ru(R))),F.spacer=Ae=R||Cn.createElement("div"),Ae.classList.add("pin-spacer"),c&&Ae.classList.add("pin-spacer-"+c),F.pinState=le=Ru(p)),J.spacer=Ae=F.spacer,tt=Dr(p),Re=tt[_+H.os2],ke=rt.getProperty(p),Xe=rt.quickSetter(p,H.a,kn),Fd(p,Ae,tt),we=Ru(p)),re&&(I=Td(re)?pv(re,_v):_v,Se=bu("scroller-start",c,te,H,I,0),xe=bu("scroller-end",c,te,H,I,0,Se),We=Se["offset"+H.op.d2],oe=bu("start",c,te,H,I,We,0,T),ce=bu("end",c,te,H,I,We,0,T),T&&(Yn=rt.quickSetter([oe,ce],H.a,kn)),!$&&!($s.length&&eo(te,"fixedMarkers")===!0)&&(XL(Y?nn:te),rt.set([Se,xe],{force3D:!0}),Ue=rt.quickSetter(Se,H.a,kn),Oe=rt.quickSetter(xe,H.a,kn))),T){var Os=T.vars.onUpdate,xo=T.vars.onUpdateParams;T.eventCallback("onUpdate",function(){J.update(0,0,1),Os&&Os.apply(xo||[])})}J.previous=function(){return bt[bt.indexOf(J)-1]},J.next=function(){return bt[bt.indexOf(J)+1]},J.revert=function(gt){var dt=gt!==!1||!J.enabled,_t=Un;dt!==J.isReverted&&(dt&&(J.scroll.rec||(J.scroll.rec=Te()),Ji=Math.max(Te(),J.scroll.rec||0),pr=J.progress,mr=i&&i.progress()),oe&&[oe,ce,Se,xe].forEach(function(pt){return pt.style.display=dt?"none":"block"}),dt&&(Un=1),J.update(dt),Un=_t,p&&(dt?ZL(p,Ae,le):(!A||!J.isActive)&&Fd(p,Ae,Dr(p),_e)),J.isReverted=dt)},J.refresh=function(gt,dt){if(!((Un||!J.enabled)&&!dt)){if(p&&gt&&Oi){ni(a,"scrollEnd",wv);return}Un=1,Et&&Et.pause(),x&&i&&i.progress(0).invalidate(),J.isReverted||J.revert();for(var _t=ze(),pt=fe(),yn=T?T.duration():Md(te,H),$e=0,Ct=0,Pt=n.end,D=n.endTrigger||g,Q=n.start||(n.start===0||!g?0:p?"0 0":"0 100%"),ae=n.pinnedContainer&&sr(n.pinnedContainer),ie=g&&Math.max(0,bt.indexOf(J))||0,ue=ie,Fe,Ie,He,Ke,qe,Ye,Qe,At,xi,ot;ue--;)Ye=bt[ue],Ye.end||Ye.refresh(0,1)||(Un=1),Qe=Ye.pin,Qe&&(Qe===g||Qe===p)&&!Ye.isReverted&&(ot||(ot=[]),ot.unshift(Ye),Ye.revert());for(or(Q)&&(Q=Q(J)),ge=Tv(Q,g,_t,H,Te(),oe,Se,J,pt,Le,$,yn,T)||(p?-.001:0),or(Pt)&&(Pt=Pt(J)),Xi(Pt)&&!Pt.indexOf("+=")&&(~Pt.indexOf(" ")?Pt=(Xi(Q)?Q.split(" ")[0]:"")+Pt:($e=wu(Pt.substr(2),_t),Pt=Xi(Q)?Q:ge+$e,D=g)),Z=Math.max(ge,Tv(Pt||(D?"100% 0":yn),D,_t,H,Te()+$e,ce,xe,J,pt,Le,$,yn,T))||-.001,P=Z-ge||(ge-=.01)&&.001,$e=0,ue=ie;ue--;)Ye=bt[ue],Qe=Ye.pin,Qe&&Ye.start-Ye._pinPush<ge&&!T&&(Fe=Ye.end-Ye.start,(Qe===g||Qe===ae)&&!bl(Q)&&($e+=Fe),Qe===p&&(Ct+=Fe));if(ge+=$e,Z+=$e,J._pinPush=Ct,oe&&$e&&(Fe={},Fe[H.a]="+="+$e,ae&&(Fe[H.p]="-="+Te()),rt.set([oe,ce],Fe)),p)Fe=Dr(p),Ke=H===Gn,He=Te(),Be=parseFloat(ke(H.a))+Ct,!yn&&Z>1&&((Y?nn:te).style["overflow-"+H.a]="scroll"),Fd(p,Ae,Fe),we=Ru(p),Ie=Or(p,!0),At=$&&du(te,Ke?Yi:Gn)(),_&&(_e=[_+H.os2,P+Ct+kn],_e.t=Ae,ue=_===ln?Rd(p,H)+P+Ct:0,ue&&_e.push(H.d,ue+kn),Al(_e),$&&Te(Ji)),$&&(qe={top:Ie.top+(Ke?He-ge:At)+kn,left:Ie.left+(Ke?At:He-ge)+kn,boxSizing:"border-box",position:"fixed"},qe[ds]=qe["max"+to]=Math.ceil(Ie.width)+kn,qe[ps]=qe["max"+xu]=Math.ceil(Ie.height)+kn,qe[Fi]=qe[Fi+ta]=qe[Fi+Qo]=qe[Fi+na]=qe[Fi+ea]="0",qe[ln]=Fe[ln],qe[ln+ta]=Fe[ln+ta],qe[ln+Qo]=Fe[ln+Qo],qe[ln+na]=Fe[ln+na],qe[ln+ea]=Fe[ln+ea],ye=KL(le,qe,A)),i?(xi=i._initted,yd(1),i.render(i.duration(),!0,!0),q=ke(H.a)-Be+P+Ct,P!==q&&ye.splice(ye.length-2,2),i.render(0,!0,!0),xi||i.invalidate(),yd(0)):q=P;else if(g&&Te()&&!T)for(Ie=g.parentNode;Ie&&Ie!==nn;)Ie._pinOffset&&(ge-=Ie._pinOffset,Z-=Ie._pinOffset),Ie=Ie.parentNode;ot&&ot.forEach(function(gr){return gr.revert(!1)}),J.start=ge,J.end=Z,ne=de=Te(),T||(ne<Ji&&Te(Ji),J.scroll.rec=0),J.revert(!1),Un=0,i&&O&&i._initted&&i.progress()!==mr&&i.progress(mr,!0).render(i.time(),!0,!0),pr!==J.progress&&(i&&!O&&i.totalProgress(pr,!0),J.progress=pr,J.update(0,0,1)),p&&_&&(Ae._pinOffset=Math.round(J.progress*q)),f&&f(J)}},J.getVelocity=function(){return(Te()-de)/(fs()-uu)*1e3||0},J.endAnimation=function(){Ml(J.callbackAnimation),i&&(Et?Et.progress(1):i.paused()?O||Ml(i,J.direction<0,1):Ml(i,i.reversed()))},J.getTrailing=function(gt){var dt=bt.indexOf(J),_t=J.direction>0?bt.slice(0,dt).reverse():bt.slice(dt+1);return Xi(gt)?_t.filter(function(pt){return pt.vars.preventOverlaps===gt}):_t},J.update=function(gt,dt,_t){if(!(T&&!_t&&!gt)){var pt=J.scroll(),yn=gt?0:(pt-ge)/P,$e=yn<0?0:yn>1?1:yn||0,Ct=J.progress,Pt,D,Q,ae,ie,ue,Fe,Ie;if(dt&&(de=ne,ne=T?Te():pt,M&&(Vt=zt,zt=i&&!O?i.totalProgress():$e)),b&&!$e&&p&&!Un&&!wl&&Oi&&ge<pt+(pt-de)/(fs()-uu)*b&&($e=1e-4),$e!==Ct&&J.enabled){if(Pt=J.isActive=!!$e&&$e<1,D=!!Ct&&Ct<1,ue=Pt!==D,ie=ue||!!$e!=!!Ct,J.direction=$e>Ct?1:-1,J.progress=$e,ie&&!Un&&(Q=$e&&!Ct?0:$e===1?1:Ct===1?2:3,O&&(ae=!ue&&ee[Q+1]!=="none"&&ee[Q+1]||ee[Q],Ie=i&&(ae==="complete"||ae==="reset"||ae in i))),X&&ue&&(Ie||d||!i)&&(or(X)?X(J):J.getTrailing(X).forEach(function(Ye){return Ye.endAnimation()})),O||(Et&&!Un&&!wl?(Et.vars.totalProgress=$e,Et.invalidate().restart()):i&&i.totalProgress($e,!!Un)),p){if(gt&&_&&(Ae.style[_+H.os2]=Re),!$)Xe(Be+q*$e);else if(ie){if(Fe=!gt&&$e>Ct&&Z+1>pt&&pt+1>=Md(te,H),A)if(!gt&&(Pt||Fe)){var He=Or(p,!0),Ke=pt-ge;Ev(p,nn,He.top+(H===Gn?Ke:0)+kn,He.left+(H===Gn?0:Ke)+kn)}else Ev(p,Ae);Al(Pt||Fe?ye:we),q!==P&&$e<1&&Pt||Xe(Be+($e===1&&!Fe?q:0))}}M&&!z.tween&&!Un&&!wl&&on.restart(!0),l&&(ue||S&&$e&&($e<1||!wd))&&yl(l.targets).forEach(function(Ye){return Ye.classList[Pt||S?"add":"remove"](l.className)}),s&&!O&&!gt&&s(J),ie&&!Un?(O&&(Ie&&(ae==="complete"?i.pause().totalProgress(1):ae==="reset"?i.restart(!0).pause():ae==="restart"?i.restart(!0):i[ae]()),s&&s(J)),(ue||!wd)&&(h&&ue&&Ed(J,h),W[Q]&&Ed(J,W[Q]),S&&($e===1?J.kill(!1,1):W[Q]=0),ue||(Q=$e===1?1:3,W[Q]&&Ed(J,W[Q]))),N&&!Pt&&Math.abs(J.getVelocity())>(bl(N)?N:2500)&&(Ml(J.callbackAnimation),Et?Et.progress(1):Ml(i,!$e,1))):O&&s&&!Un&&s(J)}if(Oe){var qe=T?pt/T.duration()*(T._caScrollDist||0):pt;Ue(qe+(Se._isFlipped?1:0)),Oe(qe)}Yn&&Yn(-pt/T.duration()*(T._caScrollDist||0))}},J.enable=function(gt,dt){J.enabled||(J.enabled=!0,ni(te,"resize",Tl),ni(te,"scroll",Su),ve&&ni(a,"refreshInit",ve),gt!==!1&&(J.progress=pr=0,ne=de=Me=Te()),dt!==!1&&J.refresh())},J.getTween=function(gt){return gt&&z?z.tween:Et},J.disable=function(gt,dt){if(J.enabled&&(gt!==!1&&J.revert(),J.enabled=J.isActive=!1,dt||Et&&Et.pause(),Ji=0,F&&(F.uncache=1),ve&&Sl(a,"refreshInit",ve),on&&(on.pause(),z.tween&&z.tween.kill()&&(z.tween=0)),!Y)){for(var _t=bt.length;_t--;)if(bt[_t].scroller===te&&bt[_t]!==J)return;Sl(te,"resize",Tl),Sl(te,"scroll",Su)}},J.kill=function(gt,dt){J.disable(gt,dt),Et&&Et.kill(),c&&delete Id[c];var _t=bt.indexOf(J);bt.splice(_t,1),_t===zn&&Eu>0&&zn--,_t=0,bt.forEach(function(pt){return pt.scroller===J.scroller&&(_t=1)}),_t||(J.scroll.rec=0),i&&(i.scrollTrigger=null,gt&&i.render(-1),dt||i.kill()),oe&&[oe,ce,Se,xe].forEach(function(pt){return pt.parentNode&&pt.parentNode.removeChild(pt)}),p&&(F&&(F.uncache=1),_t=0,bt.forEach(function(pt){return pt.pin===p&&_t++}),_t||(F.spacer=0))},J.enable(!1,!1),!i||!i.add||P?J.refresh():rt.delayedCall(.01,function(){return ge||Z||J.refresh()})&&(P=.01)&&(ge=Z=0)},a.register=function(n){if(!Zo&&(rt=n||hv(),uv()&&window.document&&(Gt=window,Cn=document,Ir=Cn.documentElement,nn=Cn.body),rt&&(yl=rt.utils.toArray,cu=rt.utils.clamp,yd=rt.core.suppressOverwrites||fu,rt.core.globals("ScrollTrigger",a),nn))){iv=Gt.requestAnimationFrame||function(l){return setTimeout(l,16)},ni(Gt,"wheel",Su),nv=[Gt,Cn,Ir,nn],ni(Cn,"scroll",Su);var i=nn.style,r=i.borderTopStyle,s;i.borderTopStyle="solid",s=Or(nn),Gn.m=Math.round(s.top+Gn.sc())||0,Yi.m=Math.round(s.left+Yi.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),vd=setInterval(vv,200),rt.delayedCall(.5,function(){return wl=0}),ni(Cn,"touchcancel",fu),ni(nn,"touchstart",fu),gv(ni,Cn,"pointerdown,touchstart,mousedown",function(){return hu=1}),gv(ni,Cn,"pointerup,touchend,mouseup",function(){return hu=0}),xd=rt.utils.checkPrefix("transform"),Lu.push(xd),Zo=fs(),gd=rt.delayedCall(.2,sa).pause(),Jo=[Cn,"visibilitychange",function(){var l=Gt.innerWidth,c=Gt.innerHeight;Cn.hidden?(rv=l,sv=c):(rv!==l||sv!==c)&&Tl()},Cn,"DOMContentLoaded",sa,Gt,"load",function(){return Oi||sa()},Gt,"resize",Tl],Sd(ni)}return Zo},a.defaults=function(n){for(var i in n)Pd[i]=n[i]},a.kill=function(){lv=0,bt.slice(0).forEach(function(n){return n.kill(1)})},a.config=function(n){"limitCallbacks"in n&&(wd=!!n.limitCallbacks);var i=n.syncInterval;i&&clearInterval(vd)||(vd=i)&&setInterval(vv,i),"autoRefreshEvents"in n&&(Sd(Sl)||Sd(ni,n.autoRefreshEvents||"none"),av=(n.autoRefreshEvents+"").indexOf("resize")===-1)},a.scrollerProxy=function(n,i){var r=sr(n),s=Qs.indexOf(r),l=Ko(r);~s&&Qs.splice(s,l?6:2),l?$s.unshift(Gt,i,nn,i,Ir,i):$s.unshift(r,i)},a.matchMedia=function(n){var i,r,s,l,c;for(r in n)s=Qt.indexOf(r),l=n[r],ia=r,r==="all"?l():(i=Gt.matchMedia(r),i&&(i.matches&&(c=l()),~s?(Qt[s+1]=dv(Qt[s+1],l),Qt[s+2]=dv(Qt[s+2],c)):(s=Qt.length,Qt.push(r,l,c),i.addListener?i.addListener(yv):i.addEventListener("change",yv)),Qt[s+3]=i.matches)),ia=0;return Qt},a.clearMatchMedia=function(n){n||(Qt.length=0),n=Qt.indexOf(n),n>=0&&Qt.splice(n,4)},a.isInViewport=function(n,i,r){var s=(Xi(n)?sr(n):n).getBoundingClientRect(),l=s[r?ds:ps]*i||0;return r?s.right-l>0&&s.left+l<Gt.innerWidth:s.bottom-l>0&&s.top+l<Gt.innerHeight},a.positionInViewport=function(n,i,r){Xi(n)&&(n=sr(n));var s=n.getBoundingClientRect(),l=s[r?ds:ps],c=i==null?l/2:i in yu?yu[i]*l:~i.indexOf("%")?parseFloat(i)*l/100:parseFloat(i)||0;return r?(s.left+c)/Gt.innerWidth:(s.top+c)/Gt.innerHeight},a}();Ht.version="3.8.0";Ht.saveStyles=function(a){return a?yl(a).forEach(function(e){if(e&&e.style){var t=Ni.indexOf(e);t>=0&&Ni.splice(t,5),Ni.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),rt.core.getCache(e),ia)}}):Ni};Ht.revert=function(a,e){return Tu(!a,e)};Ht.create=function(a,e){return new Ht(a,e)};Ht.refresh=function(a){return a?Tl():(Zo||Ht.register())&&sa(!0)};Ht.update=Au;Ht.clearScrollMemory=Mv;Ht.maxScroll=function(a,e){return Md(a,e?Yi:Gn)};Ht.getScrollFunc=function(a,e){return du(sr(a),e?Yi:Gn)};Ht.getById=function(a){return Id[a]};Ht.getAll=function(){return bt.slice(0)};Ht.isScrolling=function(){return!!Oi};Ht.snapDirectional=Cd;Ht.addEventListener=function(a,e){var t=El[a]||(El[a]=[]);~t.indexOf(e)||t.push(e)};Ht.removeEventListener=function(a,e){var t=El[a],n=t&&t.indexOf(e);n>=0&&t.splice(n,1)};Ht.batch=function(a,e){var t=[],n={},i=e.interval||.016,r=e.batchMax||1e9,s=function(h,f){var d=[],g=[],p=rt.delayedCall(i,function(){f(d,g),d=[],g=[]}).pause();return function(_){d.length||p.restart(!0),d.push(_.trigger),g.push(_),r<=d.length&&p.progress(1)}},l;for(l in e)n[l]=l.substr(0,2)==="on"&&or(e[l])&&l!=="onRefreshInit"?s(l,e[l]):e[l];return or(r)&&(r=r(),ni(Ht,"refresh",function(){return r=e.batchMax()})),yl(a).forEach(function(c){var h={};for(l in n)h[l]=n[l];h.trigger=c,t.push(Ht.create(h))}),t};Ht.sort=function(a){return bt.sort(a||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};hv()&&rt.registerPlugin(Ht);/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lv="134",QL=0,Rv=1,eR=2,Cv=1,tR=2,Ll=3,oa=0,fn=1,no=2,Pv=1,ms=0,Rl=1,Iv=2,Dv=3,Ov=4,nR=5,aa=100,iR=101,rR=102,Fv=103,Nv=104,sR=200,oR=201,aR=202,lR=203,Bv=204,Uv=205,cR=206,uR=207,hR=208,fR=209,dR=210,pR=0,mR=1,gR=2,Nd=3,_R=4,vR=5,xR=6,yR=7,Pu=0,wR=1,bR=2,io=0,MR=1,SR=2,TR=3,ER=4,AR=5,zv=300,Cl=301,Pl=302,Bd=303,Ud=304,Iu=306,zd=307,la=1e3,ii=1001,Du=1002,dn=1003,kd=1004,Gd=1005,ri=1006,kv=1007,ca=1008,gs=1009,LR=1010,RR=1011,Ou=1012,CR=1013,Fu=1014,Fr=1015,ua=1016,PR=1017,IR=1018,DR=1019,Il=1020,OR=1021,ro=1022,Pn=1023,FR=1024,NR=1025,BR=Pn,ha=1026,Dl=1027,UR=1028,zR=1029,kR=1030,GR=1031,HR=1032,VR=1033,Gv=33776,Hv=33777,Vv=33778,Wv=33779,Xv=35840,Yv=35841,qv=35842,jv=35843,WR=36196,Zv=37492,Jv=37496,XR=37808,YR=37809,qR=37810,jR=37811,ZR=37812,JR=37813,KR=37814,$R=37815,QR=37816,eC=37817,tC=37818,nC=37819,iC=37820,rC=37821,sC=36492,oC=37840,aC=37841,lC=37842,cC=37843,uC=37844,hC=37845,fC=37846,dC=37847,pC=37848,mC=37849,gC=37850,_C=37851,vC=37852,xC=37853,yC=2200,wC=2201,bC=2202,Ol=2300,fa=2301,Hd=2302,da=2400,pa=2401,Nu=2402,Vd=2500,Kv=2501,MC=0,SC=1,$v=2,In=3e3,ar=3001,Wd=3007,Xd=3002,TC=3003,Qv=3004,ex=3005,tx=3006,EC=3200,AC=3201,so=0,LC=1,Yd=7680,RC=519,Fl=35044,Bu=35048,nx="300 es";class oo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,e);e.target=null}}}let Uu=1234567;const Nl=Math.PI/180,Bl=180/Math.PI,Tn=[];for(let a=0;a<256;a++)Tn[a]=(a<16?"0":"")+a.toString(16);const CC=typeof crypto!="undefined"&&"randomUUID"in crypto;function Bi(){if(CC)return crypto.randomUUID().toUpperCase();const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Tn[a&255]+Tn[a>>8&255]+Tn[a>>16&255]+Tn[a>>24&255]+"-"+Tn[e&255]+Tn[e>>8&255]+"-"+Tn[e>>16&15|64]+Tn[e>>24&255]+"-"+Tn[t&63|128]+Tn[t>>8&255]+"-"+Tn[t>>16&255]+Tn[t>>24&255]+Tn[n&255]+Tn[n>>8&255]+Tn[n>>16&255]+Tn[n>>24&255]).toUpperCase()}function si(a,e,t){return Math.max(e,Math.min(t,a))}function qd(a,e){return(a%e+e)%e}function PC(a,e,t,n,i){return n+(a-e)*(i-n)/(t-e)}function IC(a,e,t){return a!==e?(t-a)/(e-a):0}function Ul(a,e,t){return(1-t)*a+t*e}function DC(a,e,t,n){return Ul(a,e,1-Math.exp(-t*n))}function OC(a,e=1){return e-Math.abs(qd(a,e*2)-e)}function FC(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*(3-2*a))}function NC(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*a*(a*(a*6-15)+10))}function BC(a,e){return a+Math.floor(Math.random()*(e-a+1))}function UC(a,e){return a+Math.random()*(e-a)}function zC(a){return a*(.5-Math.random())}function kC(a){return a!==void 0&&(Uu=a%2147483647),Uu=Uu*16807%2147483647,(Uu-1)/2147483646}function GC(a){return a*Nl}function HC(a){return a*Bl}function jd(a){return(a&a-1)==0&&a!==0}function ix(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function rx(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function VC(a,e,t,n,i){const r=Math.cos,s=Math.sin,l=r(t/2),c=s(t/2),h=r((e+n)/2),f=s((e+n)/2),d=r((e-n)/2),g=s((e-n)/2),p=r((n-e)/2),_=s((n-e)/2);switch(i){case"XYX":a.set(l*f,c*d,c*g,l*h);break;case"YZY":a.set(c*g,l*f,c*d,l*h);break;case"ZXZ":a.set(c*d,c*g,l*f,l*h);break;case"XZX":a.set(l*f,c*_,c*p,l*h);break;case"YXY":a.set(c*p,l*f,c*_,l*h);break;case"ZYZ":a.set(c*_,c*p,l*f,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var WC=Object.freeze({__proto__:null,DEG2RAD:Nl,RAD2DEG:Bl,generateUUID:Bi,clamp:si,euclideanModulo:qd,mapLinear:PC,inverseLerp:IC,lerp:Ul,damp:DC,pingpong:OC,smoothstep:FC,smootherstep:NC,randInt:BC,randFloat:UC,randFloatSpread:zC,seededRandom:kC,degToRad:GC,radToDeg:HC,isPowerOfTwo:jd,ceilPowerOfTwo:ix,floorPowerOfTwo:rx,setQuaternionFromProperEuler:VC});class Ee{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ee.prototype.isVector2=!0;class En{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,s,l,c,h){const f=this.elements;return f[0]=e,f[1]=i,f[2]=l,f[3]=t,f[4]=r,f[5]=c,f[6]=n,f[7]=s,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],l=n[3],c=n[6],h=n[1],f=n[4],d=n[7],g=n[2],p=n[5],_=n[8],x=i[0],b=i[3],v=i[6],y=i[1],S=i[4],M=i[7],A=i[2],R=i[5],T=i[8];return r[0]=s*x+l*y+c*A,r[3]=s*b+l*S+c*R,r[6]=s*v+l*M+c*T,r[1]=h*x+f*y+d*A,r[4]=h*b+f*S+d*R,r[7]=h*v+f*M+d*T,r[2]=g*x+p*y+_*A,r[5]=g*b+p*S+_*R,r[8]=g*v+p*M+_*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=e[8];return t*s*f-t*l*h-n*r*f+n*l*c+i*r*h-i*s*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=e[8],d=f*s-l*h,g=l*c-f*r,p=h*r-s*c,_=t*d+n*g+i*p;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/_;return e[0]=d*x,e[1]=(i*h-f*n)*x,e[2]=(l*n-i*s)*x,e[3]=g*x,e[4]=(f*t-i*c)*x,e[5]=(i*r-l*t)*x,e[6]=p*x,e[7]=(n*c-h*t)*x,e[8]=(s*t-n*r)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,l){const c=Math.cos(r),h=Math.sin(r);return this.set(n*c,n*h,-n*(c*s+h*l)+s+e,-i*h,i*c,-i*(-h*s+c*l)+l+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],s=i[3],l=i[6],c=i[1],h=i[4],f=i[7];return i[0]=t*r+n*c,i[3]=t*s+n*h,i[6]=t*l+n*f,i[1]=-n*r+t*c,i[4]=-n*s+t*h,i[7]=-n*l+t*f,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}En.prototype.isMatrix3=!0;function sx(a){if(a.length===0)return-1/0;let e=a[0];for(let t=1,n=a.length;t<n;++t)a[t]>e&&(e=a[t]);return e}function zu(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function ox(a,e=0){let t=3735928559^e,n=1103547991^e;for(let i=0,r;i<a.length;i++)r=a.charCodeAt(i),t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}let ma;class ga{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ma===void 0&&(ma=zu("canvas")),ma.width=e.width,ma.height=e.height;const n=ma.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ma}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let XC=0;class pn extends oo{constructor(e=pn.DEFAULT_IMAGE,t=pn.DEFAULT_MAPPING,n=ii,i=ii,r=ri,s=ca,l=Pn,c=gs,h=1,f=In){super();Object.defineProperty(this,"id",{value:XC++}),this.uuid=Bi(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new En,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Bi()),!t&&e.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let s=0,l=i.length;s<l;s++)i[s].isDataTexture?r.push(Zd(i[s].image)):r.push(Zd(i[s]))}else r=Zd(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case la:e.x=e.x-Math.floor(e.x);break;case ii:e.x=e.x<0?0:1;break;case Du:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case la:e.y=e.y-Math.floor(e.y);break;case ii:e.y=e.y<0?0:1;break;case Du:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}pn.DEFAULT_IMAGE=void 0;pn.DEFAULT_MAPPING=zv;pn.prototype.isTexture=!0;function Zd(a){return typeof HTMLImageElement!="undefined"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&a instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap?ga.getDataURL(a):a.data?{data:Array.prototype.slice.call(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ft{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,l=.1,c=e.elements,h=c[0],f=c[4],d=c[8],g=c[1],p=c[5],_=c[9],x=c[2],b=c[6],v=c[10];if(Math.abs(f-g)<s&&Math.abs(d-x)<s&&Math.abs(_-b)<s){if(Math.abs(f+g)<l&&Math.abs(d+x)<l&&Math.abs(_+b)<l&&Math.abs(h+p+v-3)<l)return this.set(1,0,0,0),this;t=Math.PI;const S=(h+1)/2,M=(p+1)/2,A=(v+1)/2,R=(f+g)/4,T=(d+x)/4,N=(_+b)/4;return S>M&&S>A?S<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(S),i=R/n,r=T/n):M>A?M<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(M),n=R/i,r=N/i):A<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(A),n=T/r,i=N/r),this.set(n,i,r,t),this}let y=Math.sqrt((b-_)*(b-_)+(d-x)*(d-x)+(g-f)*(g-f));return Math.abs(y)<.001&&(y=1),this.x=(b-_)/y,this.y=(d-x)/y,this.z=(g-f)/y,this.w=Math.acos((h+p+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ft.prototype.isVector4=!0;class lr extends oo{constructor(e,t,n={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t),this.texture=new pn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ri,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=I_({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}lr.prototype.isWebGLRenderTarget=!0;class YC extends lr{constructor(e,t,n){super(e,t);const i=this.texture;this.texture=[];for(let r=0;r<n;r++)this.texture[r]=i.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}YC.prototype.isWebGLMultipleRenderTargets=!0;class ax extends lr{constructor(e,t,n){super(e,t,n);this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}ax.prototype.isWebGLMultisampleRenderTarget=!0;class Hn{constructor(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,i)}static slerpFlat(e,t,n,i,r,s,l){let c=n[i+0],h=n[i+1],f=n[i+2],d=n[i+3];const g=r[s+0],p=r[s+1],_=r[s+2],x=r[s+3];if(l===0){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=d;return}if(l===1){e[t+0]=g,e[t+1]=p,e[t+2]=_,e[t+3]=x;return}if(d!==x||c!==g||h!==p||f!==_){let b=1-l;const v=c*g+h*p+f*_+d*x,y=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const A=Math.sqrt(S),R=Math.atan2(A,v*y);b=Math.sin(b*R)/A,l=Math.sin(l*R)/A}const M=l*y;if(c=c*b+g*M,h=h*b+p*M,f=f*b+_*M,d=d*b+x*M,b===1-l){const A=1/Math.sqrt(c*c+h*h+f*f+d*d);c*=A,h*=A,f*=A,d*=A}}e[t]=c,e[t+1]=h,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,s){const l=n[i],c=n[i+1],h=n[i+2],f=n[i+3],d=r[s],g=r[s+1],p=r[s+2],_=r[s+3];return e[t]=l*_+f*d+c*p-h*g,e[t+1]=c*_+f*g+h*d-l*p,e[t+2]=h*_+f*p+l*g-c*d,e[t+3]=f*_-l*d-c*g-h*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,s=e._order,l=Math.cos,c=Math.sin,h=l(n/2),f=l(i/2),d=l(r/2),g=c(n/2),p=c(i/2),_=c(r/2);switch(s){case"XYZ":this._x=g*f*d+h*p*_,this._y=h*p*d-g*f*_,this._z=h*f*_+g*p*d,this._w=h*f*d-g*p*_;break;case"YXZ":this._x=g*f*d+h*p*_,this._y=h*p*d-g*f*_,this._z=h*f*_-g*p*d,this._w=h*f*d+g*p*_;break;case"ZXY":this._x=g*f*d-h*p*_,this._y=h*p*d+g*f*_,this._z=h*f*_+g*p*d,this._w=h*f*d-g*p*_;break;case"ZYX":this._x=g*f*d-h*p*_,this._y=h*p*d+g*f*_,this._z=h*f*_-g*p*d,this._w=h*f*d+g*p*_;break;case"YZX":this._x=g*f*d+h*p*_,this._y=h*p*d+g*f*_,this._z=h*f*_-g*p*d,this._w=h*f*d-g*p*_;break;case"XZY":this._x=g*f*d-h*p*_,this._y=h*p*d-g*f*_,this._z=h*f*_+g*p*d,this._w=h*f*d+g*p*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],l=t[5],c=t[9],h=t[2],f=t[6],d=t[10],g=n+l+d;if(g>0){const p=.5/Math.sqrt(g+1);this._w=.25/p,this._x=(f-c)*p,this._y=(r-h)*p,this._z=(s-i)*p}else if(n>l&&n>d){const p=2*Math.sqrt(1+n-l-d);this._w=(f-c)/p,this._x=.25*p,this._y=(i+s)/p,this._z=(r+h)/p}else if(l>d){const p=2*Math.sqrt(1+l-n-d);this._w=(r-h)/p,this._x=(i+s)/p,this._y=.25*p,this._z=(c+f)/p}else{const p=2*Math.sqrt(1+d-n-l);this._w=(s-i)/p,this._x=(r+h)/p,this._y=(c+f)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(si(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,l=t._x,c=t._y,h=t._z,f=t._w;return this._x=n*f+s*l+i*h-r*c,this._y=i*f+s*c+r*l-n*h,this._z=r*f+s*h+n*c-i*l,this._w=s*f-n*l-i*c-r*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let l=s*e._w+n*e._x+i*e._y+r*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-t;return this._w=p*s+t*this._w,this._x=p*n+t*this._x,this._y=p*i+t*this._y,this._z=p*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),f=Math.atan2(h,l),d=Math.sin((1-t)*f)/h,g=Math.sin(t*f)/h;return this._w=s*d+this._w*g,this._x=n*d+this._x*g,this._y=i*d+this._y*g,this._z=r*d+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hn.prototype.isQuaternion=!0;class U{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(lx.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lx.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,l=e.z,c=e.w,h=c*t+s*i-l*n,f=c*n+l*t-r*i,d=c*i+r*n-s*t,g=-r*t-s*n-l*i;return this.x=h*c+g*-r+f*-l-d*-s,this.y=f*c+g*-s+d*-r-h*-l,this.z=d*c+g*-l+h*-s-f*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,l=t.y,c=t.z;return this.x=i*c-r*l,this.y=r*s-n*c,this.z=n*l-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Jd.copy(this).projectOnVector(e),this.sub(Jd)}reflect(e){return this.sub(Jd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(si(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}U.prototype.isVector3=!0;const Jd=new U,lx=new Hn;class Ui{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,l=-1/0;for(let c=0,h=e.length;c<h;c+=3){const f=e[c],d=e[c+1],g=e[c+2];f<t&&(t=f),d<n&&(n=d),g<i&&(i=g),f>r&&(r=f),d>s&&(s=d),g>l&&(l=g)}return this.min.set(t,n,i),this.max.set(r,s,l),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,l=-1/0;for(let c=0,h=e.count;c<h;c++){const f=e.getX(c),d=e.getY(c),g=e.getZ(c);f<t&&(t=f),d<n&&(n=d),g<i&&(i=g),f>r&&(r=f),d>s&&(s=d),g>l&&(l=g)}return this.min.set(t,n,i),this.max.set(r,s,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=zl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Kd.copy(t.boundingBox),Kd.applyMatrix4(e.matrixWorld),this.union(Kd));const n=e.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zl),zl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kl),ku.subVectors(this.max,kl),_a.subVectors(e.a,kl),va.subVectors(e.b,kl),xa.subVectors(e.c,kl),_s.subVectors(va,_a),vs.subVectors(xa,va),ao.subVectors(_a,xa);let t=[0,-_s.z,_s.y,0,-vs.z,vs.y,0,-ao.z,ao.y,_s.z,0,-_s.x,vs.z,0,-vs.x,ao.z,0,-ao.x,-_s.y,_s.x,0,-vs.y,vs.x,0,-ao.y,ao.x,0];return!$d(t,_a,va,xa,ku)||(t=[1,0,0,0,1,0,0,0,1],!$d(t,_a,va,xa,ku))?!1:(Gu.crossVectors(_s,vs),t=[Gu.x,Gu.y,Gu.z],$d(t,_a,va,xa,ku))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return zl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(zl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ui.prototype.isBox3=!0;const Nr=[new U,new U,new U,new U,new U,new U,new U,new U],zl=new U,Kd=new Ui,_a=new U,va=new U,xa=new U,_s=new U,vs=new U,ao=new U,kl=new U,ku=new U,Gu=new U,lo=new U;function $d(a,e,t,n,i){for(let r=0,s=a.length-3;r<=s;r+=3){lo.fromArray(a,r);const l=i.x*Math.abs(lo.x)+i.y*Math.abs(lo.y)+i.z*Math.abs(lo.z),c=e.dot(lo),h=t.dot(lo),f=n.dot(lo);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>l)return!1}return!0}const qC=new Ui,cx=new U,Qd=new U,ep=new U;class co{constructor(e=new U,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):qC.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ep.subVectors(e,this.center);const t=ep.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.add(ep.multiplyScalar(i/n)),this.radius+=i}return this}union(e){return Qd.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(cx.copy(e.center).add(Qd)),this.expandByPoint(cx.copy(e.center).sub(Qd)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Br=new U,tp=new U,Hu=new U,xs=new U,np=new U,Vu=new U,ip=new U;class uo{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Br)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Br.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Br.copy(this.direction).multiplyScalar(t).add(this.origin),Br.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){tp.copy(e).add(t).multiplyScalar(.5),Hu.copy(t).sub(e).normalize(),xs.copy(this.origin).sub(tp);const r=e.distanceTo(t)*.5,s=-this.direction.dot(Hu),l=xs.dot(this.direction),c=-xs.dot(Hu),h=xs.lengthSq(),f=Math.abs(1-s*s);let d,g,p,_;if(f>0)if(d=s*c-l,g=s*l-c,_=r*f,d>=0)if(g>=-_)if(g<=_){const x=1/f;d*=x,g*=x,p=d*(d+s*g+2*l)+g*(s*d+g+2*c)+h}else g=r,d=Math.max(0,-(s*g+l)),p=-d*d+g*(g+2*c)+h;else g=-r,d=Math.max(0,-(s*g+l)),p=-d*d+g*(g+2*c)+h;else g<=-_?(d=Math.max(0,-(-s*r+l)),g=d>0?-r:Math.min(Math.max(-r,-c),r),p=-d*d+g*(g+2*c)+h):g<=_?(d=0,g=Math.min(Math.max(-r,-c),r),p=g*(g+2*c)+h):(d=Math.max(0,-(s*r+l)),g=d>0?r:Math.min(Math.max(-r,-c),r),p=-d*d+g*(g+2*c)+h);else g=s>0?-r:r,d=Math.max(0,-(s*g+l)),p=-d*d+g*(g+2*c)+h;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Hu).multiplyScalar(g).add(tp),p}intersectSphere(e,t){Br.subVectors(e.center,this.origin);const n=Br.dot(this.direction),i=Br.dot(Br)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),l=n-s,c=n+s;return l<0&&c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,l,c;const h=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,g=this.origin;return h>=0?(n=(e.min.x-g.x)*h,i=(e.max.x-g.x)*h):(n=(e.max.x-g.x)*h,i=(e.min.x-g.x)*h),f>=0?(r=(e.min.y-g.y)*f,s=(e.max.y-g.y)*f):(r=(e.max.y-g.y)*f,s=(e.min.y-g.y)*f),n>s||r>i||((r>n||n!==n)&&(n=r),(s<i||i!==i)&&(i=s),d>=0?(l=(e.min.z-g.z)*d,c=(e.max.z-g.z)*d):(l=(e.max.z-g.z)*d,c=(e.min.z-g.z)*d),n>c||l>i)||((l>n||n!==n)&&(n=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Br)!==null}intersectTriangle(e,t,n,i,r){np.subVectors(t,e),Vu.subVectors(n,e),ip.crossVectors(np,Vu);let s=this.direction.dot(ip),l;if(s>0){if(i)return null;l=1}else if(s<0)l=-1,s=-s;else return null;xs.subVectors(this.origin,e);const c=l*this.direction.dot(Vu.crossVectors(xs,Vu));if(c<0)return null;const h=l*this.direction.dot(np.cross(xs));if(h<0||c+h>s)return null;const f=-l*xs.dot(ip);return f<0?null:this.at(f/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ve{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,s,l,c,h,f,d,g,p,_,x,b){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=s,v[9]=l,v[13]=c,v[2]=h,v[6]=f,v[10]=d,v[14]=g,v[3]=p,v[7]=_,v[11]=x,v[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ve().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/ya.setFromMatrixColumn(e,0).length(),r=1/ya.setFromMatrixColumn(e,1).length(),s=1/ya.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),l=Math.sin(n),c=Math.cos(i),h=Math.sin(i),f=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const g=s*f,p=s*d,_=l*f,x=l*d;t[0]=c*f,t[4]=-c*d,t[8]=h,t[1]=p+_*h,t[5]=g-x*h,t[9]=-l*c,t[2]=x-g*h,t[6]=_+p*h,t[10]=s*c}else if(e.order==="YXZ"){const g=c*f,p=c*d,_=h*f,x=h*d;t[0]=g+x*l,t[4]=_*l-p,t[8]=s*h,t[1]=s*d,t[5]=s*f,t[9]=-l,t[2]=p*l-_,t[6]=x+g*l,t[10]=s*c}else if(e.order==="ZXY"){const g=c*f,p=c*d,_=h*f,x=h*d;t[0]=g-x*l,t[4]=-s*d,t[8]=_+p*l,t[1]=p+_*l,t[5]=s*f,t[9]=x-g*l,t[2]=-s*h,t[6]=l,t[10]=s*c}else if(e.order==="ZYX"){const g=s*f,p=s*d,_=l*f,x=l*d;t[0]=c*f,t[4]=_*h-p,t[8]=g*h+x,t[1]=c*d,t[5]=x*h+g,t[9]=p*h-_,t[2]=-h,t[6]=l*c,t[10]=s*c}else if(e.order==="YZX"){const g=s*c,p=s*h,_=l*c,x=l*h;t[0]=c*f,t[4]=x-g*d,t[8]=_*d+p,t[1]=d,t[5]=s*f,t[9]=-l*f,t[2]=-h*f,t[6]=p*d+_,t[10]=g-x*d}else if(e.order==="XZY"){const g=s*c,p=s*h,_=l*c,x=l*h;t[0]=c*f,t[4]=-d,t[8]=h*f,t[1]=g*d+x,t[5]=s*f,t[9]=p*d-_,t[2]=_*d-p,t[6]=l*f,t[10]=x*d+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jC,e,ZC)}lookAt(e,t,n){const i=this.elements;return _i.subVectors(e,t),_i.lengthSq()===0&&(_i.z=1),_i.normalize(),ys.crossVectors(n,_i),ys.lengthSq()===0&&(Math.abs(n.z)===1?_i.x+=1e-4:_i.z+=1e-4,_i.normalize(),ys.crossVectors(n,_i)),ys.normalize(),Wu.crossVectors(_i,ys),i[0]=ys.x,i[4]=Wu.x,i[8]=_i.x,i[1]=ys.y,i[5]=Wu.y,i[9]=_i.y,i[2]=ys.z,i[6]=Wu.z,i[10]=_i.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],l=n[4],c=n[8],h=n[12],f=n[1],d=n[5],g=n[9],p=n[13],_=n[2],x=n[6],b=n[10],v=n[14],y=n[3],S=n[7],M=n[11],A=n[15],R=i[0],T=i[4],N=i[8],X=i[12],H=i[1],O=i[5],te=i[9],V=i[13],Y=i[2],$=i[6],W=i[10],ee=i[14],re=i[3],Le=i[7],J=i[11],ve=i[15];return r[0]=s*R+l*H+c*Y+h*re,r[4]=s*T+l*O+c*$+h*Le,r[8]=s*N+l*te+c*W+h*J,r[12]=s*X+l*V+c*ee+h*ve,r[1]=f*R+d*H+g*Y+p*re,r[5]=f*T+d*O+g*$+p*Le,r[9]=f*N+d*te+g*W+p*J,r[13]=f*X+d*V+g*ee+p*ve,r[2]=_*R+x*H+b*Y+v*re,r[6]=_*T+x*O+b*$+v*Le,r[10]=_*N+x*te+b*W+v*J,r[14]=_*X+x*V+b*ee+v*ve,r[3]=y*R+S*H+M*Y+A*re,r[7]=y*T+S*O+M*$+A*Le,r[11]=y*N+S*te+M*W+A*J,r[15]=y*X+S*V+M*ee+A*ve,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],l=e[5],c=e[9],h=e[13],f=e[2],d=e[6],g=e[10],p=e[14],_=e[3],x=e[7],b=e[11],v=e[15];return _*(+r*c*d-i*h*d-r*l*g+n*h*g+i*l*p-n*c*p)+x*(+t*c*p-t*h*g+r*s*g-i*s*p+i*h*f-r*c*f)+b*(+t*h*d-t*l*p-r*s*d+n*s*p+r*l*f-n*h*f)+v*(-i*l*f-t*c*d+t*l*g+i*s*d-n*s*g+n*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=e[8],d=e[9],g=e[10],p=e[11],_=e[12],x=e[13],b=e[14],v=e[15],y=d*b*h-x*g*h+x*c*p-l*b*p-d*c*v+l*g*v,S=_*g*h-f*b*h-_*c*p+s*b*p+f*c*v-s*g*v,M=f*x*h-_*d*h+_*l*p-s*x*p-f*l*v+s*d*v,A=_*d*c-f*x*c-_*l*g+s*x*g+f*l*b-s*d*b,R=t*y+n*S+i*M+r*A;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/R;return e[0]=y*T,e[1]=(x*g*r-d*b*r-x*i*p+n*b*p+d*i*v-n*g*v)*T,e[2]=(l*b*r-x*c*r+x*i*h-n*b*h-l*i*v+n*c*v)*T,e[3]=(d*c*r-l*g*r-d*i*h+n*g*h+l*i*p-n*c*p)*T,e[4]=S*T,e[5]=(f*b*r-_*g*r+_*i*p-t*b*p-f*i*v+t*g*v)*T,e[6]=(_*c*r-s*b*r-_*i*h+t*b*h+s*i*v-t*c*v)*T,e[7]=(s*g*r-f*c*r+f*i*h-t*g*h-s*i*p+t*c*p)*T,e[8]=M*T,e[9]=(_*d*r-f*x*r-_*n*p+t*x*p+f*n*v-t*d*v)*T,e[10]=(s*x*r-_*l*r+_*n*h-t*x*h-s*n*v+t*l*v)*T,e[11]=(f*l*r-s*d*r-f*n*h+t*d*h+s*n*p-t*l*p)*T,e[12]=A*T,e[13]=(f*x*i-_*d*i+_*n*g-t*x*g-f*n*b+t*d*b)*T,e[14]=(_*l*i-s*x*i-_*n*c+t*x*c+s*n*b-t*l*b)*T,e[15]=(s*d*i-f*l*i+f*n*c-t*d*c-s*n*g+t*l*g)*T,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,l=e.y,c=e.z,h=r*s,f=r*l;return this.set(h*s+n,h*l-i*c,h*c+i*l,0,h*l+i*c,f*l+n,f*c-i*s,0,h*c-i*l,f*c+i*s,r*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,l=t._z,c=t._w,h=r+r,f=s+s,d=l+l,g=r*h,p=r*f,_=r*d,x=s*f,b=s*d,v=l*d,y=c*h,S=c*f,M=c*d,A=n.x,R=n.y,T=n.z;return i[0]=(1-(x+v))*A,i[1]=(p+M)*A,i[2]=(_-S)*A,i[3]=0,i[4]=(p-M)*R,i[5]=(1-(g+v))*R,i[6]=(b+y)*R,i[7]=0,i[8]=(_+S)*T,i[9]=(b-y)*T,i[10]=(1-(g+x))*T,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=ya.set(i[0],i[1],i[2]).length();const s=ya.set(i[4],i[5],i[6]).length(),l=ya.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],qi.copy(this);const h=1/r,f=1/s,d=1/l;return qi.elements[0]*=h,qi.elements[1]*=h,qi.elements[2]*=h,qi.elements[4]*=f,qi.elements[5]*=f,qi.elements[6]*=f,qi.elements[8]*=d,qi.elements[9]*=d,qi.elements[10]*=d,t.setFromRotationMatrix(qi),n.x=r,n.y=s,n.z=l,this}makePerspective(e,t,n,i,r,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,c=2*r/(t-e),h=2*r/(n-i),f=(t+e)/(t-e),d=(n+i)/(n-i),g=-(s+r)/(s-r),p=-2*s*r/(s-r);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,r,s){const l=this.elements,c=1/(t-e),h=1/(n-i),f=1/(s-r),d=(t+e)*c,g=(n+i)*h,p=(s+r)*f;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=-2*f,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Ve.prototype.isMatrix4=!0;const ya=new U,qi=new Ve,jC=new U(0,0,0),ZC=new U(1,1,1),ys=new U,Wu=new U,_i=new U,ux=new Ve,hx=new Hn;class wa{constructor(e=0,t=0,n=0,i=wa.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],s=i[4],l=i[8],c=i[1],h=i[5],f=i[9],d=i[2],g=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(si(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-si(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(si(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-si(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(g,p),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(si(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-si(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ux.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ux,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return hx.setFromEuler(this),this.setFromQuaternion(hx,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new U(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}wa.prototype.isEuler=!0;wa.DefaultOrder="XYZ";wa.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class fx{constructor(){this.mask=1|0}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}}let JC=0;const dx=new U,ba=new Hn,Ur=new Ve,Xu=new U,Gl=new U,KC=new U,$C=new Hn,px=new U(1,0,0),mx=new U(0,1,0),gx=new U(0,0,1),QC={type:"added"},_x={type:"removed"};class Mt extends oo{constructor(){super();Object.defineProperty(this,"id",{value:JC++}),this.uuid=Bi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mt.DefaultUp.clone();const e=new U,t=new wa,n=new Hn,i=new U(1,1,1);function r(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ve},normalMatrix:{value:new En}}),this.matrix=new Ve,this.matrixWorld=new Ve,this.matrixAutoUpdate=Mt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new fx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ba.setFromAxisAngle(e,t),this.quaternion.multiply(ba),this}rotateOnWorldAxis(e,t){return ba.setFromAxisAngle(e,t),this.quaternion.premultiply(ba),this}rotateX(e){return this.rotateOnAxis(px,e)}rotateY(e){return this.rotateOnAxis(mx,e)}rotateZ(e){return this.rotateOnAxis(gx,e)}translateOnAxis(e,t){return dx.copy(e).applyQuaternion(this.quaternion),this.position.add(dx.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(px,e)}translateY(e){return this.translateOnAxis(mx,e)}translateZ(e){return this.translateOnAxis(gx,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ur.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Xu.copy(e):Xu.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Gl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ur.lookAt(Gl,Xu,this.up):Ur.lookAt(Xu,Gl,this.up),this.quaternion.setFromRotationMatrix(Ur),i&&(Ur.extractRotation(i.matrixWorld),ba.setFromRotationMatrix(Ur),this.quaternion.premultiply(ba.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(QC)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_x)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(_x)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ur.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ur.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ur),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,e,KC),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,$C,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function r(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let h=0,f=c.length;h<f;h++){const d=c[h];r(e.shapes,d)}else r(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,h=this.material.length;c<h;c++)l.push(r(e.materials,this.material[c]));i.material=l}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(r(e.animations,c))}}if(t){const l=s(e.geometries),c=s(e.materials),h=s(e.textures),f=s(e.images),d=s(e.shapes),g=s(e.skeletons),p=s(e.animations);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),f.length>0&&(n.images=f),d.length>0&&(n.shapes=d),g.length>0&&(n.skeletons=g),p.length>0&&(n.animations=p)}return n.object=i,n;function s(l){const c=[];for(const h in l){const f=l[h];delete f.metadata,c.push(f)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Mt.DefaultUp=new U(0,1,0);Mt.DefaultMatrixAutoUpdate=!0;Mt.prototype.isObject3D=!0;const ji=new U,zr=new U,rp=new U,kr=new U,Ma=new U,Sa=new U,vx=new U,sp=new U,op=new U,ap=new U;class cn{constructor(e=new U,t=new U,n=new U){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ji.subVectors(e,t),i.cross(ji);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){ji.subVectors(i,t),zr.subVectors(n,t),rp.subVectors(e,t);const s=ji.dot(ji),l=ji.dot(zr),c=ji.dot(rp),h=zr.dot(zr),f=zr.dot(rp),d=s*h-l*l;if(d===0)return r.set(-2,-1,-1);const g=1/d,p=(h*c-l*f)*g,_=(s*f-l*c)*g;return r.set(1-p-_,_,p)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,kr),kr.x>=0&&kr.y>=0&&kr.x+kr.y<=1}static getUV(e,t,n,i,r,s,l,c){return this.getBarycoord(e,t,n,i,kr),c.set(0,0),c.addScaledVector(r,kr.x),c.addScaledVector(s,kr.y),c.addScaledVector(l,kr.z),c}static isFrontFacing(e,t,n,i){return ji.subVectors(n,t),zr.subVectors(e,t),ji.cross(zr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ji.subVectors(this.c,this.b),zr.subVectors(this.a,this.b),ji.cross(zr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return cn.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return cn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,l;Ma.subVectors(i,n),Sa.subVectors(r,n),sp.subVectors(e,n);const c=Ma.dot(sp),h=Sa.dot(sp);if(c<=0&&h<=0)return t.copy(n);op.subVectors(e,i);const f=Ma.dot(op),d=Sa.dot(op);if(f>=0&&d<=f)return t.copy(i);const g=c*d-f*h;if(g<=0&&c>=0&&f<=0)return s=c/(c-f),t.copy(n).addScaledVector(Ma,s);ap.subVectors(e,r);const p=Ma.dot(ap),_=Sa.dot(ap);if(_>=0&&p<=_)return t.copy(r);const x=p*h-c*_;if(x<=0&&h>=0&&_<=0)return l=h/(h-_),t.copy(n).addScaledVector(Sa,l);const b=f*_-p*d;if(b<=0&&d-f>=0&&p-_>=0)return vx.subVectors(r,i),l=(d-f)/(d-f+(p-_)),t.copy(i).addScaledVector(vx,l);const v=1/(b+x+g);return s=x*v,l=g*v,t.copy(n).addScaledVector(Ma,s).addScaledVector(Sa,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let e2=0;class mn extends oo{constructor(){super();Object.defineProperty(this,"id",{value:e2++}),this.uuid=Bi(),this.name="",this.type="Material",this.fog=!0,this.blending=Rl,this.side=oa,this.vertexColors=!1,this.opacity=1,this.format=Pn,this.transparent=!1,this.blendSrc=Bv,this.blendDst=Uv,this.blendEquation=aa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Nd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=RC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yd,this.stencilZFail=Yd,this.stencilZPass=Yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Pv;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Rl&&(n.blending=this.blending),this.side!==oa&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Pn&&(n.format=this.format),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(r){const s=[];for(const l in r){const c=r[l];delete c.metadata,s.push(c)}return s}if(t){const r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}mn.prototype.isMaterial=!0;const xx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zi={h:0,s:0,l:0},Yu={h:0,s:0,l:0};function lp(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(e-a)*6*t:t<1/2?e:t<2/3?a+(e-a)*6*(2/3-t):a}function cp(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function up(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}class Ne{constructor(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=qd(e,1),t=si(t,0,1),n=si(n,0,1),t===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=lp(r,i,e+1/3),this.g=lp(r,i,e),this.b=lp(r,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const l=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(l,c,h)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=n[1],r=i.length;if(r===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(r===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=xx[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=cp(e.r),this.g=cp(e.g),this.b=cp(e.b),this}copyLinearToSRGB(e){return this.r=up(e.r),this.g=up(e.g),this.b=up(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),s=Math.min(t,n,i);let l,c;const h=(s+r)/2;if(s===r)l=0,c=0;else{const f=r-s;switch(c=h<=.5?f/(r+s):f/(2-r-s),r){case t:l=(n-i)/f+(n<i?6:0);break;case n:l=(i-t)/f+2;break;case i:l=(t-n)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,n){return this.getHSL(Zi),Zi.h+=e,Zi.s+=t,Zi.l+=n,this.setHSL(Zi.h,Zi.s,Zi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zi),e.getHSL(Yu);const n=Ul(Zi.h,Yu.h,t),i=Ul(Zi.s,Yu.s,t),r=Ul(Zi.l,Yu.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ne.NAMES=xx;Ne.prototype.isColor=!0;Ne.prototype.r=1;Ne.prototype.g=1;Ne.prototype.b=1;class ws extends mn{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ws.prototype.isMeshBasicMaterial=!0;const Ut=new U,qu=new Ee;class Zt{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Ne),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Ee),t[n++]=s.x,t[n++]=s.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new U),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Ft),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)qu.fromBufferAttribute(this,t),qu.applyMatrix3(e),this.setXY(t,qu.x,qu.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ut.fromBufferAttribute(this,t),Ut.applyMatrix3(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ut.x=this.getX(t),Ut.y=this.getY(t),Ut.z=this.getZ(t),Ut.applyMatrix4(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ut.x=this.getX(t),Ut.y=this.getY(t),Ut.z=this.getZ(t),Ut.applyNormalMatrix(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ut.x=this.getX(t),Ut.y=this.getY(t),Ut.z=this.getZ(t),Ut.transformDirection(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Fl&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Zt.prototype.isBufferAttribute=!0;class yx extends Zt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class wx extends Zt{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class t2 extends Zt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}t2.prototype.isFloat16BufferAttribute=!0;class rn extends Zt{constructor(e,t,n){super(new Float32Array(e),t,n)}}let n2=0;const zi=new Ve,hp=new Mt,Ta=new U,vi=new Ui,Hl=new Ui,xn=new U;class Nt extends oo{constructor(){super();Object.defineProperty(this,"id",{value:n2++}),this.uuid=Bi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sx(e)>65535?wx:yx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new En().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return zi.makeRotationFromQuaternion(e),this.applyMatrix4(zi),this}rotateX(e){return zi.makeRotationX(e),this.applyMatrix4(zi),this}rotateY(e){return zi.makeRotationY(e),this.applyMatrix4(zi),this}rotateZ(e){return zi.makeRotationZ(e),this.applyMatrix4(zi),this}translate(e,t,n){return zi.makeTranslation(e,t,n),this.applyMatrix4(zi),this}scale(e,t,n){return zi.makeScale(e,t,n),this.applyMatrix4(zi),this}lookAt(e){return hp.lookAt(e),hp.updateMatrix(),this.applyMatrix4(hp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ta).negate(),this.translate(Ta.x,Ta.y,Ta.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new rn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];vi.setFromBufferAttribute(r),this.morphTargetsRelative?(xn.addVectors(this.boundingBox.min,vi.min),this.boundingBox.expandByPoint(xn),xn.addVectors(this.boundingBox.max,vi.max),this.boundingBox.expandByPoint(xn)):(this.boundingBox.expandByPoint(vi.min),this.boundingBox.expandByPoint(vi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(e){const n=this.boundingSphere.center;if(vi.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const l=t[r];Hl.setFromBufferAttribute(l),this.morphTargetsRelative?(xn.addVectors(vi.min,Hl.min),vi.expandByPoint(xn),xn.addVectors(vi.max,Hl.max),vi.expandByPoint(xn)):(vi.expandByPoint(Hl.min),vi.expandByPoint(Hl.max))}vi.getCenter(n);let i=0;for(let r=0,s=e.count;r<s;r++)xn.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(xn));if(t)for(let r=0,s=t.length;r<s;r++){const l=t[r],c=this.morphTargetsRelative;for(let h=0,f=l.count;h<f;h++)xn.fromBufferAttribute(l,h),c&&(Ta.fromBufferAttribute(e,h),xn.add(Ta)),i=Math.max(i,n.distanceToSquared(xn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,l=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Zt(new Float32Array(4*l),4));const c=t.tangent.array,h=[],f=[];for(let H=0;H<l;H++)h[H]=new U,f[H]=new U;const d=new U,g=new U,p=new U,_=new Ee,x=new Ee,b=new Ee,v=new U,y=new U;function S(H,O,te){d.fromArray(i,H*3),g.fromArray(i,O*3),p.fromArray(i,te*3),_.fromArray(s,H*2),x.fromArray(s,O*2),b.fromArray(s,te*2),g.sub(d),p.sub(d),x.sub(_),b.sub(_);const V=1/(x.x*b.y-b.x*x.y);!isFinite(V)||(v.copy(g).multiplyScalar(b.y).addScaledVector(p,-x.y).multiplyScalar(V),y.copy(p).multiplyScalar(x.x).addScaledVector(g,-b.x).multiplyScalar(V),h[H].add(v),h[O].add(v),h[te].add(v),f[H].add(y),f[O].add(y),f[te].add(y))}let M=this.groups;M.length===0&&(M=[{start:0,count:n.length}]);for(let H=0,O=M.length;H<O;++H){const te=M[H],V=te.start,Y=te.count;for(let $=V,W=V+Y;$<W;$+=3)S(n[$+0],n[$+1],n[$+2])}const A=new U,R=new U,T=new U,N=new U;function X(H){T.fromArray(r,H*3),N.copy(T);const O=h[H];A.copy(O),A.sub(T.multiplyScalar(T.dot(O))).normalize(),R.crossVectors(N,O);const V=R.dot(f[H])<0?-1:1;c[H*4]=A.x,c[H*4+1]=A.y,c[H*4+2]=A.z,c[H*4+3]=V}for(let H=0,O=M.length;H<O;++H){const te=M[H],V=te.start,Y=te.count;for(let $=V,W=V+Y;$<W;$+=3)X(n[$+0]),X(n[$+1]),X(n[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Zt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,p=n.count;g<p;g++)n.setXYZ(g,0,0,0);const i=new U,r=new U,s=new U,l=new U,c=new U,h=new U,f=new U,d=new U;if(e)for(let g=0,p=e.count;g<p;g+=3){const _=e.getX(g+0),x=e.getX(g+1),b=e.getX(g+2);i.fromBufferAttribute(t,_),r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,b),f.subVectors(s,r),d.subVectors(i,r),f.cross(d),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,x),h.fromBufferAttribute(n,b),l.add(f),c.add(f),h.add(f),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(x,c.x,c.y,c.z),n.setXYZ(b,h.x,h.y,h.z)}else for(let g=0,p=t.count;g<p;g+=3)i.fromBufferAttribute(t,g+0),r.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),f.subVectors(s,r),d.subVectors(i,r),f.cross(d),n.setXYZ(g+0,f.x,f.y,f.z),n.setXYZ(g+1,f.x,f.y,f.z),n.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const s=n[i].array,l=e.attributes[i],c=l.array,h=l.itemSize*t,f=Math.min(c.length,s.length-h);for(let d=0,g=h;d<f;d++,g++)s[g]=c[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)xn.fromBufferAttribute(e,t),xn.normalize(),e.setXYZ(t,xn.x,xn.y,xn.z)}toNonIndexed(){function e(l,c){const h=l.array,f=l.itemSize,d=l.normalized,g=new h.constructor(c.length*f);let p=0,_=0;for(let x=0,b=c.length;x<b;x++){l.isInterleavedBufferAttribute?p=c[x]*l.data.stride+l.offset:p=c[x]*f;for(let v=0;v<f;v++)g[_++]=h[p++]}return new Zt(g,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nt,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],h=e(c,n);t.setAttribute(l,h)}const r=this.morphAttributes;for(const l in r){const c=[],h=r[l];for(let f=0,d=h.length;f<d;f++){const g=h[f],p=e(g,n);c.push(p)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,c=s.length;l<c;l++){const h=s[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const i={};let r=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let d=0,g=h.length;d<g;d++){const p=h[d];f.push(p.toJSON(e.data))}f.length>0&&(i[c]=f,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const h in i){const f=i[h];this.setAttribute(h,f.clone(t))}const r=e.morphAttributes;for(const h in r){const f=[],d=r[h];for(let g=0,p=d.length;g<p;g++)f.push(d[g].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let h=0,f=s.length;h<f;h++){const d=s[h];this.addGroup(d.start,d.count,d.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Nt.prototype.isBufferGeometry=!0;const bx=new Ve,Ea=new uo,fp=new co,bs=new U,Ms=new U,Ss=new U,dp=new U,pp=new U,mp=new U,ju=new U,Zu=new U,Ju=new U,Ku=new Ee,$u=new Ee,Qu=new Ee,gp=new U,eh=new U;class Vn extends Mt{constructor(e=new Nt,t=new ws){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),fp.copy(n.boundingSphere),fp.applyMatrix4(r),e.ray.intersectsSphere(fp)===!1)||(bx.copy(r).invert(),Ea.copy(e.ray).applyMatrix4(bx),n.boundingBox!==null&&Ea.intersectsBox(n.boundingBox)===!1))return;let s;if(n.isBufferGeometry){const l=n.index,c=n.attributes.position,h=n.morphAttributes.position,f=n.morphTargetsRelative,d=n.attributes.uv,g=n.attributes.uv2,p=n.groups,_=n.drawRange;if(l!==null)if(Array.isArray(i))for(let x=0,b=p.length;x<b;x++){const v=p[x],y=i[v.materialIndex],S=Math.max(v.start,_.start),M=Math.min(l.count,Math.min(v.start+v.count,_.start+_.count));for(let A=S,R=M;A<R;A+=3){const T=l.getX(A),N=l.getX(A+1),X=l.getX(A+2);s=th(this,y,e,Ea,c,h,f,d,g,T,N,X),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const x=Math.max(0,_.start),b=Math.min(l.count,_.start+_.count);for(let v=x,y=b;v<y;v+=3){const S=l.getX(v),M=l.getX(v+1),A=l.getX(v+2);s=th(this,i,e,Ea,c,h,f,d,g,S,M,A),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(i))for(let x=0,b=p.length;x<b;x++){const v=p[x],y=i[v.materialIndex],S=Math.max(v.start,_.start),M=Math.min(c.count,Math.min(v.start+v.count,_.start+_.count));for(let A=S,R=M;A<R;A+=3){const T=A,N=A+1,X=A+2;s=th(this,y,e,Ea,c,h,f,d,g,T,N,X),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const x=Math.max(0,_.start),b=Math.min(c.count,_.start+_.count);for(let v=x,y=b;v<y;v+=3){const S=v,M=v+1,A=v+2;s=th(this,i,e,Ea,c,h,f,d,g,S,M,A),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Vn.prototype.isMesh=!0;function i2(a,e,t,n,i,r,s,l){let c;if(e.side===fn?c=n.intersectTriangle(s,r,i,!0,l):c=n.intersectTriangle(i,r,s,e.side!==no,l),c===null)return null;eh.copy(l),eh.applyMatrix4(a.matrixWorld);const h=t.ray.origin.distanceTo(eh);return h<t.near||h>t.far?null:{distance:h,point:eh.clone(),object:a}}function th(a,e,t,n,i,r,s,l,c,h,f,d){bs.fromBufferAttribute(i,h),Ms.fromBufferAttribute(i,f),Ss.fromBufferAttribute(i,d);const g=a.morphTargetInfluences;if(r&&g){ju.set(0,0,0),Zu.set(0,0,0),Ju.set(0,0,0);for(let _=0,x=r.length;_<x;_++){const b=g[_],v=r[_];b!==0&&(dp.fromBufferAttribute(v,h),pp.fromBufferAttribute(v,f),mp.fromBufferAttribute(v,d),s?(ju.addScaledVector(dp,b),Zu.addScaledVector(pp,b),Ju.addScaledVector(mp,b)):(ju.addScaledVector(dp.sub(bs),b),Zu.addScaledVector(pp.sub(Ms),b),Ju.addScaledVector(mp.sub(Ss),b)))}bs.add(ju),Ms.add(Zu),Ss.add(Ju)}a.isSkinnedMesh&&(a.boneTransform(h,bs),a.boneTransform(f,Ms),a.boneTransform(d,Ss));const p=i2(a,e,t,n,bs,Ms,Ss,gp);if(p){l&&(Ku.fromBufferAttribute(l,h),$u.fromBufferAttribute(l,f),Qu.fromBufferAttribute(l,d),p.uv=cn.getUV(gp,bs,Ms,Ss,Ku,$u,Qu,new Ee)),c&&(Ku.fromBufferAttribute(c,h),$u.fromBufferAttribute(c,f),Qu.fromBufferAttribute(c,d),p.uv2=cn.getUV(gp,bs,Ms,Ss,Ku,$u,Qu,new Ee));const _={a:h,b:f,c:d,normal:new U,materialIndex:0};cn.getNormal(bs,Ms,Ss,_.normal),p.face=_}return p}class Vl extends Nt{constructor(e=1,t=1,n=1,i=1,r=1,s=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const l=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const c=[],h=[],f=[],d=[];let g=0,p=0;_("z","y","x",-1,-1,n,t,e,s,r,0),_("z","y","x",1,-1,n,t,-e,s,r,1),_("x","z","y",1,1,e,n,t,i,s,2),_("x","z","y",1,-1,e,n,-t,i,s,3),_("x","y","z",1,-1,e,t,n,i,r,4),_("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(c),this.setAttribute("position",new rn(h,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(d,2));function _(x,b,v,y,S,M,A,R,T,N,X){const H=M/T,O=A/N,te=M/2,V=A/2,Y=R/2,$=T+1,W=N+1;let ee=0,re=0;const Le=new U;for(let J=0;J<W;J++){const ve=J*O-V;for(let ze=0;ze<$;ze++){const fe=ze*H-te;Le[x]=fe*y,Le[b]=ve*S,Le[v]=Y,h.push(Le.x,Le.y,Le.z),Le[x]=0,Le[b]=0,Le[v]=R>0?1:-1,f.push(Le.x,Le.y,Le.z),d.push(ze/T),d.push(1-J/N),ee+=1}}for(let J=0;J<N;J++)for(let ve=0;ve<T;ve++){const ze=g+ve+$*J,fe=g+ve+$*(J+1),Me=g+(ve+1)+$*(J+1),Te=g+(ve+1)+$*J;c.push(ze,fe,Te),c.push(fe,Me,Te),re+=6}l.addGroup(p,re,X),p+=re,g+=ee}}static fromJSON(e){return new Vl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Aa(a){const e={};for(const t in a){e[t]={};for(const n in a[t]){const i=a[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Dn(a){const e={};for(let t=0;t<a.length;t++){const n=Aa(a[t]);for(const i in n)e[i]=n[i]}return e}const r2={clone:Aa,merge:Dn};var s2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,o2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ho extends mn{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=s2,this.fragmentShader=o2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Aa(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}ho.prototype.isShaderMaterial=!0;class _p extends Mt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Ve,this.projectionMatrix=new Ve,this.projectionMatrixInverse=new Ve}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}_p.prototype.isCamera=!0;class Wn extends _p{constructor(e=50,t=1,n=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Bl*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Nl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Bl*2*Math.atan(Math.tan(Nl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Nl*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,h=s.fullHeight;r+=s.offsetX*i/c,t-=s.offsetY*n/h,i*=s.width/c,n*=s.height/h}const l=this.filmOffset;l!==0&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Wn.prototype.isPerspectiveCamera=!0;const La=90,Ra=1;class vp extends Mt{constructor(e,t,n){super();if(this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Wn(La,Ra,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new U(1,0,0)),this.add(i);const r=new Wn(La,Ra,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new U(-1,0,0)),this.add(r);const s=new Wn(La,Ra,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new U(0,1,0)),this.add(s);const l=new Wn(La,Ra,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new U(0,-1,0)),this.add(l);const c=new Wn(La,Ra,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new U(0,0,1)),this.add(c);const h=new Wn(La,Ra,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new U(0,0,-1)),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,l,c,h]=this.children,f=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=g,e.setRenderTarget(n,5),e.render(t,h),e.setRenderTarget(d),e.xr.enabled=f}}class nh extends pn{constructor(e,t,n,i,r,s,l,c,h,f){e=e!==void 0?e:[],t=t!==void 0?t:Cl;super(e,t,n,i,r,s,l,c,h,f);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}nh.prototype.isCubeTexture=!0;class Mx extends lr{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n);super(e,e,t);t=t||{},this.texture=new nh(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ri,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Pn,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Vl(5,5,5),r=new ho({name:"CubemapFromEquirect",uniforms:Aa(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:fn,blending:ms});r.uniforms.tEquirect.value=t;const s=new Vn(i,r),l=t.minFilter;return t.minFilter===ca&&(t.minFilter=ri),new vp(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)}}Mx.prototype.isWebGLCubeRenderTarget=!0;const xp=new U,a2=new U,l2=new En;class Gr{constructor(e=new U(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=xp.subVectors(n,t).cross(a2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(xp),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||l2.getNormalMatrix(e),i=this.coplanarPoint(xp).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Gr.prototype.isPlane=!0;const Ca=new co,ih=new U;class rh{constructor(e=new Gr,t=new Gr,n=new Gr,i=new Gr,r=new Gr,s=new Gr){this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(r),l[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],l=n[3],c=n[4],h=n[5],f=n[6],d=n[7],g=n[8],p=n[9],_=n[10],x=n[11],b=n[12],v=n[13],y=n[14],S=n[15];return t[0].setComponents(l-i,d-c,x-g,S-b).normalize(),t[1].setComponents(l+i,d+c,x+g,S+b).normalize(),t[2].setComponents(l+r,d+h,x+p,S+v).normalize(),t[3].setComponents(l-r,d-h,x-p,S-v).normalize(),t[4].setComponents(l-s,d-f,x-_,S-y).normalize(),t[5].setComponents(l+s,d+f,x+_,S+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ca.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ca)}intersectsSprite(e){return Ca.center.set(0,0,0),Ca.radius=.7071067811865476,Ca.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ca)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(ih.x=i.normal.x>0?e.max.x:e.min.x,ih.y=i.normal.y>0?e.max.y:e.min.y,ih.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ih)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Sx(){let a=null,e=!1,t=null,n=null;function i(r,s){t(r,s),n=a.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=a.requestAnimationFrame(i),e=!0)},stop:function(){a.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){a=r}}}function c2(a,e){const t=e.isWebGL2,n=new WeakMap;function i(h,f){const d=h.array,g=h.usage,p=a.createBuffer();a.bindBuffer(f,p),a.bufferData(f,d,g),h.onUploadCallback();let _=5126;return d instanceof Float32Array?_=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?h.isFloat16BufferAttribute?t?_=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):_=5123:d instanceof Int16Array?_=5122:d instanceof Uint32Array?_=5125:d instanceof Int32Array?_=5124:d instanceof Int8Array?_=5120:(d instanceof Uint8Array||d instanceof Uint8ClampedArray)&&(_=5121),{buffer:p,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:h.version}}function r(h,f,d){const g=f.array,p=f.updateRange;a.bindBuffer(d,h),p.count===-1?a.bufferSubData(d,0,g):(t?a.bufferSubData(d,p.offset*g.BYTES_PER_ELEMENT,g,p.offset,p.count):a.bufferSubData(d,p.offset*g.BYTES_PER_ELEMENT,g.subarray(p.offset,p.offset+p.count)),p.count=-1)}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=n.get(h);f&&(a.deleteBuffer(f.buffer),n.delete(h))}function c(h,f){if(h.isGLBufferAttribute){const g=n.get(h);(!g||g.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const d=n.get(h);d===void 0?n.set(h,i(h,f)):d.version<h.version&&(r(d.buffer,h,f),d.version=h.version)}return{get:s,remove:l,update:c}}class yp extends Nt{constructor(e=1,t=1,n=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,l=Math.floor(n),c=Math.floor(i),h=l+1,f=c+1,d=e/l,g=t/c,p=[],_=[],x=[],b=[];for(let v=0;v<f;v++){const y=v*g-s;for(let S=0;S<h;S++){const M=S*d-r;_.push(M,-y,0),x.push(0,0,1),b.push(S/l),b.push(1-v/c)}}for(let v=0;v<c;v++)for(let y=0;y<l;y++){const S=y+h*v,M=y+h*(v+1),A=y+1+h*(v+1),R=y+1+h*v;p.push(S,M,R),p.push(M,A,R)}this.setIndex(p),this.setAttribute("position",new rn(_,3)),this.setAttribute("normal",new rn(x,3)),this.setAttribute("uv",new rn(b,2))}static fromJSON(e){return new yp(e.width,e.height,e.widthSegments,e.heightSegments)}}var u2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,h2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,f2=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,d2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,p2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,m2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,g2="vec3 transformed = vec3( position );",_2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,v2=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,x2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,y2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,w2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,b2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,M2=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,S2=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,T2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,E2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,A2=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,L2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,R2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,C2=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,P2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,I2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,D2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,O2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,F2="gl_FragColor = linearToOutputTexel( gl_FragColor );",N2=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,B2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,U2=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,z2=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,k2=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,G2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,H2=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,V2=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,W2=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,X2=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Y2=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,q2=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,j2=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Z2=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,J2=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,K2=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,$2=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Q2=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,eP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,nP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,iP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rP=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,sP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,oP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,aP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,uP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,hP=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,fP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_P=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,vP=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,xP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,yP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,wP=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,MP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,SP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,TP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,EP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,AP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,LP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,RP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,CP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,PP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,IP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,DP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,OP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,FP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,NP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,UP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,zP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,kP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,GP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,HP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,VP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,WP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,XP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,YP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,qP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ZP=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,JP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,KP=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,$P=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,QP=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,e3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,t3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,n3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,i3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const r3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,s3=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,o3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,a3=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,l3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,c3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,u3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,h3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,f3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,d3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,p3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,m3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,g3=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,_3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v3=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,x3=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,w3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,M3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,S3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,A3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,R3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,P3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,I3=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,D3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,O3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,F3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ct={alphamap_fragment:u2,alphamap_pars_fragment:h2,alphatest_fragment:f2,alphatest_pars_fragment:d2,aomap_fragment:p2,aomap_pars_fragment:m2,begin_vertex:g2,beginnormal_vertex:_2,bsdfs:v2,bumpmap_pars_fragment:x2,clipping_planes_fragment:y2,clipping_planes_pars_fragment:w2,clipping_planes_pars_vertex:b2,clipping_planes_vertex:M2,color_fragment:S2,color_pars_fragment:T2,color_pars_vertex:E2,color_vertex:A2,common:L2,cube_uv_reflection_fragment:R2,defaultnormal_vertex:C2,displacementmap_pars_vertex:P2,displacementmap_vertex:I2,emissivemap_fragment:D2,emissivemap_pars_fragment:O2,encodings_fragment:F2,encodings_pars_fragment:N2,envmap_fragment:B2,envmap_common_pars_fragment:U2,envmap_pars_fragment:z2,envmap_pars_vertex:k2,envmap_physical_pars_fragment:K2,envmap_vertex:G2,fog_vertex:H2,fog_pars_vertex:V2,fog_fragment:W2,fog_pars_fragment:X2,gradientmap_pars_fragment:Y2,lightmap_fragment:q2,lightmap_pars_fragment:j2,lights_lambert_vertex:Z2,lights_pars_begin:J2,lights_toon_fragment:$2,lights_toon_pars_fragment:Q2,lights_phong_fragment:eP,lights_phong_pars_fragment:tP,lights_physical_fragment:nP,lights_physical_pars_fragment:iP,lights_fragment_begin:rP,lights_fragment_maps:sP,lights_fragment_end:oP,logdepthbuf_fragment:aP,logdepthbuf_pars_fragment:lP,logdepthbuf_pars_vertex:cP,logdepthbuf_vertex:uP,map_fragment:hP,map_pars_fragment:fP,map_particle_fragment:dP,map_particle_pars_fragment:pP,metalnessmap_fragment:mP,metalnessmap_pars_fragment:gP,morphnormal_vertex:_P,morphtarget_pars_vertex:vP,morphtarget_vertex:xP,normal_fragment_begin:yP,normal_fragment_maps:wP,normal_pars_fragment:bP,normal_pars_vertex:MP,normal_vertex:SP,normalmap_pars_fragment:TP,clearcoat_normal_fragment_begin:EP,clearcoat_normal_fragment_maps:AP,clearcoat_pars_fragment:LP,output_fragment:RP,packing:CP,premultiplied_alpha_fragment:PP,project_vertex:IP,dithering_fragment:DP,dithering_pars_fragment:OP,roughnessmap_fragment:FP,roughnessmap_pars_fragment:NP,shadowmap_pars_fragment:BP,shadowmap_pars_vertex:UP,shadowmap_vertex:zP,shadowmask_pars_fragment:kP,skinbase_vertex:GP,skinning_pars_vertex:HP,skinning_vertex:VP,skinnormal_vertex:WP,specularmap_fragment:XP,specularmap_pars_fragment:YP,tonemapping_fragment:qP,tonemapping_pars_fragment:jP,transmission_fragment:ZP,transmission_pars_fragment:JP,uv_pars_fragment:KP,uv_pars_vertex:$P,uv_vertex:QP,uv2_pars_fragment:e3,uv2_pars_vertex:t3,uv2_vertex:n3,worldpos_vertex:i3,background_vert:r3,background_frag:s3,cube_vert:o3,cube_frag:a3,depth_vert:l3,depth_frag:c3,distanceRGBA_vert:u3,distanceRGBA_frag:h3,equirect_vert:f3,equirect_frag:d3,linedashed_vert:p3,linedashed_frag:m3,meshbasic_vert:g3,meshbasic_frag:_3,meshlambert_vert:v3,meshlambert_frag:x3,meshmatcap_vert:y3,meshmatcap_frag:w3,meshnormal_vert:b3,meshnormal_frag:M3,meshphong_vert:S3,meshphong_frag:T3,meshphysical_vert:E3,meshphysical_frag:A3,meshtoon_vert:L3,meshtoon_frag:R3,points_vert:C3,points_frag:P3,shadow_vert:I3,shadow_frag:D3,sprite_vert:O3,sprite_frag:F3},Pe={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new En},uv2Transform:{value:new En},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new En}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new En}}},cr={basic:{uniforms:Dn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:ct.meshbasic_vert,fragmentShader:ct.meshbasic_frag},lambert:{uniforms:Dn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.fog,Pe.lights,{emissive:{value:new Ne(0)}}]),vertexShader:ct.meshlambert_vert,fragmentShader:ct.meshlambert_frag},phong:{uniforms:Dn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:ct.meshphong_vert,fragmentShader:ct.meshphong_frag},standard:{uniforms:Dn([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag},toon:{uniforms:Dn([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new Ne(0)}}]),vertexShader:ct.meshtoon_vert,fragmentShader:ct.meshtoon_frag},matcap:{uniforms:Dn([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:ct.meshmatcap_vert,fragmentShader:ct.meshmatcap_frag},points:{uniforms:Dn([Pe.points,Pe.fog]),vertexShader:ct.points_vert,fragmentShader:ct.points_frag},dashed:{uniforms:Dn([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ct.linedashed_vert,fragmentShader:ct.linedashed_frag},depth:{uniforms:Dn([Pe.common,Pe.displacementmap]),vertexShader:ct.depth_vert,fragmentShader:ct.depth_frag},normal:{uniforms:Dn([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:ct.meshnormal_vert,fragmentShader:ct.meshnormal_frag},sprite:{uniforms:Dn([Pe.sprite,Pe.fog]),vertexShader:ct.sprite_vert,fragmentShader:ct.sprite_frag},background:{uniforms:{uvTransform:{value:new En},t2D:{value:null}},vertexShader:ct.background_vert,fragmentShader:ct.background_frag},cube:{uniforms:Dn([Pe.envmap,{opacity:{value:1}}]),vertexShader:ct.cube_vert,fragmentShader:ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ct.equirect_vert,fragmentShader:ct.equirect_frag},distanceRGBA:{uniforms:Dn([Pe.common,Pe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ct.distanceRGBA_vert,fragmentShader:ct.distanceRGBA_frag},shadow:{uniforms:Dn([Pe.lights,Pe.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:ct.shadow_vert,fragmentShader:ct.shadow_frag}};cr.physical={uniforms:Dn([cr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag};function N3(a,e,t,n,i){const r=new Ne(0);let s=0,l,c,h=null,f=0,d=null;function g(_,x){let b=!1,v=x.isScene===!0?x.background:null;v&&v.isTexture&&(v=e.get(v));const y=a.xr,S=y.getSession&&y.getSession();S&&S.environmentBlendMode==="additive"&&(v=null),v===null?p(r,s):v&&v.isColor&&(p(v,1),b=!0),(a.autoClear||b)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Iu)?(c===void 0&&(c=new Vn(new Vl(1,1,1),new ho({name:"BackgroundCubeMaterial",uniforms:Aa(cr.cube.uniforms),vertexShader:cr.cube.vertexShader,fragmentShader:cr.cube.fragmentShader,side:fn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(M,A,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(h!==v||f!==v.version||d!==a.toneMapping)&&(c.material.needsUpdate=!0,h=v,f=v.version,d=a.toneMapping),_.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(l===void 0&&(l=new Vn(new yp(2,2),new ho({name:"BackgroundMaterial",uniforms:Aa(cr.background.uniforms),vertexShader:cr.background.vertexShader,fragmentShader:cr.background.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||f!==v.version||d!==a.toneMapping)&&(l.material.needsUpdate=!0,h=v,f=v.version,d=a.toneMapping),_.unshift(l,l.geometry,l.material,0,0,null))}function p(_,x){t.buffers.color.setClear(_.r,_.g,_.b,x,i)}return{getClearColor:function(){return r},setClearColor:function(_,x=1){r.set(_),s=x,p(r,s)},getClearAlpha:function(){return s},setClearAlpha:function(_){s=_,p(r,s)},render:g}}function B3(a,e,t,n){const i=a.getParameter(34921),r=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||r!==null,l={},c=x(null);let h=c;function f(V,Y,$,W,ee){let re=!1;if(s){const Le=_(W,$,Y);h!==Le&&(h=Le,g(h.object)),re=b(W,ee),re&&v(W,ee)}else{const Le=Y.wireframe===!0;(h.geometry!==W.id||h.program!==$.id||h.wireframe!==Le)&&(h.geometry=W.id,h.program=$.id,h.wireframe=Le,re=!0)}V.isInstancedMesh===!0&&(re=!0),ee!==null&&t.update(ee,34963),re&&(T(V,Y,$,W),ee!==null&&a.bindBuffer(34963,t.get(ee).buffer))}function d(){return n.isWebGL2?a.createVertexArray():r.createVertexArrayOES()}function g(V){return n.isWebGL2?a.bindVertexArray(V):r.bindVertexArrayOES(V)}function p(V){return n.isWebGL2?a.deleteVertexArray(V):r.deleteVertexArrayOES(V)}function _(V,Y,$){const W=$.wireframe===!0;let ee=l[V.id];ee===void 0&&(ee={},l[V.id]=ee);let re=ee[Y.id];re===void 0&&(re={},ee[Y.id]=re);let Le=re[W];return Le===void 0&&(Le=x(d()),re[W]=Le),Le}function x(V){const Y=[],$=[],W=[];for(let ee=0;ee<i;ee++)Y[ee]=0,$[ee]=0,W[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:$,attributeDivisors:W,object:V,attributes:{},index:null}}function b(V,Y){const $=h.attributes,W=V.attributes;let ee=0;for(const re in W){const Le=$[re],J=W[re];if(Le===void 0||Le.attribute!==J||Le.data!==J.data)return!0;ee++}return h.attributesNum!==ee||h.index!==Y}function v(V,Y){const $={},W=V.attributes;let ee=0;for(const re in W){const Le=W[re],J={};J.attribute=Le,Le.data&&(J.data=Le.data),$[re]=J,ee++}h.attributes=$,h.attributesNum=ee,h.index=Y}function y(){const V=h.newAttributes;for(let Y=0,$=V.length;Y<$;Y++)V[Y]=0}function S(V){M(V,0)}function M(V,Y){const $=h.newAttributes,W=h.enabledAttributes,ee=h.attributeDivisors;$[V]=1,W[V]===0&&(a.enableVertexAttribArray(V),W[V]=1),ee[V]!==Y&&((n.isWebGL2?a:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,Y),ee[V]=Y)}function A(){const V=h.newAttributes,Y=h.enabledAttributes;for(let $=0,W=Y.length;$<W;$++)Y[$]!==V[$]&&(a.disableVertexAttribArray($),Y[$]=0)}function R(V,Y,$,W,ee,re){n.isWebGL2===!0&&($===5124||$===5125)?a.vertexAttribIPointer(V,Y,$,ee,re):a.vertexAttribPointer(V,Y,$,W,ee,re)}function T(V,Y,$,W){if(n.isWebGL2===!1&&(V.isInstancedMesh||W.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const ee=W.attributes,re=$.getAttributes(),Le=Y.defaultAttributeValues;for(const J in re){const ve=re[J];if(ve.location>=0){let ze=ee[J];if(ze===void 0&&(J==="instanceMatrix"&&V.instanceMatrix&&(ze=V.instanceMatrix),J==="instanceColor"&&V.instanceColor&&(ze=V.instanceColor)),ze!==void 0){const fe=ze.normalized,Me=ze.itemSize,Te=t.get(ze);if(Te===void 0)continue;const z=Te.buffer,F=Te.type,k=Te.bytesPerElement;if(ze.isInterleavedBufferAttribute){const ne=ze.data,de=ne.stride,ge=ze.offset;if(ne&&ne.isInstancedInterleavedBuffer){for(let Z=0;Z<ve.locationSize;Z++)M(ve.location+Z,ne.meshPerAttribute);V.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let Z=0;Z<ve.locationSize;Z++)S(ve.location+Z);a.bindBuffer(34962,z);for(let Z=0;Z<ve.locationSize;Z++)R(ve.location+Z,Me/ve.locationSize,F,fe,de*k,(ge+Me/ve.locationSize*Z)*k)}else{if(ze.isInstancedBufferAttribute){for(let ne=0;ne<ve.locationSize;ne++)M(ve.location+ne,ze.meshPerAttribute);V.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let ne=0;ne<ve.locationSize;ne++)S(ve.location+ne);a.bindBuffer(34962,z);for(let ne=0;ne<ve.locationSize;ne++)R(ve.location+ne,Me/ve.locationSize,F,fe,Me*k,Me/ve.locationSize*ne*k)}}else if(Le!==void 0){const fe=Le[J];if(fe!==void 0)switch(fe.length){case 2:a.vertexAttrib2fv(ve.location,fe);break;case 3:a.vertexAttrib3fv(ve.location,fe);break;case 4:a.vertexAttrib4fv(ve.location,fe);break;default:a.vertexAttrib1fv(ve.location,fe)}}}}A()}function N(){O();for(const V in l){const Y=l[V];for(const $ in Y){const W=Y[$];for(const ee in W)p(W[ee].object),delete W[ee];delete Y[$]}delete l[V]}}function X(V){if(l[V.id]===void 0)return;const Y=l[V.id];for(const $ in Y){const W=Y[$];for(const ee in W)p(W[ee].object),delete W[ee];delete Y[$]}delete l[V.id]}function H(V){for(const Y in l){const $=l[Y];if($[V.id]===void 0)continue;const W=$[V.id];for(const ee in W)p(W[ee].object),delete W[ee];delete $[V.id]}}function O(){te(),h!==c&&(h=c,g(h.object))}function te(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:f,reset:O,resetDefaultState:te,dispose:N,releaseStatesOfGeometry:X,releaseStatesOfProgram:H,initAttributes:y,enableAttribute:S,disableUnusedAttributes:A}}function U3(a,e,t,n){const i=n.isWebGL2;let r;function s(h){r=h}function l(h,f){a.drawArrays(r,h,f),t.update(f,r,1)}function c(h,f,d){if(d===0)return;let g,p;if(i)g=a,p="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[p](r,h,f,d),t.update(f,r,d)}this.setMode=s,this.render=l,this.renderInstances=c}function z3(a,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");n=a.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function r(T){if(T==="highp"){if(a.getShaderPrecisionFormat(35633,36338).precision>0&&a.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&a.getShaderPrecisionFormat(35633,36337).precision>0&&a.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&a instanceof WebGL2ComputeRenderingContext;let l=t.precision!==void 0?t.precision:"highp";const c=r(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const h=s||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,d=a.getParameter(34930),g=a.getParameter(35660),p=a.getParameter(3379),_=a.getParameter(34076),x=a.getParameter(34921),b=a.getParameter(36347),v=a.getParameter(36348),y=a.getParameter(36349),S=g>0,M=s||e.has("OES_texture_float"),A=S&&M,R=s?a.getParameter(36183):0;return{isWebGL2:s,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:r,precision:l,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:g,maxTextureSize:p,maxCubemapSize:_,maxAttributes:x,maxVertexUniforms:b,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:S,floatFragmentTextures:M,floatVertexTextures:A,maxSamples:R}}function k3(a){const e=this;let t=null,n=0,i=!1,r=!1;const s=new Gr,l=new En,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,g,p){const _=d.length!==0||g||n!==0||i;return i=g,t=f(d,p,0),n=d.length,_},this.beginShadows=function(){r=!0,f(null)},this.endShadows=function(){r=!1,h()},this.setState=function(d,g,p){const _=d.clippingPlanes,x=d.clipIntersection,b=d.clipShadows,v=a.get(d);if(!i||_===null||_.length===0||r&&!b)r?f(null):h();else{const y=r?0:n,S=y*4;let M=v.clippingState||null;c.value=M,M=f(_,g,S,p);for(let A=0;A!==S;++A)M[A]=t[A];v.clippingState=M,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=y}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(d,g,p,_){const x=d!==null?d.length:0;let b=null;if(x!==0){if(b=c.value,_!==!0||b===null){const v=p+x*4,y=g.matrixWorldInverse;l.getNormalMatrix(y),(b===null||b.length<v)&&(b=new Float32Array(v));for(let S=0,M=p;S!==x;++S,M+=4)s.copy(d[S]).applyMatrix4(y,l),s.normal.toArray(b,M),b[M+3]=s.constant}c.value=b,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function G3(a){let e=new WeakMap;function t(s,l){return l===Bd?s.mapping=Cl:l===Ud&&(s.mapping=Pl),s}function n(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const l=s.mapping;if(l===Bd||l===Ud)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const h=a.getRenderTarget(),f=new Mx(c.height/2);return f.fromEquirectangularTexture(a,s),e.set(s,f),a.setRenderTarget(h),s.addEventListener("dispose",i),t(f.texture,s.mapping)}else return null}}return s}function i(s){const l=s.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}class sh extends _p{constructor(e=-1,t=1,n=1,i=-1,r=.1,s=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,s=r+h*this.view.width,l-=f*this.view.offsetY,c=l-f*this.view.height}this.projectionMatrix.makeOrthographic(r,s,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}sh.prototype.isOrthographicCamera=!0;class oh extends ho{constructor(e){super(e);this.type="RawShaderMaterial"}}oh.prototype.isRawShaderMaterial=!0;const Pa=4,Ts=8,ur=Math.pow(2,Ts),Tx=[.125,.215,.35,.446,.526,.582],Ex=Ts-Pa+1+Tx.length,Ia=20,Es={[In]:0,[ar]:1,[Xd]:2,[Qv]:3,[ex]:4,[tx]:5,[Wd]:6},wp=new sh,{_lodPlanes:Wl,_sizeLods:Ax,_sigmas:ah}=W3(),Lx=new Ne;let bp=null;const fo=(1+Math.sqrt(5))/2,Da=1/fo,Rx=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,fo,Da),new U(0,fo,-Da),new U(Da,0,fo),new U(-Da,0,fo),new U(fo,Da,0),new U(-fo,Da,0)];class H3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=X3(Ia),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){bp=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Ix(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Px(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Wl.length;e++)Wl[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(bp),e.scissorTest=!1,lh(e,0,0,e.width,e.height)}_fromTexture(e){bp=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:gs,format:BR,encoding:V3(e)?e.encoding:Xd,depthBuffer:!1},n=Cx(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Cx(t),n}_compileMaterial(e){const t=new Vn(Wl[0],e);this._renderer.compile(t,wp)}_sceneToCubeUV(e,t,n,i){const r=90,s=1,l=new Wn(r,s,t,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,g=f.outputEncoding,p=f.toneMapping;f.getClearColor(Lx),f.toneMapping=io,f.outputEncoding=In,f.autoClear=!1;const _=new ws({name:"PMREM.Background",side:fn,depthWrite:!1,depthTest:!1}),x=new Vn(new Vl,_);let b=!1;const v=e.background;v?v.isColor&&(_.color.copy(v),e.background=null,b=!0):(_.color.copy(Lx),b=!0);for(let y=0;y<6;y++){const S=y%3;S==0?(l.up.set(0,c[y],0),l.lookAt(h[y],0,0)):S==1?(l.up.set(0,0,c[y]),l.lookAt(0,h[y],0)):(l.up.set(0,c[y],0),l.lookAt(0,0,h[y])),lh(i,S*ur,y>2?ur:0,ur,ur),f.setRenderTarget(i),b&&f.render(x,l),f.render(e,l)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=p,f.outputEncoding=g,f.autoClear=d,e.background=v}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===Pn&&t.type===gs&&t.encoding===ar?e.value=Es[In]:e.value=Es[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Cl||e.mapping===Pl;i?this._cubemapShader==null&&(this._cubemapShader=Ix()):this._equirectShader==null&&(this._equirectShader=Px());const r=i?this._cubemapShader:this._equirectShader,s=new Vn(Wl[0],r),l=r.uniforms;l.envMap.value=e,i||l.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(l.inputEncoding,e),this._setEncoding(l.outputEncoding,t.texture),lh(t,0,0,3*ur,2*ur),n.setRenderTarget(t),n.render(s,wp)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<Ex;i++){const r=Math.sqrt(ah[i]*ah[i]-ah[i-1]*ah[i-1]),s=Rx[(i-1)%Rx.length];this._blur(e,i-1,i,r,s)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,l){const c=this._renderer,h=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Vn(Wl[i],h),g=h.uniforms,p=Ax[n]-1,_=isFinite(r)?Math.PI/(2*p):2*Math.PI/(2*Ia-1),x=r/_,b=isFinite(r)?1+Math.floor(f*x):Ia;b>Ia&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Ia}`);const v=[];let y=0;for(let R=0;R<Ia;++R){const T=R/x,N=Math.exp(-T*T/2);v.push(N),R==0?y+=N:R<b&&(y+=2*N)}for(let R=0;R<v.length;R++)v[R]=v[R]/y;g.envMap.value=e.texture,g.samples.value=b,g.weights.value=v,g.latitudinal.value=s==="latitudinal",l&&(g.poleAxis.value=l),g.dTheta.value=_,g.mipInt.value=Ts-n,this._setEncoding(g.inputEncoding,e.texture),this._setEncoding(g.outputEncoding,e.texture);const S=Ax[i],M=3*Math.max(0,ur-2*S),A=(i===0?0:2*ur)+2*S*(i>Ts-Pa?i-Ts+Pa:0);lh(t,M,A,3*S,2*S),c.setRenderTarget(t),c.render(d,wp)}}function V3(a){return a===void 0||a.type!==gs?!1:a.encoding===In||a.encoding===ar||a.encoding===Wd}function W3(){const a=[],e=[],t=[];let n=Ts;for(let i=0;i<Ex;i++){const r=Math.pow(2,n);e.push(r);let s=1/r;i>Ts-Pa?s=Tx[i-Ts+Pa-1]:i==0&&(s=0),t.push(s);const l=1/(r-1),c=-l/2,h=1+l/2,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,g=6,p=3,_=2,x=1,b=new Float32Array(p*g*d),v=new Float32Array(_*g*d),y=new Float32Array(x*g*d);for(let M=0;M<d;M++){const A=M%3*2/3-1,R=M>2?0:-1,T=[A,R,0,A+2/3,R,0,A+2/3,R+1,0,A,R,0,A+2/3,R+1,0,A,R+1,0];b.set(T,p*g*M),v.set(f,_*g*M);const N=[M,M,M,M,M,M];y.set(N,x*g*M)}const S=new Nt;S.setAttribute("position",new Zt(b,p)),S.setAttribute("uv",new Zt(v,_)),S.setAttribute("faceIndex",new Zt(y,x)),a.push(S),n>Pa&&n--}return{_lodPlanes:a,_sizeLods:e,_sigmas:t}}function Cx(a){const e=new lr(3*ur,3*ur,a);return e.texture.mapping=Iu,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function lh(a,e,t,n,i){a.viewport.set(e,t,n,i),a.scissor.set(e,t,n,i)}function X3(a){const e=new Float32Array(a),t=new U(0,1,0);return new oh({name:"SphericalGaussianBlur",defines:{n:a},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Es[In]},outputEncoding:{value:Es[In]}},vertexShader:Mp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Sp()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ms,depthTest:!1,depthWrite:!1})}function Px(){const a=new Ee(1,1);return new oh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:a},inputEncoding:{value:Es[In]},outputEncoding:{value:Es[In]}},vertexShader:Mp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Sp()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ms,depthTest:!1,depthWrite:!1})}function Ix(){return new oh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Es[In]},outputEncoding:{value:Es[In]}},vertexShader:Mp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Sp()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ms,depthTest:!1,depthWrite:!1})}function Mp(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Sp(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function Y3(a){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const c=l.mapping,h=c===Bd||c===Ud,f=c===Cl||c===Pl;if(h||f){if(e.has(l))return e.get(l).texture;{const d=l.image;if(h&&d&&d.height>0||f&&d&&i(d)){const g=a.getRenderTarget();t===null&&(t=new H3(a));const p=h?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,p),a.setRenderTarget(g),l.addEventListener("dispose",r),p.texture}else return null}}}return l}function i(l){let c=0;const h=6;for(let f=0;f<h;f++)l[f]!==void 0&&c++;return c===h}function r(l){const c=l.target;c.removeEventListener("dispose",r);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function q3(a){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=a.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function j3(a,e,t,n){const i={},r=new WeakMap;function s(d){const g=d.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);g.removeEventListener("dispose",s),delete i[g.id];const p=r.get(g);p&&(e.remove(p),r.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function l(d,g){return i[g.id]===!0||(g.addEventListener("dispose",s),i[g.id]=!0,t.memory.geometries++),g}function c(d){const g=d.attributes;for(const _ in g)e.update(g[_],34962);const p=d.morphAttributes;for(const _ in p){const x=p[_];for(let b=0,v=x.length;b<v;b++)e.update(x[b],34962)}}function h(d){const g=[],p=d.index,_=d.attributes.position;let x=0;if(p!==null){const y=p.array;x=p.version;for(let S=0,M=y.length;S<M;S+=3){const A=y[S+0],R=y[S+1],T=y[S+2];g.push(A,R,R,T,T,A)}}else{const y=_.array;x=_.version;for(let S=0,M=y.length/3-1;S<M;S+=3){const A=S+0,R=S+1,T=S+2;g.push(A,R,R,T,T,A)}}const b=new(sx(g)>65535?wx:yx)(g,1);b.version=x;const v=r.get(d);v&&e.remove(v),r.set(d,b)}function f(d){const g=r.get(d);if(g){const p=d.index;p!==null&&g.version<p.version&&h(d)}else h(d);return r.get(d)}return{get:l,update:c,getWireframeAttribute:f}}function Z3(a,e,t,n){const i=n.isWebGL2;let r;function s(g){r=g}let l,c;function h(g){l=g.type,c=g.bytesPerElement}function f(g,p){a.drawElements(r,p,l,g*c),t.update(p,r,1)}function d(g,p,_){if(_===0)return;let x,b;if(i)x=a,b="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[b](r,p,l,g*c,_),t.update(p,r,_)}this.setMode=s,this.setIndex=h,this.render=f,this.renderInstances=d}function J3(a){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,s,l){switch(t.calls++,s){case 4:t.triangles+=l*(r/3);break;case 1:t.lines+=l*(r/2);break;case 3:t.lines+=l*(r-1);break;case 2:t.lines+=l*r;break;case 0:t.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}class Tp extends pn{constructor(e=null,t=1,n=1,i=1){super(null);this.image={data:e,width:t,height:n,depth:i},this.magFilter=dn,this.minFilter=dn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Tp.prototype.isDataTexture2DArray=!0;function K3(a,e){return a[0]-e[0]}function $3(a,e){return Math.abs(e[1])-Math.abs(a[1])}function Dx(a,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),a.divideScalar(t)}function Q3(a,e,t){const n={},i=new Float32Array(8),r=new WeakMap,s=new U,l=[];for(let h=0;h<8;h++)l[h]=[h,0];function c(h,f,d,g){const p=h.morphTargetInfluences;if(e.isWebGL2===!0){const _=f.morphAttributes.position.length;let x=r.get(f);if(x===void 0||x.count!==_){x!==void 0&&x.texture.dispose();const y=f.morphAttributes.normal!==void 0,S=f.morphAttributes.position,M=f.morphAttributes.normal||[],A=f.attributes.position.count,R=y===!0?2:1;let T=A*R,N=1;T>e.maxTextureSize&&(N=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const X=new Float32Array(T*N*4*_),H=new Tp(X,T,N,_);H.format=Pn,H.type=Fr;const O=R*4;for(let te=0;te<_;te++){const V=S[te],Y=M[te],$=T*N*4*te;for(let W=0;W<V.count;W++){s.fromBufferAttribute(V,W),V.normalized===!0&&Dx(s,V);const ee=W*O;X[$+ee+0]=s.x,X[$+ee+1]=s.y,X[$+ee+2]=s.z,X[$+ee+3]=0,y===!0&&(s.fromBufferAttribute(Y,W),Y.normalized===!0&&Dx(s,Y),X[$+ee+4]=s.x,X[$+ee+5]=s.y,X[$+ee+6]=s.z,X[$+ee+7]=0)}}x={count:_,texture:H,size:new Ee(T,N)},r.set(f,x)}let b=0;for(let y=0;y<p.length;y++)b+=p[y];const v=f.morphTargetsRelative?1:1-b;g.getUniforms().setValue(a,"morphTargetBaseInfluence",v),g.getUniforms().setValue(a,"morphTargetInfluences",p),g.getUniforms().setValue(a,"morphTargetsTexture",x.texture,t),g.getUniforms().setValue(a,"morphTargetsTextureSize",x.size)}else{const _=p===void 0?0:p.length;let x=n[f.id];if(x===void 0||x.length!==_){x=[];for(let M=0;M<_;M++)x[M]=[M,0];n[f.id]=x}for(let M=0;M<_;M++){const A=x[M];A[0]=M,A[1]=p[M]}x.sort($3);for(let M=0;M<8;M++)M<_&&x[M][1]?(l[M][0]=x[M][0],l[M][1]=x[M][1]):(l[M][0]=Number.MAX_SAFE_INTEGER,l[M][1]=0);l.sort(K3);const b=f.morphAttributes.position,v=f.morphAttributes.normal;let y=0;for(let M=0;M<8;M++){const A=l[M],R=A[0],T=A[1];R!==Number.MAX_SAFE_INTEGER&&T?(b&&f.getAttribute("morphTarget"+M)!==b[R]&&f.setAttribute("morphTarget"+M,b[R]),v&&f.getAttribute("morphNormal"+M)!==v[R]&&f.setAttribute("morphNormal"+M,v[R]),i[M]=T,y+=T):(b&&f.hasAttribute("morphTarget"+M)===!0&&f.deleteAttribute("morphTarget"+M),v&&f.hasAttribute("morphNormal"+M)===!0&&f.deleteAttribute("morphNormal"+M),i[M]=0)}const S=f.morphTargetsRelative?1:1-y;g.getUniforms().setValue(a,"morphTargetBaseInfluence",S),g.getUniforms().setValue(a,"morphTargetInfluences",i)}}return{update:c}}function eI(a,e,t,n){let i=new WeakMap;function r(c){const h=n.render.frame,f=c.geometry,d=e.get(c,f);return i.get(d)!==h&&(e.update(d),i.set(d,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),d}function s(){i=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:r,dispose:s}}class Ox extends pn{constructor(e=null,t=1,n=1,i=1){super(null);this.image={data:e,width:t,height:n,depth:i},this.magFilter=dn,this.minFilter=dn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ox.prototype.isDataTexture3D=!0;const Fx=new pn,tI=new Tp,nI=new Ox,Nx=new nh,Bx=[],Ux=[],zx=new Float32Array(16),kx=new Float32Array(9),Gx=new Float32Array(4);function Oa(a,e,t){const n=a[0];if(n<=0||n>0)return a;const i=e*t;let r=Bx[i];if(r===void 0&&(r=new Float32Array(i),Bx[i]=r),e!==0){n.toArray(r,0);for(let s=1,l=0;s!==e;++s)l+=t,a[s].toArray(r,l)}return r}function Xn(a,e){if(a.length!==e.length)return!1;for(let t=0,n=a.length;t<n;t++)if(a[t]!==e[t])return!1;return!0}function On(a,e){for(let t=0,n=e.length;t<n;t++)a[t]=e[t]}function Hx(a,e){let t=Ux[e];t===void 0&&(t=new Int32Array(e),Ux[e]=t);for(let n=0;n!==e;++n)t[n]=a.allocateTextureUnit();return t}function iI(a,e){const t=this.cache;t[0]!==e&&(a.uniform1f(this.addr,e),t[0]=e)}function rI(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xn(t,e))return;a.uniform2fv(this.addr,e),On(t,e)}}function sI(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xn(t,e))return;a.uniform3fv(this.addr,e),On(t,e)}}function oI(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xn(t,e))return;a.uniform4fv(this.addr,e),On(t,e)}}function aI(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xn(t,e))return;a.uniformMatrix2fv(this.addr,!1,e),On(t,e)}else{if(Xn(t,n))return;Gx.set(n),a.uniformMatrix2fv(this.addr,!1,Gx),On(t,n)}}function lI(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xn(t,e))return;a.uniformMatrix3fv(this.addr,!1,e),On(t,e)}else{if(Xn(t,n))return;kx.set(n),a.uniformMatrix3fv(this.addr,!1,kx),On(t,n)}}function cI(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Xn(t,e))return;a.uniformMatrix4fv(this.addr,!1,e),On(t,e)}else{if(Xn(t,n))return;zx.set(n),a.uniformMatrix4fv(this.addr,!1,zx),On(t,n)}}function uI(a,e){const t=this.cache;t[0]!==e&&(a.uniform1i(this.addr,e),t[0]=e)}function hI(a,e){const t=this.cache;Xn(t,e)||(a.uniform2iv(this.addr,e),On(t,e))}function fI(a,e){const t=this.cache;Xn(t,e)||(a.uniform3iv(this.addr,e),On(t,e))}function dI(a,e){const t=this.cache;Xn(t,e)||(a.uniform4iv(this.addr,e),On(t,e))}function pI(a,e){const t=this.cache;t[0]!==e&&(a.uniform1ui(this.addr,e),t[0]=e)}function mI(a,e){const t=this.cache;Xn(t,e)||(a.uniform2uiv(this.addr,e),On(t,e))}function gI(a,e){const t=this.cache;Xn(t,e)||(a.uniform3uiv(this.addr,e),On(t,e))}function _I(a,e){const t=this.cache;Xn(t,e)||(a.uniform4uiv(this.addr,e),On(t,e))}function vI(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.safeSetTexture2D(e||Fx,i)}function xI(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||nI,i)}function yI(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.safeSetTextureCube(e||Nx,i)}function wI(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||tI,i)}function bI(a){switch(a){case 5126:return iI;case 35664:return rI;case 35665:return sI;case 35666:return oI;case 35674:return aI;case 35675:return lI;case 35676:return cI;case 5124:case 35670:return uI;case 35667:case 35671:return hI;case 35668:case 35672:return fI;case 35669:case 35673:return dI;case 5125:return pI;case 36294:return mI;case 36295:return gI;case 36296:return _I;case 35678:case 36198:case 36298:case 36306:case 35682:return vI;case 35679:case 36299:case 36307:return xI;case 35680:case 36300:case 36308:case 36293:return yI;case 36289:case 36303:case 36311:case 36292:return wI}}function MI(a,e){a.uniform1fv(this.addr,e)}function SI(a,e){const t=Oa(e,this.size,2);a.uniform2fv(this.addr,t)}function TI(a,e){const t=Oa(e,this.size,3);a.uniform3fv(this.addr,t)}function EI(a,e){const t=Oa(e,this.size,4);a.uniform4fv(this.addr,t)}function AI(a,e){const t=Oa(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,t)}function LI(a,e){const t=Oa(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,t)}function RI(a,e){const t=Oa(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,t)}function CI(a,e){a.uniform1iv(this.addr,e)}function PI(a,e){a.uniform2iv(this.addr,e)}function II(a,e){a.uniform3iv(this.addr,e)}function DI(a,e){a.uniform4iv(this.addr,e)}function OI(a,e){a.uniform1uiv(this.addr,e)}function FI(a,e){a.uniform2uiv(this.addr,e)}function NI(a,e){a.uniform3uiv(this.addr,e)}function BI(a,e){a.uniform4uiv(this.addr,e)}function UI(a,e,t){const n=e.length,i=Hx(t,n);a.uniform1iv(this.addr,i);for(let r=0;r!==n;++r)t.safeSetTexture2D(e[r]||Fx,i[r])}function zI(a,e,t){const n=e.length,i=Hx(t,n);a.uniform1iv(this.addr,i);for(let r=0;r!==n;++r)t.safeSetTextureCube(e[r]||Nx,i[r])}function kI(a){switch(a){case 5126:return MI;case 35664:return SI;case 35665:return TI;case 35666:return EI;case 35674:return AI;case 35675:return LI;case 35676:return RI;case 5124:case 35670:return CI;case 35667:case 35671:return PI;case 35668:case 35672:return II;case 35669:case 35673:return DI;case 5125:return OI;case 36294:return FI;case 36295:return NI;case 36296:return BI;case 35678:case 36198:case 36298:case 36306:case 35682:return UI;case 35680:case 36300:case 36308:case 36293:return zI}}function GI(a,e,t){this.id=a,this.addr=t,this.cache=[],this.setValue=bI(e.type)}function Vx(a,e,t){this.id=a,this.addr=t,this.cache=[],this.size=e.size,this.setValue=kI(e.type)}Vx.prototype.updateCache=function(a){const e=this.cache;a instanceof Float32Array&&e.length!==a.length&&(this.cache=new Float32Array(a.length)),On(e,a)};function Wx(a){this.id=a,this.seq=[],this.map={}}Wx.prototype.setValue=function(a,e,t){const n=this.seq;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.setValue(a,e[s.id],t)}};const Ep=/(\w+)(\])?(\[|\.)?/g;function Xx(a,e){a.seq.push(e),a.map[e.id]=e}function HI(a,e,t){const n=a.name,i=n.length;for(Ep.lastIndex=0;;){const r=Ep.exec(n),s=Ep.lastIndex;let l=r[1];const c=r[2]==="]",h=r[3];if(c&&(l=l|0),h===void 0||h==="["&&s+2===i){Xx(t,h===void 0?new GI(l,a,e):new Vx(l,a,e));break}else{let d=t.map[l];d===void 0&&(d=new Wx(l),Xx(t,d)),t=d}}}function As(a,e){this.seq=[],this.map={};const t=a.getProgramParameter(e,35718);for(let n=0;n<t;++n){const i=a.getActiveUniform(e,n),r=a.getUniformLocation(e,i.name);HI(i,r,this)}}As.prototype.setValue=function(a,e,t,n){const i=this.map[e];i!==void 0&&i.setValue(a,t,n)};As.prototype.setOptional=function(a,e,t){const n=e[t];n!==void 0&&this.setValue(a,t,n)};As.upload=function(a,e,t,n){for(let i=0,r=e.length;i!==r;++i){const s=e[i],l=t[s.id];l.needsUpdate!==!1&&s.setValue(a,l.value,n)}};As.seqWithValue=function(a,e){const t=[];for(let n=0,i=a.length;n!==i;++n){const r=a[n];r.id in e&&t.push(r)}return t};function Yx(a,e,t){const n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),n}let VI=0;function WI(a){const e=a.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function qx(a){switch(a){case In:return["Linear","( value )"];case ar:return["sRGB","( value )"];case Xd:return["RGBE","( value )"];case Qv:return["RGBM","( value, 7.0 )"];case ex:return["RGBM","( value, 16.0 )"];case tx:return["RGBD","( value, 256.0 )"];case Wd:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case TC:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",a),["Linear","( value )"]}}function jx(a,e,t){const n=a.getShaderParameter(e,35713),i=a.getShaderInfoLog(e).trim();return n&&i===""?"":t.toUpperCase()+`

`+i+`

`+WI(a.getShaderSource(e))}function po(a,e){const t=qx(e);return"vec4 "+a+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function XI(a,e){const t=qx(e);return"vec4 "+a+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function YI(a,e){let t;switch(e){case MR:t="Linear";break;case SR:t="Reinhard";break;case TR:t="OptimizedCineon";break;case ER:t="ACESFilmic";break;case AR:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+a+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function qI(a){return[a.extensionDerivatives||a.envMapCubeUV||a.bumpMap||a.tangentSpaceNormalMap||a.clearcoatNormalMap||a.flatShading||a.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(a.extensionFragDepth||a.logarithmicDepthBuffer)&&a.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",a.extensionDrawBuffers&&a.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(a.extensionShaderTextureLOD||a.envMap||a.transmission)&&a.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xl).join(`
`)}function jI(a){const e=[];for(const t in a){const n=a[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function ZI(a,e){const t={},n=a.getProgramParameter(e,35721);for(let i=0;i<n;i++){const r=a.getActiveAttrib(e,i),s=r.name;let l=1;r.type===35674&&(l=2),r.type===35675&&(l=3),r.type===35676&&(l=4),t[s]={type:r.type,location:a.getAttribLocation(e,s),locationSize:l}}return t}function Xl(a){return a!==""}function Zx(a,e){return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Jx(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const JI=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ap(a){return a.replace(JI,KI)}function KI(a,e){const t=ct[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Ap(t)}const $I=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,QI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Kx(a){return a.replace(QI,$x).replace($I,eD)}function eD(a,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),$x(a,e,t,n)}function $x(a,e,t,n){let i="";for(let r=parseInt(e);r<parseInt(t);r++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return i}function Qx(a){let e="precision "+a.precision+` float;
precision `+a.precision+" int;";return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tD(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===Cv?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===tR?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Ll&&(e="SHADOWMAP_TYPE_VSM"),e}function nD(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case Cl:case Pl:e="ENVMAP_TYPE_CUBE";break;case Iu:case zd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iD(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case Pl:case zd:e="ENVMAP_MODE_REFRACTION";break}return e}function rD(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case Pu:e="ENVMAP_BLENDING_MULTIPLY";break;case wR:e="ENVMAP_BLENDING_MIX";break;case bR:e="ENVMAP_BLENDING_ADD";break}return e}function sD(a,e,t,n){const i=a.getContext(),r=t.defines;let s=t.vertexShader,l=t.fragmentShader;const c=tD(t),h=nD(t),f=iD(t),d=rD(t),g=a.gammaFactor>0?a.gammaFactor:1,p=t.isWebGL2?"":qI(t),_=jI(r),x=i.createProgram();let b,v,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=[_].filter(Xl).join(`
`),b.length>0&&(b+=`
`),v=[p,_].filter(Xl).join(`
`),v.length>0&&(v+=`
`)):(b=[Qx(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xl).join(`
`),v=[p,Qx(t),"#define SHADER_NAME "+t.shaderName,_,"#define GAMMA_FACTOR "+g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==io?"#define TONE_MAPPING":"",t.toneMapping!==io?ct.tonemapping_pars_fragment:"",t.toneMapping!==io?YI("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===ro?"#define OPAQUE":"",ct.encodings_pars_fragment,t.map?po("mapTexelToLinear",t.mapEncoding):"",t.matcap?po("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?po("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?po("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?po("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?po("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?po("lightMapTexelToLinear",t.lightMapEncoding):"",XI("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xl).join(`
`)),s=Ap(s),s=Zx(s,t),s=Jx(s,t),l=Ap(l),l=Zx(l,t),l=Jx(l,t),s=Kx(s),l=Kx(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,v=["#define varying in",t.glslVersion===nx?"":"out highp vec4 pc_fragColor;",t.glslVersion===nx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=y+b+s,M=y+v+l,A=Yx(i,35633,S),R=Yx(i,35632,M);if(i.attachShader(x,A),i.attachShader(x,R),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),a.debug.checkShaderErrors){const X=i.getProgramInfoLog(x).trim(),H=i.getShaderInfoLog(A).trim(),O=i.getShaderInfoLog(R).trim();let te=!0,V=!0;if(i.getProgramParameter(x,35714)===!1){te=!1;const Y=jx(i,A,"vertex"),$=jx(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+X+`
`+Y+`
`+$)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(H===""||O==="")&&(V=!1);V&&(this.diagnostics={runnable:te,programLog:X,vertexShader:{log:H,prefix:b},fragmentShader:{log:O,prefix:v}})}i.deleteShader(A),i.deleteShader(R);let T;this.getUniforms=function(){return T===void 0&&(T=new As(i,x)),T};let N;return this.getAttributes=function(){return N===void 0&&(N=ZI(i,x)),N},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=VI++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=R,this}function oD(a,e,t,n,i,r,s){const l=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.floatVertexTextures,d=i.maxVertexUniforms,g=i.vertexTextures;let p=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},x=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function b(T){const X=T.skeleton.bones;if(f)return 1024;{const O=Math.floor((d-20)/4),te=Math.min(O,X.length);return te<X.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+X.length+" bones. This GPU supports "+te+"."),0):te}}function v(T){let N;return T&&T.isTexture?N=T.encoding:T&&T.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),N=T.texture.encoding):N=In,c&&T&&T.isTexture&&T.format===Pn&&T.type===gs&&T.encoding===ar&&(N=In),N}function y(T,N,X,H,O){const te=H.fog,V=T.isMeshStandardMaterial?H.environment:null,Y=(T.isMeshStandardMaterial?t:e).get(T.envMap||V),$=_[T.type],W=O.isSkinnedMesh?b(O):0;T.precision!==null&&(p=i.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));let ee,re;if($){const fe=cr[$];ee=fe.vertexShader,re=fe.fragmentShader}else ee=T.vertexShader,re=T.fragmentShader;const Le=a.getRenderTarget(),J=T.alphaTest>0,ve=T.clearcoat>0;return{isWebGL2:c,shaderID:$,shaderName:T.type,vertexShader:ee,fragmentShader:re,defines:T.defines,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,instancing:O.isInstancedMesh===!0,instancingColor:O.isInstancedMesh===!0&&O.instanceColor!==null,supportsVertexTextures:g,outputEncoding:Le!==null?v(Le.texture):a.outputEncoding,map:!!T.map,mapEncoding:v(T.map),matcap:!!T.matcap,matcapEncoding:v(T.matcap),envMap:!!Y,envMapMode:Y&&Y.mapping,envMapEncoding:v(Y),envMapCubeUV:!!Y&&(Y.mapping===Iu||Y.mapping===zd),lightMap:!!T.lightMap,lightMapEncoding:v(T.lightMap),aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,emissiveMapEncoding:v(T.emissiveMap),bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===LC,tangentSpaceNormalMap:T.normalMapType===so,clearcoat:ve,clearcoatMap:ve&&!!T.clearcoatMap,clearcoatRoughnessMap:ve&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:ve&&!!T.clearcoatNormalMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,specularColorMapEncoding:v(T.specularColorMap),alphaMap:!!T.alphaMap,alphaTest:J,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenColorMapEncoding:v(T.sheenColorMap),sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!O.geometry&&!!O.geometry.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!O.geometry&&!!O.geometry.attributes.color&&O.geometry.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||T.sheenRoughnessMap,uvsVertexOnly:!(!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatNormalMap||T.transmission>0||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheen>0||!!T.sheenColorMap||!!T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!te,useFog:T.fog,fogExp2:te&&te.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:O.isSkinnedMesh===!0&&W>0,maxBones:W,useVertexTexture:f,morphTargets:!!O.geometry&&!!O.geometry.morphAttributes.position,morphNormals:!!O.geometry&&!!O.geometry.morphAttributes.normal,morphTargetsCount:!!O.geometry&&!!O.geometry.morphAttributes.position?O.geometry.morphAttributes.position.length:0,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:T.format,dithering:T.dithering,shadowMapEnabled:a.shadowMap.enabled&&X.length>0,shadowMapType:a.shadowMap.type,toneMapping:T.toneMapped?a.toneMapping:io,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===no,flipSided:T.side===fn,depthPacking:T.depthPacking!==void 0?T.depthPacking:!1,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function S(T){const N=[];if(T.shaderID?N.push(T.shaderID):(N.push(ox(T.fragmentShader)),N.push(ox(T.vertexShader))),T.defines!==void 0)for(const X in T.defines)N.push(X),N.push(T.defines[X]);if(T.isRawShaderMaterial===!1){for(let X=0;X<x.length;X++)N.push(T[x[X]]);N.push(a.outputEncoding),N.push(a.gammaFactor)}return N.push(T.customProgramCacheKey),N.join()}function M(T){const N=_[T.type];let X;if(N){const H=cr[N];X=r2.clone(H.uniforms)}else X=T.uniforms;return X}function A(T,N){let X;for(let H=0,O=l.length;H<O;H++){const te=l[H];if(te.cacheKey===N){X=te,++X.usedTimes;break}}return X===void 0&&(X=new sD(a,N,T,r),l.push(X)),X}function R(T){if(--T.usedTimes==0){const N=l.indexOf(T);l[N]=l[l.length-1],l.pop(),T.destroy()}}return{getParameters:y,getProgramCacheKey:S,getUniforms:M,acquireProgram:A,releaseProgram:R,programs:l}}function aD(){let a=new WeakMap;function e(r){let s=a.get(r);return s===void 0&&(s={},a.set(r,s)),s}function t(r){a.delete(r)}function n(r,s,l){a.get(r)[s]=l}function i(){a=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function lD(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.program!==e.program?a.program.id-e.program.id:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function ey(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function ty(a){const e=[];let t=0;const n=[],i=[],r=[],s={id:-1};function l(){t=0,n.length=0,i.length=0,r.length=0}function c(p,_,x,b,v,y){let S=e[t];const M=a.get(x);return S===void 0?(S={id:p.id,object:p,geometry:_,material:x,program:M.program||s,groupOrder:b,renderOrder:p.renderOrder,z:v,group:y},e[t]=S):(S.id=p.id,S.object=p,S.geometry=_,S.material=x,S.program=M.program||s,S.groupOrder=b,S.renderOrder=p.renderOrder,S.z=v,S.group=y),t++,S}function h(p,_,x,b,v,y){const S=c(p,_,x,b,v,y);x.transmission>0?i.push(S):x.transparent===!0?r.push(S):n.push(S)}function f(p,_,x,b,v,y){const S=c(p,_,x,b,v,y);x.transmission>0?i.unshift(S):x.transparent===!0?r.unshift(S):n.unshift(S)}function d(p,_){n.length>1&&n.sort(p||lD),i.length>1&&i.sort(_||ey),r.length>1&&r.sort(_||ey)}function g(){for(let p=t,_=e.length;p<_;p++){const x=e[p];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.program=null,x.group=null}}return{opaque:n,transmissive:i,transparent:r,init:l,push:h,unshift:f,finish:g,sort:d}}function cD(a){let e=new WeakMap;function t(i,r){let s;return e.has(i)===!1?(s=new ty(a),e.set(i,[s])):r>=e.get(i).length?(s=new ty(a),e.get(i).push(s)):s=e.get(i)[r],s}function n(){e=new WeakMap}return{get:t,dispose:n}}function uD(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new Ne};break;case"SpotLight":t={position:new U,direction:new U,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new U,halfWidth:new U,halfHeight:new U};break}return a[e.id]=t,t}}}function hD(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=t,t}}}let fD=0;function dD(a,e){return(e.castShadow?1:0)-(a.castShadow?1:0)}function pD(a,e){const t=new uD,n=hD(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let f=0;f<9;f++)i.probe.push(new U);const r=new U,s=new Ve,l=new Ve;function c(f,d){let g=0,p=0,_=0;for(let X=0;X<9;X++)i.probe[X].set(0,0,0);let x=0,b=0,v=0,y=0,S=0,M=0,A=0,R=0;f.sort(dD);const T=d!==!0?Math.PI:1;for(let X=0,H=f.length;X<H;X++){const O=f[X],te=O.color,V=O.intensity,Y=O.distance,$=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)g+=te.r*V*T,p+=te.g*V*T,_+=te.b*V*T;else if(O.isLightProbe)for(let W=0;W<9;W++)i.probe[W].addScaledVector(O.sh.coefficients[W],V);else if(O.isDirectionalLight){const W=t.get(O);if(W.color.copy(O.color).multiplyScalar(O.intensity*T),O.castShadow){const ee=O.shadow,re=n.get(O);re.shadowBias=ee.bias,re.shadowNormalBias=ee.normalBias,re.shadowRadius=ee.radius,re.shadowMapSize=ee.mapSize,i.directionalShadow[x]=re,i.directionalShadowMap[x]=$,i.directionalShadowMatrix[x]=O.shadow.matrix,M++}i.directional[x]=W,x++}else if(O.isSpotLight){const W=t.get(O);if(W.position.setFromMatrixPosition(O.matrixWorld),W.color.copy(te).multiplyScalar(V*T),W.distance=Y,W.coneCos=Math.cos(O.angle),W.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),W.decay=O.decay,O.castShadow){const ee=O.shadow,re=n.get(O);re.shadowBias=ee.bias,re.shadowNormalBias=ee.normalBias,re.shadowRadius=ee.radius,re.shadowMapSize=ee.mapSize,i.spotShadow[v]=re,i.spotShadowMap[v]=$,i.spotShadowMatrix[v]=O.shadow.matrix,R++}i.spot[v]=W,v++}else if(O.isRectAreaLight){const W=t.get(O);W.color.copy(te).multiplyScalar(V),W.halfWidth.set(O.width*.5,0,0),W.halfHeight.set(0,O.height*.5,0),i.rectArea[y]=W,y++}else if(O.isPointLight){const W=t.get(O);if(W.color.copy(O.color).multiplyScalar(O.intensity*T),W.distance=O.distance,W.decay=O.decay,O.castShadow){const ee=O.shadow,re=n.get(O);re.shadowBias=ee.bias,re.shadowNormalBias=ee.normalBias,re.shadowRadius=ee.radius,re.shadowMapSize=ee.mapSize,re.shadowCameraNear=ee.camera.near,re.shadowCameraFar=ee.camera.far,i.pointShadow[b]=re,i.pointShadowMap[b]=$,i.pointShadowMatrix[b]=O.shadow.matrix,A++}i.point[b]=W,b++}else if(O.isHemisphereLight){const W=t.get(O);W.skyColor.copy(O.color).multiplyScalar(V*T),W.groundColor.copy(O.groundColor).multiplyScalar(V*T),i.hemi[S]=W,S++}}y>0&&(e.isWebGL2||a.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Pe.LTC_FLOAT_1,i.rectAreaLTC2=Pe.LTC_FLOAT_2):a.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Pe.LTC_HALF_1,i.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=p,i.ambient[2]=_;const N=i.hash;(N.directionalLength!==x||N.pointLength!==b||N.spotLength!==v||N.rectAreaLength!==y||N.hemiLength!==S||N.numDirectionalShadows!==M||N.numPointShadows!==A||N.numSpotShadows!==R)&&(i.directional.length=x,i.spot.length=v,i.rectArea.length=y,i.point.length=b,i.hemi.length=S,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=A,i.spotShadowMatrix.length=R,N.directionalLength=x,N.pointLength=b,N.spotLength=v,N.rectAreaLength=y,N.hemiLength=S,N.numDirectionalShadows=M,N.numPointShadows=A,N.numSpotShadows=R,i.version=fD++)}function h(f,d){let g=0,p=0,_=0,x=0,b=0;const v=d.matrixWorldInverse;for(let y=0,S=f.length;y<S;y++){const M=f[y];if(M.isDirectionalLight){const A=i.directional[g];A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(v),g++}else if(M.isSpotLight){const A=i.spot[_];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(v),_++}else if(M.isRectAreaLight){const A=i.rectArea[x];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),l.identity(),s.copy(M.matrixWorld),s.premultiply(v),l.extractRotation(s),A.halfWidth.set(M.width*.5,0,0),A.halfHeight.set(0,M.height*.5,0),A.halfWidth.applyMatrix4(l),A.halfHeight.applyMatrix4(l),x++}else if(M.isPointLight){const A=i.point[p];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),p++}else if(M.isHemisphereLight){const A=i.hemi[b];A.direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(v),A.direction.normalize(),b++}}}return{setup:c,setupView:h,state:i}}function ny(a,e){const t=new pD(a,e),n=[],i=[];function r(){n.length=0,i.length=0}function s(d){n.push(d)}function l(d){i.push(d)}function c(d){t.setup(n,d)}function h(d){t.setupView(n,d)}return{init:r,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:c,setupLightsView:h,pushLight:s,pushShadow:l}}function mD(a,e){let t=new WeakMap;function n(r,s=0){let l;return t.has(r)===!1?(l=new ny(a,e),t.set(r,[l])):s>=t.get(r).length?(l=new ny(a,e),t.get(r).push(l)):l=t.get(r)[s],l}function i(){t=new WeakMap}return{get:n,dispose:i}}class iy extends mn{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=EC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}iy.prototype.isMeshDepthMaterial=!0;class ry extends mn{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new U,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}ry.prototype.isMeshDistanceMaterial=!0;const gD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,_D=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function sy(a,e,t){let n=new rh;const i=new Ee,r=new Ee,s=new Ft,l=new iy({depthPacking:AC}),c=new ry,h={},f=t.maxTextureSize,d={0:fn,1:oa,2:no},g=new ho({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:gD,fragmentShader:_D}),p=g.clone();p.defines.HORIZONTAL_PASS=1;const _=new Nt;_.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Vn(_,g),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cv,this.render=function(M,A,R){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||M.length===0)return;const T=a.getRenderTarget(),N=a.getActiveCubeFace(),X=a.getActiveMipmapLevel(),H=a.state;H.setBlending(ms),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);for(let O=0,te=M.length;O<te;O++){const V=M[O],Y=V.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;i.copy(Y.mapSize);const $=Y.getFrameExtents();if(i.multiply($),r.copy(Y.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(r.x=Math.floor(f/$.x),i.x=r.x*$.x,Y.mapSize.x=r.x),i.y>f&&(r.y=Math.floor(f/$.y),i.y=r.y*$.y,Y.mapSize.y=r.y)),Y.map===null&&!Y.isPointLightShadow&&this.type===Ll){const ee={minFilter:ri,magFilter:ri,format:Pn};Y.map=new lr(i.x,i.y,ee),Y.map.texture.name=V.name+".shadowMap",Y.mapPass=new lr(i.x,i.y,ee),Y.camera.updateProjectionMatrix()}if(Y.map===null){const ee={minFilter:dn,magFilter:dn,format:Pn};Y.map=new lr(i.x,i.y,ee),Y.map.texture.name=V.name+".shadowMap",Y.camera.updateProjectionMatrix()}a.setRenderTarget(Y.map),a.clear();const W=Y.getViewportCount();for(let ee=0;ee<W;ee++){const re=Y.getViewport(ee);s.set(r.x*re.x,r.y*re.y,r.x*re.z,r.y*re.w),H.viewport(s),Y.updateMatrices(V,ee),n=Y.getFrustum(),S(A,R,Y.camera,V,this.type)}!Y.isPointLightShadow&&this.type===Ll&&v(Y,R),Y.needsUpdate=!1}b.needsUpdate=!1,a.setRenderTarget(T,N,X)};function v(M,A){const R=e.update(x);g.defines.VSM_SAMPLES!==M.blurSamples&&(g.defines.VSM_SAMPLES=M.blurSamples,p.defines.VSM_SAMPLES=M.blurSamples,g.needsUpdate=!0,p.needsUpdate=!0),g.uniforms.shadow_pass.value=M.map.texture,g.uniforms.resolution.value=M.mapSize,g.uniforms.radius.value=M.radius,a.setRenderTarget(M.mapPass),a.clear(),a.renderBufferDirect(A,null,R,g,x,null),p.uniforms.shadow_pass.value=M.mapPass.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,a.setRenderTarget(M.map),a.clear(),a.renderBufferDirect(A,null,R,p,x,null)}function y(M,A,R,T,N,X,H){let O=null;const te=T.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(te!==void 0?O=te:O=T.isPointLight===!0?c:l,a.localClippingEnabled&&R.clipShadows===!0&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0){const V=O.uuid,Y=R.uuid;let $=h[V];$===void 0&&($={},h[V]=$);let W=$[Y];W===void 0&&(W=O.clone(),$[Y]=W),O=W}return O.visible=R.visible,O.wireframe=R.wireframe,H===Ll?O.side=R.shadowSide!==null?R.shadowSide:R.side:O.side=R.shadowSide!==null?R.shadowSide:d[R.side],O.alphaMap=R.alphaMap,O.alphaTest=R.alphaTest,O.clipShadows=R.clipShadows,O.clippingPlanes=R.clippingPlanes,O.clipIntersection=R.clipIntersection,O.displacementMap=R.displacementMap,O.displacementScale=R.displacementScale,O.displacementBias=R.displacementBias,O.wireframeLinewidth=R.wireframeLinewidth,O.linewidth=R.linewidth,T.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(T.matrixWorld),O.nearDistance=N,O.farDistance=X),O}function S(M,A,R,T,N){if(M.visible===!1)return;if(M.layers.test(A.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&N===Ll)&&(!M.frustumCulled||n.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,M.matrixWorld);const O=e.update(M),te=M.material;if(Array.isArray(te)){const V=O.groups;for(let Y=0,$=V.length;Y<$;Y++){const W=V[Y],ee=te[W.materialIndex];if(ee&&ee.visible){const re=y(M,O,ee,T,R.near,R.far,N);a.renderBufferDirect(R,null,O,re,M,W)}}}else if(te.visible){const V=y(M,O,te,T,R.near,R.far,N);a.renderBufferDirect(R,null,O,V,M,null)}}const H=M.children;for(let O=0,te=H.length;O<te;O++)S(H[O],A,R,T,N)}}function vD(a,e,t){const n=t.isWebGL2;function i(){let q=!1;const Re=new Ft;let _e=null;const Ue=new Ft(0,0,0,0);return{setMask:function(Oe){_e!==Oe&&!q&&(a.colorMask(Oe,Oe,Oe,Oe),_e=Oe)},setLocked:function(Oe){q=Oe},setClear:function(Oe,tt,zt,Vt,Et){Et===!0&&(Oe*=Vt,tt*=Vt,zt*=Vt),Re.set(Oe,tt,zt,Vt),Ue.equals(Re)===!1&&(a.clearColor(Oe,tt,zt,Vt),Ue.copy(Re))},reset:function(){q=!1,_e=null,Ue.set(-1,0,0,0)}}}function r(){let q=!1,Re=null,_e=null,Ue=null;return{setTest:function(Oe){Oe?Me(2929):Te(2929)},setMask:function(Oe){Re!==Oe&&!q&&(a.depthMask(Oe),Re=Oe)},setFunc:function(Oe){if(_e!==Oe){if(Oe)switch(Oe){case pR:a.depthFunc(512);break;case mR:a.depthFunc(519);break;case gR:a.depthFunc(513);break;case Nd:a.depthFunc(515);break;case _R:a.depthFunc(514);break;case vR:a.depthFunc(518);break;case xR:a.depthFunc(516);break;case yR:a.depthFunc(517);break;default:a.depthFunc(515)}else a.depthFunc(515);_e=Oe}},setLocked:function(Oe){q=Oe},setClear:function(Oe){Ue!==Oe&&(a.clearDepth(Oe),Ue=Oe)},reset:function(){q=!1,Re=null,_e=null,Ue=null}}}function s(){let q=!1,Re=null,_e=null,Ue=null,Oe=null,tt=null,zt=null,Vt=null,Et=null;return{setTest:function(xt){q||(xt?Me(2960):Te(2960))},setMask:function(xt){Re!==xt&&!q&&(a.stencilMask(xt),Re=xt)},setFunc:function(xt,Kt,on){(_e!==xt||Ue!==Kt||Oe!==on)&&(a.stencilFunc(xt,Kt,on),_e=xt,Ue=Kt,Oe=on)},setOp:function(xt,Kt,on){(tt!==xt||zt!==Kt||Vt!==on)&&(a.stencilOp(xt,Kt,on),tt=xt,zt=Kt,Vt=on)},setLocked:function(xt){q=xt},setClear:function(xt){Et!==xt&&(a.clearStencil(xt),Et=xt)},reset:function(){q=!1,Re=null,_e=null,Ue=null,Oe=null,tt=null,zt=null,Vt=null,Et=null}}}const l=new i,c=new r,h=new s;let f={},d=null,g={},p=null,_=!1,x=null,b=null,v=null,y=null,S=null,M=null,A=null,R=!1,T=null,N=null,X=null,H=null,O=null;const te=a.getParameter(35661);let V=!1,Y=0;const $=a.getParameter(7938);$.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec($)[1]),V=Y>=1):$.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),V=Y>=2);let W=null,ee={};const re=a.getParameter(3088),Le=a.getParameter(2978),J=new Ft().fromArray(re),ve=new Ft().fromArray(Le);function ze(q,Re,_e){const Ue=new Uint8Array(4),Oe=a.createTexture();a.bindTexture(q,Oe),a.texParameteri(q,10241,9728),a.texParameteri(q,10240,9728);for(let tt=0;tt<_e;tt++)a.texImage2D(Re+tt,0,6408,1,1,0,6408,5121,Ue);return Oe}const fe={};fe[3553]=ze(3553,3553,1),fe[34067]=ze(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Me(2929),c.setFunc(Nd),oe(!1),ce(Rv),Me(2884),ge(ms);function Me(q){f[q]!==!0&&(a.enable(q),f[q]=!0)}function Te(q){f[q]!==!1&&(a.disable(q),f[q]=!1)}function z(q){q!==d&&(a.bindFramebuffer(36160,q),d=q)}function F(q,Re){return Re===null&&d!==null&&(Re=d),g[q]!==Re?(a.bindFramebuffer(q,Re),g[q]=Re,n&&(q===36009&&(g[36160]=Re),q===36160&&(g[36009]=Re)),!0):!1}function k(q){return p!==q?(a.useProgram(q),p=q,!0):!1}const ne={[aa]:32774,[iR]:32778,[rR]:32779};if(n)ne[Fv]=32775,ne[Nv]=32776;else{const q=e.get("EXT_blend_minmax");q!==null&&(ne[Fv]=q.MIN_EXT,ne[Nv]=q.MAX_EXT)}const de={[sR]:0,[oR]:1,[aR]:768,[Bv]:770,[dR]:776,[hR]:774,[cR]:772,[lR]:769,[Uv]:771,[fR]:775,[uR]:773};function ge(q,Re,_e,Ue,Oe,tt,zt,Vt){if(q===ms){_===!0&&(Te(3042),_=!1);return}if(_===!1&&(Me(3042),_=!0),q!==nR){if(q!==x||Vt!==R){if((b!==aa||S!==aa)&&(a.blendEquation(32774),b=aa,S=aa),Vt)switch(q){case Rl:a.blendFuncSeparate(1,771,1,771);break;case Iv:a.blendFunc(1,1);break;case Dv:a.blendFuncSeparate(0,0,769,771);break;case Ov:a.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Rl:a.blendFuncSeparate(770,771,1,771);break;case Iv:a.blendFunc(770,1);break;case Dv:a.blendFunc(0,769);break;case Ov:a.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}v=null,y=null,M=null,A=null,x=q,R=Vt}return}Oe=Oe||Re,tt=tt||_e,zt=zt||Ue,(Re!==b||Oe!==S)&&(a.blendEquationSeparate(ne[Re],ne[Oe]),b=Re,S=Oe),(_e!==v||Ue!==y||tt!==M||zt!==A)&&(a.blendFuncSeparate(de[_e],de[Ue],de[tt],de[zt]),v=_e,y=Ue,M=tt,A=zt),x=q,R=null}function Z(q,Re){q.side===no?Te(2884):Me(2884);let _e=q.side===fn;Re&&(_e=!_e),oe(_e),q.blending===Rl&&q.transparent===!1?ge(ms):ge(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),c.setFunc(q.depthFunc),c.setTest(q.depthTest),c.setMask(q.depthWrite),l.setMask(q.colorWrite);const Ue=q.stencilWrite;h.setTest(Ue),Ue&&(h.setMask(q.stencilWriteMask),h.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),h.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),xe(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?Me(32926):Te(32926)}function oe(q){T!==q&&(q?a.frontFace(2304):a.frontFace(2305),T=q)}function ce(q){q!==QL?(Me(2884),q!==N&&(q===Rv?a.cullFace(1029):q===eR?a.cullFace(1028):a.cullFace(1032))):Te(2884),N=q}function Se(q){q!==X&&(V&&a.lineWidth(q),X=q)}function xe(q,Re,_e){q?(Me(32823),(H!==Re||O!==_e)&&(a.polygonOffset(Re,_e),H=Re,O=_e)):Te(32823)}function I(q){q?Me(3089):Te(3089)}function P(q){q===void 0&&(q=33984+te-1),W!==q&&(a.activeTexture(q),W=q)}function le(q,Re){W===null&&P();let _e=ee[W];_e===void 0&&(_e={type:void 0,texture:void 0},ee[W]=_e),(_e.type!==q||_e.texture!==Re)&&(a.bindTexture(q,Re||fe[q]),_e.type=q,_e.texture=Re)}function ye(){const q=ee[W];q!==void 0&&q.type!==void 0&&(a.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function we(){try{a.compressedTexImage2D.apply(a,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ae(){try{a.texImage2D.apply(a,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function We(){try{a.texImage3D.apply(a,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ke(q){J.equals(q)===!1&&(a.scissor(q.x,q.y,q.z,q.w),J.copy(q))}function Xe(q){ve.equals(q)===!1&&(a.viewport(q.x,q.y,q.z,q.w),ve.copy(q))}function Be(){a.disable(3042),a.disable(2884),a.disable(2929),a.disable(32823),a.disable(3089),a.disable(2960),a.disable(32926),a.blendEquation(32774),a.blendFunc(1,0),a.blendFuncSeparate(1,0,1,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(513),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(519,0,4294967295),a.stencilOp(7680,7680,7680),a.clearStencil(0),a.cullFace(1029),a.frontFace(2305),a.polygonOffset(0,0),a.activeTexture(33984),a.bindFramebuffer(36160,null),n===!0&&(a.bindFramebuffer(36009,null),a.bindFramebuffer(36008,null)),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),f={},W=null,ee={},d=null,g={},p=null,_=!1,x=null,b=null,v=null,y=null,S=null,M=null,A=null,R=!1,T=null,N=null,X=null,H=null,O=null,J.set(0,0,a.canvas.width,a.canvas.height),ve.set(0,0,a.canvas.width,a.canvas.height),l.reset(),c.reset(),h.reset()}return{buffers:{color:l,depth:c,stencil:h},enable:Me,disable:Te,bindFramebuffer:F,bindXRFramebuffer:z,useProgram:k,setBlending:ge,setMaterial:Z,setFlipSided:oe,setCullFace:ce,setLineWidth:Se,setPolygonOffset:xe,setScissorTest:I,activeTexture:P,bindTexture:le,unbindTexture:ye,compressedTexImage2D:we,texImage2D:Ae,texImage3D:We,scissor:ke,viewport:Xe,reset:Be}}function xD(a,e,t,n,i,r,s){const l=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,f=i.maxTextureSize,d=i.maxSamples,g=new WeakMap;let p,_=!1;try{_=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(I,P){return _?new OffscreenCanvas(I,P):zu("canvas")}function b(I,P,le,ye){let we=1;if((I.width>ye||I.height>ye)&&(we=ye/Math.max(I.width,I.height)),we<1||P===!0)if(typeof HTMLImageElement!="undefined"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&I instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&I instanceof ImageBitmap){const Ae=P?rx:Math.floor,We=Ae(we*I.width),ke=Ae(we*I.height);p===void 0&&(p=x(We,ke));const Xe=le?x(We,ke):p;return Xe.width=We,Xe.height=ke,Xe.getContext("2d").drawImage(I,0,0,We,ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+I.width+"x"+I.height+") to ("+We+"x"+ke+")."),Xe}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+I.width+"x"+I.height+")."),I;return I}function v(I){return jd(I.width)&&jd(I.height)}function y(I){return l?!1:I.wrapS!==ii||I.wrapT!==ii||I.minFilter!==dn&&I.minFilter!==ri}function S(I,P){return I.generateMipmaps&&P&&I.minFilter!==dn&&I.minFilter!==ri}function M(I,P,le,ye,we=1){a.generateMipmap(I);const Ae=n.get(P);Ae.__maxMipLevel=Math.log2(Math.max(le,ye,we))}function A(I,P,le,ye){if(l===!1)return P;if(I!==null){if(a[I]!==void 0)return a[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let we=P;return P===6403&&(le===5126&&(we=33326),le===5131&&(we=33325),le===5121&&(we=33321)),P===6407&&(le===5126&&(we=34837),le===5131&&(we=34843),le===5121&&(we=32849)),P===6408&&(le===5126&&(we=34836),le===5131&&(we=34842),le===5121&&(we=ye===ar?35907:32856)),(we===33325||we===33326||we===34842||we===34836)&&e.get("EXT_color_buffer_float"),we}function R(I){return I===dn||I===kd||I===Gd?9728:9729}function T(I){const P=I.target;P.removeEventListener("dispose",T),X(P),P.isVideoTexture&&g.delete(P),s.memory.textures--}function N(I){const P=I.target;P.removeEventListener("dispose",N),H(P)}function X(I){const P=n.get(I);P.__webglInit!==void 0&&(a.deleteTexture(P.__webglTexture),n.remove(I))}function H(I){const P=I.texture,le=n.get(I),ye=n.get(P);if(!!I){if(ye.__webglTexture!==void 0&&(a.deleteTexture(ye.__webglTexture),s.memory.textures--),I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)a.deleteFramebuffer(le.__webglFramebuffer[we]),le.__webglDepthbuffer&&a.deleteRenderbuffer(le.__webglDepthbuffer[we]);else a.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&a.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&a.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer&&a.deleteRenderbuffer(le.__webglColorRenderbuffer),le.__webglDepthRenderbuffer&&a.deleteRenderbuffer(le.__webglDepthRenderbuffer);if(I.isWebGLMultipleRenderTargets)for(let we=0,Ae=P.length;we<Ae;we++){const We=n.get(P[we]);We.__webglTexture&&(a.deleteTexture(We.__webglTexture),s.memory.textures--),n.remove(P[we])}n.remove(P),n.remove(I)}}let O=0;function te(){O=0}function V(){const I=O;return I>=c&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+c),O+=1,I}function Y(I,P){const le=n.get(I);if(I.isVideoTexture&&Z(I),I.version>0&&le.__version!==I.version){const ye=I.image;if(ye===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ze(le,I,P);return}}t.activeTexture(33984+P),t.bindTexture(3553,le.__webglTexture)}function $(I,P){const le=n.get(I);if(I.version>0&&le.__version!==I.version){ze(le,I,P);return}t.activeTexture(33984+P),t.bindTexture(35866,le.__webglTexture)}function W(I,P){const le=n.get(I);if(I.version>0&&le.__version!==I.version){ze(le,I,P);return}t.activeTexture(33984+P),t.bindTexture(32879,le.__webglTexture)}function ee(I,P){const le=n.get(I);if(I.version>0&&le.__version!==I.version){fe(le,I,P);return}t.activeTexture(33984+P),t.bindTexture(34067,le.__webglTexture)}const re={[la]:10497,[ii]:33071,[Du]:33648},Le={[dn]:9728,[kd]:9984,[Gd]:9986,[ri]:9729,[kv]:9985,[ca]:9987};function J(I,P,le){if(le?(a.texParameteri(I,10242,re[P.wrapS]),a.texParameteri(I,10243,re[P.wrapT]),(I===32879||I===35866)&&a.texParameteri(I,32882,re[P.wrapR]),a.texParameteri(I,10240,Le[P.magFilter]),a.texParameteri(I,10241,Le[P.minFilter])):(a.texParameteri(I,10242,33071),a.texParameteri(I,10243,33071),(I===32879||I===35866)&&a.texParameteri(I,32882,33071),(P.wrapS!==ii||P.wrapT!==ii)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(I,10240,R(P.magFilter)),a.texParameteri(I,10241,R(P.minFilter)),P.minFilter!==dn&&P.minFilter!==ri&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(P.type===Fr&&e.has("OES_texture_float_linear")===!1||l===!1&&P.type===ua&&e.has("OES_texture_half_float_linear")===!1)return;(P.anisotropy>1||n.get(P).__currentAnisotropy)&&(a.texParameterf(I,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,i.getMaxAnisotropy())),n.get(P).__currentAnisotropy=P.anisotropy)}}function ve(I,P){I.__webglInit===void 0&&(I.__webglInit=!0,P.addEventListener("dispose",T),I.__webglTexture=a.createTexture(),s.memory.textures++)}function ze(I,P,le){let ye=3553;P.isDataTexture2DArray&&(ye=35866),P.isDataTexture3D&&(ye=32879),ve(I,P),t.activeTexture(33984+le),t.bindTexture(ye,I.__webglTexture),a.pixelStorei(37440,P.flipY),a.pixelStorei(37441,P.premultiplyAlpha),a.pixelStorei(3317,P.unpackAlignment),a.pixelStorei(37443,0);const we=y(P)&&v(P.image)===!1,Ae=b(P.image,we,!1,f),We=v(Ae)||l,ke=r.convert(P.format);let Xe=r.convert(P.type),Be=A(P.internalFormat,ke,Xe,P.encoding);J(ye,P,We);let q;const Re=P.mipmaps;if(P.isDepthTexture)Be=6402,l?P.type===Fr?Be=36012:P.type===Fu?Be=33190:P.type===Il?Be=35056:Be=33189:P.type===Fr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===ha&&Be===6402&&P.type!==Ou&&P.type!==Fu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Ou,Xe=r.convert(P.type)),P.format===Dl&&Be===6402&&(Be=34041,P.type!==Il&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=Il,Xe=r.convert(P.type))),t.texImage2D(3553,0,Be,Ae.width,Ae.height,0,ke,Xe,null);else if(P.isDataTexture)if(Re.length>0&&We){for(let _e=0,Ue=Re.length;_e<Ue;_e++)q=Re[_e],t.texImage2D(3553,_e,Be,q.width,q.height,0,ke,Xe,q.data);P.generateMipmaps=!1,I.__maxMipLevel=Re.length-1}else t.texImage2D(3553,0,Be,Ae.width,Ae.height,0,ke,Xe,Ae.data),I.__maxMipLevel=0;else if(P.isCompressedTexture){for(let _e=0,Ue=Re.length;_e<Ue;_e++)q=Re[_e],P.format!==Pn&&P.format!==ro?ke!==null?t.compressedTexImage2D(3553,_e,Be,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,_e,Be,q.width,q.height,0,ke,Xe,q.data);I.__maxMipLevel=Re.length-1}else if(P.isDataTexture2DArray)t.texImage3D(35866,0,Be,Ae.width,Ae.height,Ae.depth,0,ke,Xe,Ae.data),I.__maxMipLevel=0;else if(P.isDataTexture3D)t.texImage3D(32879,0,Be,Ae.width,Ae.height,Ae.depth,0,ke,Xe,Ae.data),I.__maxMipLevel=0;else if(Re.length>0&&We){for(let _e=0,Ue=Re.length;_e<Ue;_e++)q=Re[_e],t.texImage2D(3553,_e,Be,ke,Xe,q);P.generateMipmaps=!1,I.__maxMipLevel=Re.length-1}else t.texImage2D(3553,0,Be,ke,Xe,Ae),I.__maxMipLevel=0;S(P,We)&&M(ye,P,Ae.width,Ae.height),I.__version=P.version,P.onUpdate&&P.onUpdate(P)}function fe(I,P,le){if(P.image.length!==6)return;ve(I,P),t.activeTexture(33984+le),t.bindTexture(34067,I.__webglTexture),a.pixelStorei(37440,P.flipY),a.pixelStorei(37441,P.premultiplyAlpha),a.pixelStorei(3317,P.unpackAlignment),a.pixelStorei(37443,0);const ye=P&&(P.isCompressedTexture||P.image[0].isCompressedTexture),we=P.image[0]&&P.image[0].isDataTexture,Ae=[];for(let _e=0;_e<6;_e++)!ye&&!we?Ae[_e]=b(P.image[_e],!1,!0,h):Ae[_e]=we?P.image[_e].image:P.image[_e];const We=Ae[0],ke=v(We)||l,Xe=r.convert(P.format),Be=r.convert(P.type),q=A(P.internalFormat,Xe,Be,P.encoding);J(34067,P,ke);let Re;if(ye){for(let _e=0;_e<6;_e++){Re=Ae[_e].mipmaps;for(let Ue=0;Ue<Re.length;Ue++){const Oe=Re[Ue];P.format!==Pn&&P.format!==ro?Xe!==null?t.compressedTexImage2D(34069+_e,Ue,q,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+_e,Ue,q,Oe.width,Oe.height,0,Xe,Be,Oe.data)}}I.__maxMipLevel=Re.length-1}else{Re=P.mipmaps;for(let _e=0;_e<6;_e++)if(we){t.texImage2D(34069+_e,0,q,Ae[_e].width,Ae[_e].height,0,Xe,Be,Ae[_e].data);for(let Ue=0;Ue<Re.length;Ue++){const tt=Re[Ue].image[_e].image;t.texImage2D(34069+_e,Ue+1,q,tt.width,tt.height,0,Xe,Be,tt.data)}}else{t.texImage2D(34069+_e,0,q,Xe,Be,Ae[_e]);for(let Ue=0;Ue<Re.length;Ue++){const Oe=Re[Ue];t.texImage2D(34069+_e,Ue+1,q,Xe,Be,Oe.image[_e])}}I.__maxMipLevel=Re.length}S(P,ke)&&M(34067,P,We.width,We.height),I.__version=P.version,P.onUpdate&&P.onUpdate(P)}function Me(I,P,le,ye,we){const Ae=r.convert(le.format),We=r.convert(le.type),ke=A(le.internalFormat,Ae,We,le.encoding);we===32879||we===35866?t.texImage3D(we,0,ke,P.width,P.height,P.depth,0,Ae,We,null):t.texImage2D(we,0,ke,P.width,P.height,0,Ae,We,null),t.bindFramebuffer(36160,I),a.framebufferTexture2D(36160,ye,we,n.get(le).__webglTexture,0),t.bindFramebuffer(36160,null)}function Te(I,P,le){if(a.bindRenderbuffer(36161,I),P.depthBuffer&&!P.stencilBuffer){let ye=33189;if(le){const we=P.depthTexture;we&&we.isDepthTexture&&(we.type===Fr?ye=36012:we.type===Fu&&(ye=33190));const Ae=ge(P);a.renderbufferStorageMultisample(36161,Ae,ye,P.width,P.height)}else a.renderbufferStorage(36161,ye,P.width,P.height);a.framebufferRenderbuffer(36160,36096,36161,I)}else if(P.depthBuffer&&P.stencilBuffer){if(le){const ye=ge(P);a.renderbufferStorageMultisample(36161,ye,35056,P.width,P.height)}else a.renderbufferStorage(36161,34041,P.width,P.height);a.framebufferRenderbuffer(36160,33306,36161,I)}else{const ye=P.isWebGLMultipleRenderTargets===!0?P.texture[0]:P.texture,we=r.convert(ye.format),Ae=r.convert(ye.type),We=A(ye.internalFormat,we,Ae,ye.encoding);if(le){const ke=ge(P);a.renderbufferStorageMultisample(36161,ke,We,P.width,P.height)}else a.renderbufferStorage(36161,We,P.width,P.height)}a.bindRenderbuffer(36161,null)}function z(I,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,I),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),Y(P.depthTexture,0);const ye=n.get(P.depthTexture).__webglTexture;if(P.depthTexture.format===ha)a.framebufferTexture2D(36160,36096,3553,ye,0);else if(P.depthTexture.format===Dl)a.framebufferTexture2D(36160,33306,3553,ye,0);else throw new Error("Unknown depthTexture format")}function F(I){const P=n.get(I),le=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture){if(le)throw new Error("target.depthTexture not supported in Cube render targets");z(P.__webglFramebuffer,I)}else if(le){P.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)t.bindFramebuffer(36160,P.__webglFramebuffer[ye]),P.__webglDepthbuffer[ye]=a.createRenderbuffer(),Te(P.__webglDepthbuffer[ye],I,!1)}else t.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=a.createRenderbuffer(),Te(P.__webglDepthbuffer,I,!1);t.bindFramebuffer(36160,null)}function k(I){const P=I.texture,le=n.get(I),ye=n.get(P);I.addEventListener("dispose",N),I.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture=a.createTexture(),ye.__version=P.version,s.memory.textures++);const we=I.isWebGLCubeRenderTarget===!0,Ae=I.isWebGLMultipleRenderTargets===!0,We=I.isWebGLMultisampleRenderTarget===!0,ke=P.isDataTexture3D||P.isDataTexture2DArray,Xe=v(I)||l;if(l&&P.format===ro&&(P.type===Fr||P.type===ua)&&(P.format=Pn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),we){le.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)le.__webglFramebuffer[Be]=a.createFramebuffer()}else if(le.__webglFramebuffer=a.createFramebuffer(),Ae)if(i.drawBuffers){const Be=I.texture;for(let q=0,Re=Be.length;q<Re;q++){const _e=n.get(Be[q]);_e.__webglTexture===void 0&&(_e.__webglTexture=a.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(We)if(l){le.__webglMultisampledFramebuffer=a.createFramebuffer(),le.__webglColorRenderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(36161,le.__webglColorRenderbuffer);const Be=r.convert(P.format),q=r.convert(P.type),Re=A(P.internalFormat,Be,q,P.encoding),_e=ge(I);a.renderbufferStorageMultisample(36161,_e,Re,I.width,I.height),t.bindFramebuffer(36160,le.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(36160,36064,36161,le.__webglColorRenderbuffer),a.bindRenderbuffer(36161,null),I.depthBuffer&&(le.__webglDepthRenderbuffer=a.createRenderbuffer(),Te(le.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(we){t.bindTexture(34067,ye.__webglTexture),J(34067,P,Xe);for(let Be=0;Be<6;Be++)Me(le.__webglFramebuffer[Be],I,P,36064,34069+Be);S(P,Xe)&&M(34067,P,I.width,I.height),t.unbindTexture()}else if(Ae){const Be=I.texture;for(let q=0,Re=Be.length;q<Re;q++){const _e=Be[q],Ue=n.get(_e);t.bindTexture(3553,Ue.__webglTexture),J(3553,_e,Xe),Me(le.__webglFramebuffer,I,_e,36064+q,3553),S(_e,Xe)&&M(3553,_e,I.width,I.height)}t.unbindTexture()}else{let Be=3553;ke&&(l?Be=P.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Be,ye.__webglTexture),J(Be,P,Xe),Me(le.__webglFramebuffer,I,P,36064,Be),S(P,Xe)&&M(Be,P,I.width,I.height,I.depth),t.unbindTexture()}I.depthBuffer&&F(I)}function ne(I){const P=v(I)||l,le=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let ye=0,we=le.length;ye<we;ye++){const Ae=le[ye];if(S(Ae,P)){const We=I.isWebGLCubeRenderTarget?34067:3553,ke=n.get(Ae).__webglTexture;t.bindTexture(We,ke),M(We,Ae,I.width,I.height),t.unbindTexture()}}}function de(I){if(I.isWebGLMultisampleRenderTarget)if(l){const P=I.width,le=I.height;let ye=16384;I.depthBuffer&&(ye|=256),I.stencilBuffer&&(ye|=1024);const we=n.get(I);t.bindFramebuffer(36008,we.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,we.__webglFramebuffer),a.blitFramebuffer(0,0,P,le,0,0,P,le,ye,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,we.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ge(I){return l&&I.isWebGLMultisampleRenderTarget?Math.min(d,I.samples):0}function Z(I){const P=s.render.frame;g.get(I)!==P&&(g.set(I,P),I.update())}let oe=!1,ce=!1;function Se(I,P){I&&I.isWebGLRenderTarget&&(oe===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),oe=!0),I=I.texture),Y(I,P)}function xe(I,P){I&&I.isWebGLCubeRenderTarget&&(ce===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ce=!0),I=I.texture),ee(I,P)}this.allocateTextureUnit=V,this.resetTextureUnits=te,this.setTexture2D=Y,this.setTexture2DArray=$,this.setTexture3D=W,this.setTextureCube=ee,this.setupRenderTarget=k,this.updateRenderTargetMipmap=ne,this.updateMultisampleRenderTarget=de,this.safeSetTexture2D=Se,this.safeSetTextureCube=xe}function yD(a,e,t){const n=t.isWebGL2;function i(r){let s;if(r===gs)return 5121;if(r===PR)return 32819;if(r===IR)return 32820;if(r===DR)return 33635;if(r===LR)return 5120;if(r===RR)return 5122;if(r===Ou)return 5123;if(r===CR)return 5124;if(r===Fu)return 5125;if(r===Fr)return 5126;if(r===ua)return n?5131:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(r===OR)return 6406;if(r===ro)return 6407;if(r===Pn)return 6408;if(r===FR)return 6409;if(r===NR)return 6410;if(r===ha)return 6402;if(r===Dl)return 34041;if(r===UR)return 6403;if(r===zR)return 36244;if(r===kR)return 33319;if(r===GR)return 33320;if(r===HR)return 36248;if(r===VR)return 36249;if(r===Gv||r===Hv||r===Vv||r===Wv)if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Gv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Hv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Vv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Wv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Xv||r===Yv||r===qv||r===jv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Xv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Yv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===qv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===jv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===WR)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((r===Zv||r===Jv)&&(s=e.get("WEBGL_compressed_texture_etc"),s!==null)){if(r===Zv)return s.COMPRESSED_RGB8_ETC2;if(r===Jv)return s.COMPRESSED_RGBA8_ETC2_EAC}if(r===XR||r===YR||r===qR||r===jR||r===ZR||r===JR||r===KR||r===$R||r===QR||r===eC||r===tC||r===nC||r===iC||r===rC||r===oC||r===aC||r===lC||r===cC||r===uC||r===hC||r===fC||r===dC||r===pC||r===mC||r===gC||r===_C||r===vC||r===xC)return s=e.get("WEBGL_compressed_texture_astc"),s!==null?r:null;if(r===sC)return s=e.get("EXT_texture_compression_bptc"),s!==null?r:null;if(r===Il)return n?34042:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class oy extends Wn{constructor(e=[]){super();this.cameras=e}}oy.prototype.isArrayCamera=!0;class Ls extends Mt{constructor(){super();this.type="Group"}}Ls.prototype.isGroup=!0;const wD={type:"move"};class Lp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ls,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ls,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ls,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const l=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(l!==null&&(i=t.getPose(e.targetRaySpace,n),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(wD))),h&&e.hand){s=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,n);if(h.joints[x.jointName]===void 0){const y=new Ls;y.matrixAutoUpdate=!1,y.visible=!1,h.joints[x.jointName]=y,h.add(y)}const v=h.joints[x.jointName];b!==null&&(v.matrix.fromArray(b.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=b.radius),v.visible=b!==null}const f=h.joints["index-finger-tip"],d=h.joints["thumb-tip"],g=f.position.distanceTo(d.position),p=.02,_=.005;h.inputState.pinching&&g>p+_?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&g<=p-_&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=r!==null),h!==null&&(h.visible=s!==null),this}}class bD extends oo{constructor(e,t){super();const n=this,i=e.state;let r=null,s=1,l=null,c="local-floor",h=null,f=null,d=null,g=null,p=null,_=!1,x=null,b=null,v=null,y=null,S=null,M=null;const A=[],R=new Map,T=new Wn;T.layers.enable(1),T.viewport=new Ft;const N=new Wn;N.layers.enable(2),N.viewport=new Ft;const X=[T,N],H=new oy;H.layers.enable(1),H.layers.enable(2);let O=null,te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let Me=A[fe];return Me===void 0&&(Me=new Lp,A[fe]=Me),Me.getTargetRaySpace()},this.getControllerGrip=function(fe){let Me=A[fe];return Me===void 0&&(Me=new Lp,A[fe]=Me),Me.getGripSpace()},this.getHand=function(fe){let Me=A[fe];return Me===void 0&&(Me=new Lp,A[fe]=Me),Me.getHandSpace()};function V(fe){const Me=R.get(fe.inputSource);Me&&Me.dispatchEvent({type:fe.type,data:fe.inputSource})}function Y(){R.forEach(function(fe,Me){fe.disconnect(Me)}),R.clear(),O=null,te=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),d&&t.deleteFramebuffer(d),x&&t.deleteFramebuffer(x),b&&t.deleteRenderbuffer(b),v&&t.deleteRenderbuffer(v),d=null,x=null,b=null,v=null,p=null,g=null,f=null,r=null,ze.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){s=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){c=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l},this.getBaseLayer=function(){return g!==null?g:p},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(fe){if(r=fe,r!==null){r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",$);const Me=t.getContextAttributes();if(Me.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0){const Te={antialias:Me.antialias,alpha:Me.alpha,depth:Me.depth,stencil:Me.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,Te),r.updateRenderState({baseLayer:p})}else if(t instanceof WebGLRenderingContext){const Te={antialias:!0,alpha:Me.alpha,depth:Me.depth,stencil:Me.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,Te),r.updateRenderState({layers:[p]})}else{_=Me.antialias;let Te=null;Me.depth&&(M=256,Me.stencil&&(M|=1024),S=Me.stencil?33306:36096,Te=Me.stencil?35056:33190);const z={colorFormat:Me.alpha?32856:32849,depthFormat:Te,scaleFactor:s};f=new XRWebGLBinding(r,t),g=f.createProjectionLayer(z),d=t.createFramebuffer(),r.updateRenderState({layers:[g]}),_&&(x=t.createFramebuffer(),b=t.createRenderbuffer(),t.bindRenderbuffer(36161,b),t.renderbufferStorageMultisample(36161,4,32856,g.textureWidth,g.textureHeight),i.bindFramebuffer(36160,x),t.framebufferRenderbuffer(36160,36064,36161,b),t.bindRenderbuffer(36161,null),Te!==null&&(v=t.createRenderbuffer(),t.bindRenderbuffer(36161,v),t.renderbufferStorageMultisample(36161,4,Te,g.textureWidth,g.textureHeight),t.framebufferRenderbuffer(36160,S,36161,v),t.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}l=await r.requestReferenceSpace(c),ze.setContext(r),ze.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function $(fe){const Me=r.inputSources;for(let Te=0;Te<A.length;Te++)R.set(Me[Te],A[Te]);for(let Te=0;Te<fe.removed.length;Te++){const z=fe.removed[Te],F=R.get(z);F&&(F.dispatchEvent({type:"disconnected",data:z}),R.delete(z))}for(let Te=0;Te<fe.added.length;Te++){const z=fe.added[Te],F=R.get(z);F&&F.dispatchEvent({type:"connected",data:z})}}const W=new U,ee=new U;function re(fe,Me,Te){W.setFromMatrixPosition(Me.matrixWorld),ee.setFromMatrixPosition(Te.matrixWorld);const z=W.distanceTo(ee),F=Me.projectionMatrix.elements,k=Te.projectionMatrix.elements,ne=F[14]/(F[10]-1),de=F[14]/(F[10]+1),ge=(F[9]+1)/F[5],Z=(F[9]-1)/F[5],oe=(F[8]-1)/F[0],ce=(k[8]+1)/k[0],Se=ne*oe,xe=ne*ce,I=z/(-oe+ce),P=I*-oe;Me.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(P),fe.translateZ(I),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert();const le=ne+I,ye=de+I,we=Se-P,Ae=xe+(z-P),We=ge*de/ye*le,ke=Z*de/ye*le;fe.projectionMatrix.makePerspective(we,Ae,We,ke,le,ye)}function Le(fe,Me){Me===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(Me.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(r===null)return;H.near=N.near=T.near=fe.near,H.far=N.far=T.far=fe.far,(O!==H.near||te!==H.far)&&(r.updateRenderState({depthNear:H.near,depthFar:H.far}),O=H.near,te=H.far);const Me=fe.parent,Te=H.cameras;Le(H,Me);for(let F=0;F<Te.length;F++)Le(Te[F],Me);H.matrixWorld.decompose(H.position,H.quaternion,H.scale),fe.position.copy(H.position),fe.quaternion.copy(H.quaternion),fe.scale.copy(H.scale),fe.matrix.copy(H.matrix),fe.matrixWorld.copy(H.matrixWorld);const z=fe.children;for(let F=0,k=z.length;F<k;F++)z[F].updateMatrixWorld(!0);Te.length===2?re(H,T,N):H.projectionMatrix.copy(T.projectionMatrix)},this.getCamera=function(){return H},this.getFoveation=function(){if(g!==null)return g.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(fe){g!==null&&(g.fixedFoveation=fe),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=fe)};let J=null;function ve(fe,Me){if(h=Me.getViewerPose(l),y=Me,h!==null){const z=h.views;p!==null&&i.bindXRFramebuffer(p.framebuffer);let F=!1;z.length!==H.cameras.length&&(H.cameras.length=0,F=!0);for(let k=0;k<z.length;k++){const ne=z[k];let de=null;if(p!==null)de=p.getViewport(ne);else{const Z=f.getViewSubImage(g,ne);i.bindXRFramebuffer(d),Z.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,S,3553,Z.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,Z.colorTexture,0),de=Z.viewport}const ge=X[k];ge.matrix.fromArray(ne.transform.matrix),ge.projectionMatrix.fromArray(ne.projectionMatrix),ge.viewport.set(de.x,de.y,de.width,de.height),k===0&&H.matrix.copy(ge.matrix),F===!0&&H.cameras.push(ge)}_&&(i.bindXRFramebuffer(x),M!==null&&t.clear(M))}const Te=r.inputSources;for(let z=0;z<A.length;z++){const F=A[z],k=Te[z];F.update(k,Me,l)}if(J&&J(fe,Me),_){const z=g.textureWidth,F=g.textureHeight;i.bindFramebuffer(36008,x),i.bindFramebuffer(36009,d),t.invalidateFramebuffer(36008,[S]),t.invalidateFramebuffer(36009,[S]),t.blitFramebuffer(0,0,z,F,0,0,z,F,16384,9728),t.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,x)}y=null}const ze=new Sx;ze.setAnimationLoop(ve),this.setAnimationLoop=function(fe){J=fe},this.dispose=function(){}}}function MD(a){function e(v,y){v.fogColor.value.copy(y.color),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function t(v,y,S,M,A){y.isMeshBasicMaterial?n(v,y):y.isMeshLambertMaterial?(n(v,y),c(v,y)):y.isMeshToonMaterial?(n(v,y),f(v,y)):y.isMeshPhongMaterial?(n(v,y),h(v,y)):y.isMeshStandardMaterial?(n(v,y),y.isMeshPhysicalMaterial?g(v,y,A):d(v,y)):y.isMeshMatcapMaterial?(n(v,y),p(v,y)):y.isMeshDepthMaterial?(n(v,y),_(v,y)):y.isMeshDistanceMaterial?(n(v,y),x(v,y)):y.isMeshNormalMaterial?(n(v,y),b(v,y)):y.isLineBasicMaterial?(i(v,y),y.isLineDashedMaterial&&r(v,y)):y.isPointsMaterial?s(v,y,S,M):y.isSpriteMaterial?l(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function n(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.specularMap&&(v.specularMap.value=y.specularMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const S=a.get(y).envMap;if(S){v.envMap.value=S,v.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio;const R=a.get(S).__maxMipLevel;R!==void 0&&(v.maxMipLevel.value=R)}y.lightMap&&(v.lightMap.value=y.lightMap,v.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity);let M;y.map?M=y.map:y.specularMap?M=y.specularMap:y.displacementMap?M=y.displacementMap:y.normalMap?M=y.normalMap:y.bumpMap?M=y.bumpMap:y.roughnessMap?M=y.roughnessMap:y.metalnessMap?M=y.metalnessMap:y.alphaMap?M=y.alphaMap:y.emissiveMap?M=y.emissiveMap:y.clearcoatMap?M=y.clearcoatMap:y.clearcoatNormalMap?M=y.clearcoatNormalMap:y.clearcoatRoughnessMap?M=y.clearcoatRoughnessMap:y.specularIntensityMap?M=y.specularIntensityMap:y.specularColorMap?M=y.specularColorMap:y.transmissionMap?M=y.transmissionMap:y.thicknessMap?M=y.thicknessMap:y.sheenColorMap?M=y.sheenColorMap:y.sheenRoughnessMap&&(M=y.sheenRoughnessMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),v.uvTransform.value.copy(M.matrix));let A;y.aoMap?A=y.aoMap:y.lightMap&&(A=y.lightMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),v.uv2Transform.value.copy(A.matrix))}function i(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity}function r(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function s(v,y,S,M){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*S,v.scale.value=M*.5,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let A;y.map?A=y.map:y.alphaMap&&(A=y.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),v.uvTransform.value.copy(A.matrix))}function l(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let S;y.map?S=y.map:y.alphaMap&&(S=y.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix))}function c(v,y){y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap)}function h(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===fn&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===fn&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function f(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===fn&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===fn&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function d(v,y){v.roughness.value=y.roughness,v.metalness.value=y.metalness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===fn&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===fn&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),a.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function g(v,y,S){d(v,y),v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),v.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===fn&&v.clearcoatNormalScale.value.negate())),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=S.texture,v.transmissionSamplerSize.value.set(S.width,S.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap)}function p(v,y){y.matcap&&(v.matcap.value=y.matcap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===fn&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===fn&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function _(v,y){y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function x(v,y){y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),v.referencePosition.value.copy(y.referencePosition),v.nearDistance.value=y.nearDistance,v.farDistance.value=y.farDistance}function b(v,y){y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===fn&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===fn&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function SD(){const a=zu("canvas");return a.style.display="block",a}function Rt(a={}){const e=a.canvas!==void 0?a.canvas:SD(),t=a.context!==void 0?a.context:null,n=a.alpha!==void 0?a.alpha:!1,i=a.depth!==void 0?a.depth:!0,r=a.stencil!==void 0?a.stencil:!0,s=a.antialias!==void 0?a.antialias:!1,l=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0,c=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1,h=a.powerPreference!==void 0?a.powerPreference:"default",f=a.failIfMajorPerformanceCaveat!==void 0?a.failIfMajorPerformanceCaveat:!1;let d=null,g=null;const p=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=In,this.physicallyCorrectLights=!1,this.toneMapping=io,this.toneMappingExposure=1;const x=this;let b=!1,v=0,y=0,S=null,M=-1,A=null;const R=new Ft,T=new Ft;let N=null,X=e.width,H=e.height,O=1,te=null,V=null;const Y=new Ft(0,0,X,H),$=new Ft(0,0,X,H);let W=!1;const ee=[],re=new rh;let Le=!1,J=!1,ve=null;const ze=new Ve,fe=new U,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Te(){return S===null?O:1}let z=t;function F(D,Q){for(let ae=0;ae<D.length;ae++){const ie=D[ae],ue=e.getContext(ie,Q);if(ue!==null)return ue}return null}try{const D={alpha:n,depth:i,stencil:r,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f};if(e.addEventListener("webglcontextlost",zt,!1),e.addEventListener("webglcontextrestored",Vt,!1),z===null){const Q=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&Q.shift(),z=F(Q,D),z===null)throw F(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let k,ne,de,ge,Z,oe,ce,Se,xe,I,P,le,ye,we,Ae,We,ke,Xe,Be,q,Re,_e,Ue;function Oe(){k=new q3(z),ne=new z3(z,k,a),k.init(ne),_e=new yD(z,k,ne),de=new vD(z,k,ne),ee[0]=1029,ge=new J3(z),Z=new aD,oe=new xD(z,k,de,Z,ne,_e,ge),ce=new G3(x),Se=new Y3(x),xe=new c2(z,ne),Ue=new B3(z,k,xe,ne),I=new j3(z,xe,ge,Ue),P=new eI(z,I,xe,ge),Be=new Q3(z,ne,oe),We=new k3(Z),le=new oD(x,ce,Se,k,ne,Ue,We),ye=new MD(Z),we=new cD(Z),Ae=new mD(k,ne),Xe=new N3(x,ce,de,P,l),ke=new sy(x,P,ne),q=new U3(z,k,ge,ne),Re=new Z3(z,k,ge,ne),ge.programs=le.programs,x.capabilities=ne,x.extensions=k,x.properties=Z,x.renderLists=we,x.shadowMap=ke,x.state=de,x.info=ge}Oe();const tt=new bD(x,z);this.xr=tt,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const D=k.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=k.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(D){D!==void 0&&(O=D,this.setSize(X,H,!1))},this.getSize=function(D){return D.set(X,H)},this.setSize=function(D,Q,ae){if(tt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=D,H=Q,e.width=Math.floor(D*O),e.height=Math.floor(Q*O),ae!==!1&&(e.style.width=D+"px",e.style.height=Q+"px"),this.setViewport(0,0,D,Q)},this.getDrawingBufferSize=function(D){return D.set(X*O,H*O).floor()},this.setDrawingBufferSize=function(D,Q,ae){X=D,H=Q,O=ae,e.width=Math.floor(D*ae),e.height=Math.floor(Q*ae),this.setViewport(0,0,D,Q)},this.getCurrentViewport=function(D){return D.copy(R)},this.getViewport=function(D){return D.copy(Y)},this.setViewport=function(D,Q,ae,ie){D.isVector4?Y.set(D.x,D.y,D.z,D.w):Y.set(D,Q,ae,ie),de.viewport(R.copy(Y).multiplyScalar(O).floor())},this.getScissor=function(D){return D.copy($)},this.setScissor=function(D,Q,ae,ie){D.isVector4?$.set(D.x,D.y,D.z,D.w):$.set(D,Q,ae,ie),de.scissor(T.copy($).multiplyScalar(O).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(D){de.setScissorTest(W=D)},this.setOpaqueSort=function(D){te=D},this.setTransparentSort=function(D){V=D},this.getClearColor=function(D){return D.copy(Xe.getClearColor())},this.setClearColor=function(){Xe.setClearColor.apply(Xe,arguments)},this.getClearAlpha=function(){return Xe.getClearAlpha()},this.setClearAlpha=function(){Xe.setClearAlpha.apply(Xe,arguments)},this.clear=function(D,Q,ae){let ie=0;(D===void 0||D)&&(ie|=16384),(Q===void 0||Q)&&(ie|=256),(ae===void 0||ae)&&(ie|=1024),z.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zt,!1),e.removeEventListener("webglcontextrestored",Vt,!1),we.dispose(),Ae.dispose(),Z.dispose(),ce.dispose(),Se.dispose(),P.dispose(),Ue.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",Ji),tt.removeEventListener("sessionend",mr),ve&&(ve.dispose(),ve=null),Yn.stop()};function zt(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Vt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const D=ge.autoReset,Q=ke.enabled,ae=ke.autoUpdate,ie=ke.needsUpdate,ue=ke.type;Oe(),ge.autoReset=D,ke.enabled=Q,ke.autoUpdate=ae,ke.needsUpdate=ie,ke.type=ue}function Et(D){const Q=D.target;Q.removeEventListener("dispose",Et),xt(Q)}function xt(D){Kt(D),Z.remove(D)}function Kt(D){const Q=Z.get(D).programs;Q!==void 0&&Q.forEach(function(ae){le.releaseProgram(ae)})}this.renderBufferDirect=function(D,Q,ae,ie,ue,Fe){Q===null&&(Q=Me);const Ie=ue.isMesh&&ue.matrixWorld.determinant()<0,He=$e(D,Q,ae,ie,ue);de.setMaterial(ie,Ie);let Ke=ae.index;const qe=ae.attributes.position;if(Ke===null){if(qe===void 0||qe.count===0)return}else if(Ke.count===0)return;let Ye=1;ie.wireframe===!0&&(Ke=I.getWireframeAttribute(ae),Ye=2),Ue.setup(ue,ie,He,ae,Ke);let Qe,At=q;Ke!==null&&(Qe=xe.get(Ke),At=Re,At.setIndex(Qe));const xi=Ke!==null?Ke.count:qe.count,ot=ae.drawRange.start*Ye,gr=ae.drawRange.count*Ye,yt=Fe!==null?Fe.start*Ye:0,_r=Fe!==null?Fe.count*Ye:1/0,yi=Math.max(ot,yt),vr=Math.min(xi,ot+gr,yt+_r)-1,Ki=Math.max(0,vr-yi+1);if(Ki!==0){if(ue.isMesh)ie.wireframe===!0?(de.setLineWidth(ie.wireframeLinewidth*Te()),At.setMode(1)):At.setMode(4);else if(ue.isLine){let Wt=ie.linewidth;Wt===void 0&&(Wt=1),de.setLineWidth(Wt*Te()),ue.isLineSegments?At.setMode(1):ue.isLineLoop?At.setMode(2):At.setMode(3)}else ue.isPoints?At.setMode(0):ue.isSprite&&At.setMode(4);if(ue.isInstancedMesh)At.renderInstances(yi,Ki,ue.count);else if(ae.isInstancedBufferGeometry){const Wt=Math.min(ae.instanceCount,ae._maxInstanceCount);At.renderInstances(yi,Ki,Wt)}else At.render(yi,Ki)}},this.compile=function(D,Q){g=Ae.get(D),g.init(),_.push(g),D.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Q.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),g.setupLights(x.physicallyCorrectLights),D.traverse(function(ae){const ie=ae.material;if(ie)if(Array.isArray(ie))for(let ue=0;ue<ie.length;ue++){const Fe=ie[ue];pt(Fe,D,ae)}else pt(ie,D,ae)}),_.pop(),g=null};let on=null;function pr(D){on&&on(D)}function Ji(){Yn.stop()}function mr(){Yn.start()}const Yn=new Sx;Yn.setAnimationLoop(pr),typeof window!="undefined"&&Yn.setContext(window),this.setAnimationLoop=function(D){on=D,tt.setAnimationLoop(D),D===null?Yn.stop():Yn.start()},tt.addEventListener("sessionstart",Ji),tt.addEventListener("sessionend",mr),this.render=function(D,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;D.autoUpdate===!0&&D.updateMatrixWorld(),Q.parent===null&&Q.updateMatrixWorld(),tt.enabled===!0&&tt.isPresenting===!0&&(tt.cameraAutoUpdate===!0&&tt.updateCamera(Q),Q=tt.getCamera()),D.isScene===!0&&D.onBeforeRender(x,D,Q,S),g=Ae.get(D,_.length),g.init(),_.push(g),ze.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),re.setFromProjectionMatrix(ze),J=this.localClippingEnabled,Le=We.init(this.clippingPlanes,J,Q),d=we.get(D,p.length),d.init(),p.push(d),Os(D,Q,0,x.sortObjects),d.finish(),x.sortObjects===!0&&d.sort(te,V),Le===!0&&We.beginShadows();const ae=g.state.shadowsArray;if(ke.render(ae,D,Q),Le===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset(),Xe.render(d,D),g.setupLights(x.physicallyCorrectLights),Q.isArrayCamera){const ie=Q.cameras;for(let ue=0,Fe=ie.length;ue<Fe;ue++){const Ie=ie[ue];xo(d,D,Ie,Ie.viewport)}}else xo(d,D,Q);S!==null&&(oe.updateMultisampleRenderTarget(S),oe.updateRenderTargetMipmap(S)),D.isScene===!0&&D.onAfterRender(x,D,Q),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1),Ue.resetDefaultState(),M=-1,A=null,_.pop(),_.length>0?g=_[_.length-1]:g=null,p.pop(),p.length>0?d=p[p.length-1]:d=null};function Os(D,Q,ae,ie){if(D.visible===!1)return;if(D.layers.test(Q.layers)){if(D.isGroup)ae=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(Q);else if(D.isLight)g.pushLight(D),D.castShadow&&g.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||re.intersectsSprite(D)){ie&&fe.setFromMatrixPosition(D.matrixWorld).applyMatrix4(ze);const Ie=P.update(D),He=D.material;He.visible&&d.push(D,Ie,He,ae,fe.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(D.isSkinnedMesh&&D.skeleton.frame!==ge.render.frame&&(D.skeleton.update(),D.skeleton.frame=ge.render.frame),!D.frustumCulled||re.intersectsObject(D))){ie&&fe.setFromMatrixPosition(D.matrixWorld).applyMatrix4(ze);const Ie=P.update(D),He=D.material;if(Array.isArray(He)){const Ke=Ie.groups;for(let qe=0,Ye=Ke.length;qe<Ye;qe++){const Qe=Ke[qe],At=He[Qe.materialIndex];At&&At.visible&&d.push(D,Ie,At,ae,fe.z,Qe)}}else He.visible&&d.push(D,Ie,He,ae,fe.z,null)}}const Fe=D.children;for(let Ie=0,He=Fe.length;Ie<He;Ie++)Os(Fe[Ie],Q,ae,ie)}function xo(D,Q,ae,ie){const ue=D.opaque,Fe=D.transmissive,Ie=D.transparent;g.setupLightsView(ae),Fe.length>0&&gt(ue,Q,ae),ie&&de.viewport(R.copy(ie)),ue.length>0&&dt(ue,Q,ae),Fe.length>0&&dt(Fe,Q,ae),Ie.length>0&&dt(Ie,Q,ae)}function gt(D,Q,ae){if(ve===null){const Ie=s===!0&&ne.isWebGL2===!0?ax:lr;ve=new Ie(1024,1024,{generateMipmaps:!0,type:_e.convert(ua)!==null?ua:gs,minFilter:ca,magFilter:dn,wrapS:ii,wrapT:ii})}const ie=x.getRenderTarget();x.setRenderTarget(ve),x.clear();const ue=x.toneMapping;x.toneMapping=io,dt(D,Q,ae),x.toneMapping=ue,oe.updateMultisampleRenderTarget(ve),oe.updateRenderTargetMipmap(ve),x.setRenderTarget(ie)}function dt(D,Q,ae){const ie=Q.isScene===!0?Q.overrideMaterial:null;for(let ue=0,Fe=D.length;ue<Fe;ue++){const Ie=D[ue],He=Ie.object,Ke=Ie.geometry,qe=ie===null?Ie.material:ie,Ye=Ie.group;He.layers.test(ae.layers)&&_t(He,Q,ae,Ke,qe,Ye)}}function _t(D,Q,ae,ie,ue,Fe){D.onBeforeRender(x,Q,ae,ie,ue,Fe),D.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ue.onBeforeRender(x,Q,ae,ie,D,Fe),ue.transparent===!0&&ue.side===no?(ue.side=fn,ue.needsUpdate=!0,x.renderBufferDirect(ae,Q,ie,ue,D,Fe),ue.side=oa,ue.needsUpdate=!0,x.renderBufferDirect(ae,Q,ie,ue,D,Fe),ue.side=no):x.renderBufferDirect(ae,Q,ie,ue,D,Fe),D.onAfterRender(x,Q,ae,ie,ue,Fe)}function pt(D,Q,ae){Q.isScene!==!0&&(Q=Me);const ie=Z.get(D),ue=g.state.lights,Fe=g.state.shadowsArray,Ie=ue.state.version,He=le.getParameters(D,ue.state,Fe,Q,ae),Ke=le.getProgramCacheKey(He);let qe=ie.programs;ie.environment=D.isMeshStandardMaterial?Q.environment:null,ie.fog=Q.fog,ie.envMap=(D.isMeshStandardMaterial?Se:ce).get(D.envMap||ie.environment),qe===void 0&&(D.addEventListener("dispose",Et),qe=new Map,ie.programs=qe);let Ye=qe.get(Ke);if(Ye!==void 0){if(ie.currentProgram===Ye&&ie.lightsStateVersion===Ie)return yn(D,He),Ye}else He.uniforms=le.getUniforms(D),D.onBuild(ae,He,x),D.onBeforeCompile(He,x),Ye=le.acquireProgram(He,Ke),qe.set(Ke,Ye),ie.uniforms=He.uniforms;const Qe=ie.uniforms;(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Qe.clippingPlanes=We.uniform),yn(D,He),ie.needsLights=Pt(D),ie.lightsStateVersion=Ie,ie.needsLights&&(Qe.ambientLightColor.value=ue.state.ambient,Qe.lightProbe.value=ue.state.probe,Qe.directionalLights.value=ue.state.directional,Qe.directionalLightShadows.value=ue.state.directionalShadow,Qe.spotLights.value=ue.state.spot,Qe.spotLightShadows.value=ue.state.spotShadow,Qe.rectAreaLights.value=ue.state.rectArea,Qe.ltc_1.value=ue.state.rectAreaLTC1,Qe.ltc_2.value=ue.state.rectAreaLTC2,Qe.pointLights.value=ue.state.point,Qe.pointLightShadows.value=ue.state.pointShadow,Qe.hemisphereLights.value=ue.state.hemi,Qe.directionalShadowMap.value=ue.state.directionalShadowMap,Qe.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,Qe.spotShadowMap.value=ue.state.spotShadowMap,Qe.spotShadowMatrix.value=ue.state.spotShadowMatrix,Qe.pointShadowMap.value=ue.state.pointShadowMap,Qe.pointShadowMatrix.value=ue.state.pointShadowMatrix);const At=Ye.getUniforms(),xi=As.seqWithValue(At.seq,Qe);return ie.currentProgram=Ye,ie.uniformsList=xi,Ye}function yn(D,Q){const ae=Z.get(D);ae.outputEncoding=Q.outputEncoding,ae.instancing=Q.instancing,ae.skinning=Q.skinning,ae.morphTargets=Q.morphTargets,ae.morphNormals=Q.morphNormals,ae.morphTargetsCount=Q.morphTargetsCount,ae.numClippingPlanes=Q.numClippingPlanes,ae.numIntersection=Q.numClipIntersection,ae.vertexAlphas=Q.vertexAlphas,ae.vertexTangents=Q.vertexTangents}function $e(D,Q,ae,ie,ue){Q.isScene!==!0&&(Q=Me),oe.resetTextureUnits();const Fe=Q.fog,Ie=ie.isMeshStandardMaterial?Q.environment:null,He=S===null?x.outputEncoding:S.texture.encoding,Ke=(ie.isMeshStandardMaterial?Se:ce).get(ie.envMap||Ie),qe=ie.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,Ye=!!ie.normalMap&&!!ae.attributes.tangent,Qe=!!ae.morphAttributes.position,At=!!ae.morphAttributes.normal,xi=ae.morphAttributes.position?ae.morphAttributes.position.length:0,ot=Z.get(ie),gr=g.state.lights;if(Le===!0&&(J===!0||D!==A)){const qn=D===A&&ie.id===M;We.setState(ie,D,qn)}let yt=!1;ie.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==gr.state.version||ot.outputEncoding!==He||ue.isInstancedMesh&&ot.instancing===!1||!ue.isInstancedMesh&&ot.instancing===!0||ue.isSkinnedMesh&&ot.skinning===!1||!ue.isSkinnedMesh&&ot.skinning===!0||ot.envMap!==Ke||ie.fog&&ot.fog!==Fe||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==We.numPlanes||ot.numIntersection!==We.numIntersection)||ot.vertexAlphas!==qe||ot.vertexTangents!==Ye||ot.morphTargets!==Qe||ot.morphNormals!==At||ne.isWebGL2===!0&&ot.morphTargetsCount!==xi)&&(yt=!0):(yt=!0,ot.__version=ie.version);let _r=ot.currentProgram;yt===!0&&(_r=pt(ie,Q,ue));let yi=!1,vr=!1,Ki=!1;const Wt=_r.getUniforms(),Xr=ot.uniforms;if(de.useProgram(_r.program)&&(yi=!0,vr=!0,Ki=!0),ie.id!==M&&(M=ie.id,vr=!0),yi||A!==D){if(Wt.setValue(z,"projectionMatrix",D.projectionMatrix),ne.logarithmicDepthBuffer&&Wt.setValue(z,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),A!==D&&(A=D,vr=!0,Ki=!0),ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap){const qn=Wt.map.cameraPosition;qn!==void 0&&qn.setValue(z,fe.setFromMatrixPosition(D.matrixWorld))}(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&Wt.setValue(z,"isOrthographic",D.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.isShadowMaterial||ue.isSkinnedMesh)&&Wt.setValue(z,"viewMatrix",D.matrixWorldInverse)}if(ue.isSkinnedMesh){Wt.setOptional(z,ue,"bindMatrix"),Wt.setOptional(z,ue,"bindMatrixInverse");const qn=ue.skeleton;qn&&(ne.floatVertexTextures?(qn.boneTexture===null&&qn.computeBoneTexture(),Wt.setValue(z,"boneTexture",qn.boneTexture,oe),Wt.setValue(z,"boneTextureSize",qn.boneTextureSize)):Wt.setOptional(z,qn,"boneMatrices"))}return!!ae&&(ae.morphAttributes.position!==void 0||ae.morphAttributes.normal!==void 0)&&Be.update(ue,ae,ie,_r),(vr||ot.receiveShadow!==ue.receiveShadow)&&(ot.receiveShadow=ue.receiveShadow,Wt.setValue(z,"receiveShadow",ue.receiveShadow)),vr&&(Wt.setValue(z,"toneMappingExposure",x.toneMappingExposure),ot.needsLights&&Ct(Xr,Ki),Fe&&ie.fog&&ye.refreshFogUniforms(Xr,Fe),ye.refreshMaterialUniforms(Xr,ie,O,H,ve),As.upload(z,ot.uniformsList,Xr,oe)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(As.upload(z,ot.uniformsList,Xr,oe),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&Wt.setValue(z,"center",ue.center),Wt.setValue(z,"modelViewMatrix",ue.modelViewMatrix),Wt.setValue(z,"normalMatrix",ue.normalMatrix),Wt.setValue(z,"modelMatrix",ue.matrixWorld),_r}function Ct(D,Q){D.ambientLightColor.needsUpdate=Q,D.lightProbe.needsUpdate=Q,D.directionalLights.needsUpdate=Q,D.directionalLightShadows.needsUpdate=Q,D.pointLights.needsUpdate=Q,D.pointLightShadows.needsUpdate=Q,D.spotLights.needsUpdate=Q,D.spotLightShadows.needsUpdate=Q,D.rectAreaLights.needsUpdate=Q,D.hemisphereLights.needsUpdate=Q}function Pt(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return S},this.setRenderTarget=function(D,Q=0,ae=0){S=D,v=Q,y=ae,D&&Z.get(D).__webglFramebuffer===void 0&&oe.setupRenderTarget(D);let ie=null,ue=!1,Fe=!1;if(D){const He=D.texture;(He.isDataTexture3D||He.isDataTexture2DArray)&&(Fe=!0);const Ke=Z.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(ie=Ke[Q],ue=!0):D.isWebGLMultisampleRenderTarget?ie=Z.get(D).__webglMultisampledFramebuffer:ie=Ke,R.copy(D.viewport),T.copy(D.scissor),N=D.scissorTest}else R.copy(Y).multiplyScalar(O).floor(),T.copy($).multiplyScalar(O).floor(),N=W;if(de.bindFramebuffer(36160,ie)&&ne.drawBuffers){let He=!1;if(D)if(D.isWebGLMultipleRenderTargets){const Ke=D.texture;if(ee.length!==Ke.length||ee[0]!==36064){for(let qe=0,Ye=Ke.length;qe<Ye;qe++)ee[qe]=36064+qe;ee.length=Ke.length,He=!0}}else(ee.length!==1||ee[0]!==36064)&&(ee[0]=36064,ee.length=1,He=!0);else(ee.length!==1||ee[0]!==1029)&&(ee[0]=1029,ee.length=1,He=!0);He&&(ne.isWebGL2?z.drawBuffers(ee):k.get("WEBGL_draw_buffers").drawBuffersWEBGL(ee))}if(de.viewport(R),de.scissor(T),de.setScissorTest(N),ue){const He=Z.get(D.texture);z.framebufferTexture2D(36160,36064,34069+Q,He.__webglTexture,ae)}else if(Fe){const He=Z.get(D.texture),Ke=Q||0;z.framebufferTextureLayer(36160,36064,He.__webglTexture,ae||0,Ke)}M=-1},this.readRenderTargetPixels=function(D,Q,ae,ie,ue,Fe,Ie){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let He=Z.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Ie!==void 0&&(He=He[Ie]),He){de.bindFramebuffer(36160,He);try{const Ke=D.texture,qe=Ke.format,Ye=Ke.type;if(qe!==Pn&&_e.convert(qe)!==z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Qe=Ye===ua&&(k.has("EXT_color_buffer_half_float")||ne.isWebGL2&&k.has("EXT_color_buffer_float"));if(Ye!==gs&&_e.convert(Ye)!==z.getParameter(35738)&&!(Ye===Fr&&(ne.isWebGL2||k.has("OES_texture_float")||k.has("WEBGL_color_buffer_float")))&&!Qe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}z.checkFramebufferStatus(36160)===36053?Q>=0&&Q<=D.width-ie&&ae>=0&&ae<=D.height-ue&&z.readPixels(Q,ae,ie,ue,_e.convert(qe),_e.convert(Ye),Fe):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Ke=S!==null?Z.get(S).__webglFramebuffer:null;de.bindFramebuffer(36160,Ke)}}},this.copyFramebufferToTexture=function(D,Q,ae=0){const ie=Math.pow(2,-ae),ue=Math.floor(Q.image.width*ie),Fe=Math.floor(Q.image.height*ie);let Ie=_e.convert(Q.format);ne.isWebGL2&&(Ie===6407&&(Ie=32849),Ie===6408&&(Ie=32856)),oe.setTexture2D(Q,0),z.copyTexImage2D(3553,ae,Ie,D.x,D.y,ue,Fe,0),de.unbindTexture()},this.copyTextureToTexture=function(D,Q,ae,ie=0){const ue=Q.image.width,Fe=Q.image.height,Ie=_e.convert(ae.format),He=_e.convert(ae.type);oe.setTexture2D(ae,0),z.pixelStorei(37440,ae.flipY),z.pixelStorei(37441,ae.premultiplyAlpha),z.pixelStorei(3317,ae.unpackAlignment),Q.isDataTexture?z.texSubImage2D(3553,ie,D.x,D.y,ue,Fe,Ie,He,Q.image.data):Q.isCompressedTexture?z.compressedTexSubImage2D(3553,ie,D.x,D.y,Q.mipmaps[0].width,Q.mipmaps[0].height,Ie,Q.mipmaps[0].data):z.texSubImage2D(3553,ie,D.x,D.y,Ie,He,Q.image),ie===0&&ae.generateMipmaps&&z.generateMipmap(3553),de.unbindTexture()},this.copyTextureToTexture3D=function(D,Q,ae,ie,ue=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=D.max.x-D.min.x+1,Ie=D.max.y-D.min.y+1,He=D.max.z-D.min.z+1,Ke=_e.convert(ie.format),qe=_e.convert(ie.type);let Ye;if(ie.isDataTexture3D)oe.setTexture3D(ie,0),Ye=32879;else if(ie.isDataTexture2DArray)oe.setTexture2DArray(ie,0),Ye=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(37440,ie.flipY),z.pixelStorei(37441,ie.premultiplyAlpha),z.pixelStorei(3317,ie.unpackAlignment);const Qe=z.getParameter(3314),At=z.getParameter(32878),xi=z.getParameter(3316),ot=z.getParameter(3315),gr=z.getParameter(32877),yt=ae.isCompressedTexture?ae.mipmaps[0]:ae.image;z.pixelStorei(3314,yt.width),z.pixelStorei(32878,yt.height),z.pixelStorei(3316,D.min.x),z.pixelStorei(3315,D.min.y),z.pixelStorei(32877,D.min.z),ae.isDataTexture||ae.isDataTexture3D?z.texSubImage3D(Ye,ue,Q.x,Q.y,Q.z,Fe,Ie,He,Ke,qe,yt.data):ae.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(Ye,ue,Q.x,Q.y,Q.z,Fe,Ie,He,Ke,yt.data)):z.texSubImage3D(Ye,ue,Q.x,Q.y,Q.z,Fe,Ie,He,Ke,qe,yt),z.pixelStorei(3314,Qe),z.pixelStorei(32878,At),z.pixelStorei(3316,xi),z.pixelStorei(3315,ot),z.pixelStorei(32877,gr),ue===0&&ie.generateMipmaps&&z.generateMipmap(Ye),de.unbindTexture()},this.initTexture=function(D){oe.setTexture2D(D,0),de.unbindTexture()},this.resetState=function(){v=0,y=0,S=null,de.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Rt.prototype.isWebGLRenderer=!0;class TD extends Rt{}TD.prototype.isWebGL1Renderer=!0;class ay extends Mt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}ay.prototype.isScene=!0;class Fa{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Fa.prototype.isInterleavedBuffer=!0;const sn=new U;class Na{constructor(e,t,n,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.applyMatrix4(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.applyNormalMatrix(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.transformDirection(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Na(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Na.prototype.isInterleavedBufferAttribute=!0;class ly extends mn{constructor(e){super();this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}ly.prototype.isSpriteMaterial=!0;let Ba;const Yl=new U,Ua=new U,za=new U,ka=new Ee,ql=new Ee,cy=new Ve,ch=new U,jl=new U,uh=new U,uy=new Ee,Rp=new Ee,hy=new Ee;class ED extends Mt{constructor(e){super();if(this.type="Sprite",Ba===void 0){Ba=new Nt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Fa(t,5);Ba.setIndex([0,1,2,0,2,3]),Ba.setAttribute("position",new Na(n,3,0,!1)),Ba.setAttribute("uv",new Na(n,2,3,!1))}this.geometry=Ba,this.material=e!==void 0?e:new ly,this.center=new Ee(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ua.setFromMatrixScale(this.matrixWorld),cy.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),za.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ua.multiplyScalar(-za.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;hh(ch.set(-.5,-.5,0),za,s,Ua,i,r),hh(jl.set(.5,-.5,0),za,s,Ua,i,r),hh(uh.set(.5,.5,0),za,s,Ua,i,r),uy.set(0,0),Rp.set(1,0),hy.set(1,1);let l=e.ray.intersectTriangle(ch,jl,uh,!1,Yl);if(l===null&&(hh(jl.set(-.5,.5,0),za,s,Ua,i,r),Rp.set(0,1),l=e.ray.intersectTriangle(ch,uh,jl,!1,Yl),l===null))return;const c=e.ray.origin.distanceTo(Yl);c<e.near||c>e.far||t.push({distance:c,point:Yl.clone(),uv:cn.getUV(Yl,ch,jl,uh,uy,Rp,hy,new Ee),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}ED.prototype.isSprite=!0;function hh(a,e,t,n,i,r){ka.subVectors(a,t).addScalar(.5).multiply(n),i!==void 0?(ql.x=r*ka.x-i*ka.y,ql.y=i*ka.x+r*ka.y):ql.copy(ka),a.copy(e),a.x+=ql.x,a.y+=ql.y,a.applyMatrix4(cy)}const fy=new U,dy=new Ft,py=new Ft,AD=new U,my=new Ve;class Cp extends Vn{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ve,this.bindMatrixInverse=new Ve}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ft,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;dy.fromBufferAttribute(i.attributes.skinIndex,e),py.fromBufferAttribute(i.attributes.skinWeight,e),fy.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const s=py.getComponent(r);if(s!==0){const l=dy.getComponent(r);my.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(AD.copy(fy).applyMatrix4(my),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}Cp.prototype.isSkinnedMesh=!0;class Pp extends Mt{constructor(){super();this.type="Bone"}}Pp.prototype.isBone=!0;class gy extends pn{constructor(e=null,t=1,n=1,i,r,s,l,c,h=dn,f=dn,d,g){super(null,s,l,c,h,f,i,r,d,g);this.image={data:e,width:t,height:n},this.magFilter=h,this.minFilter=f,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}gy.prototype.isDataTexture=!0;const _y=new Ve,LD=new Ve;class Ip{constructor(e=[],t=[]){this.uuid=Bi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ve)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ve;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const l=e[r]?e[r].matrixWorld:LD;_y.multiplyMatrices(l,t[r]),_y.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ip(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ix(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new gy(t,e,e,Pn,Fr);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const r=e.bones[n];let s=t[r];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new Pp),this.bones.push(s),this.boneInverses.push(new Ve().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const s=t[i];e.bones.push(s.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class Dp extends Zt{constructor(e,t,n,i=1){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,n);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Dp.prototype.isInstancedBufferAttribute=!0;const vy=new Ve,xy=new Ve,fh=[],Zl=new Vn;class RD extends Vn{constructor(e,t,n){super(e,t);this.instanceMatrix=new Dp(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Zl.geometry=this.geometry,Zl.material=this.material,Zl.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,vy),xy.multiplyMatrices(n,vy),Zl.matrixWorld=xy,Zl.raycast(e,fh);for(let s=0,l=fh.length;s<l;s++){const c=fh[s];c.instanceId=r,c.object=this,t.push(c)}fh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Dp(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}RD.prototype.isInstancedMesh=!0;class Ga extends mn{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ne(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ga.prototype.isLineBasicMaterial=!0;const yy=new U,wy=new U,by=new Ve,Op=new uo,dh=new co;class ph extends Mt{constructor(e=new Nt,t=new Ga){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)yy.fromBufferAttribute(t,i-1),wy.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=yy.distanceTo(wy);e.setAttribute("lineDistance",new rn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),dh.copy(n.boundingSphere),dh.applyMatrix4(i),dh.radius+=r,e.ray.intersectsSphere(dh)===!1)return;by.copy(i).invert(),Op.copy(e.ray).applyMatrix4(by);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new U,f=new U,d=new U,g=new U,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const _=n.index,b=n.attributes.position;if(_!==null){const v=Math.max(0,s.start),y=Math.min(_.count,s.start+s.count);for(let S=v,M=y-1;S<M;S+=p){const A=_.getX(S),R=_.getX(S+1);if(h.fromBufferAttribute(b,A),f.fromBufferAttribute(b,R),Op.distanceSqToSegment(h,f,g,d)>c)continue;g.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(g);N<e.near||N>e.far||t.push({distance:N,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,s.start),y=Math.min(b.count,s.start+s.count);for(let S=v,M=y-1;S<M;S+=p){if(h.fromBufferAttribute(b,S),f.fromBufferAttribute(b,S+1),Op.distanceSqToSegment(h,f,g,d)>c)continue;g.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(g);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ph.prototype.isLine=!0;const My=new U,Sy=new U;class mh extends ph{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)My.fromBufferAttribute(t,i),Sy.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+My.distanceTo(Sy);e.setAttribute("lineDistance",new rn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}mh.prototype.isLineSegments=!0;class Ty extends ph{constructor(e,t){super(e,t);this.type="LineLoop"}}Ty.prototype.isLineLoop=!0;class Fp extends mn{constructor(e){super();this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Fp.prototype.isPointsMaterial=!0;const Ey=new Ve,Np=new uo,gh=new co,_h=new U;class Ay extends Mt{constructor(e=new Nt,t=new Fp){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),gh.copy(n.boundingSphere),gh.applyMatrix4(i),gh.radius+=r,e.ray.intersectsSphere(gh)===!1)return;Ey.copy(i).invert(),Np.copy(e.ray).applyMatrix4(Ey);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l;if(n.isBufferGeometry){const h=n.index,d=n.attributes.position;if(h!==null){const g=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let _=g,x=p;_<x;_++){const b=h.getX(_);_h.fromBufferAttribute(d,b),Ly(_h,b,c,i,e,t,this)}}else{const g=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let _=g,x=p;_<x;_++)_h.fromBufferAttribute(d,_),Ly(_h,_,c,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ay.prototype.isPoints=!0;function Ly(a,e,t,n,i,r,s){const l=Np.distanceSqToPoint(a);if(l<t){const c=new U;Np.closestPointToPoint(a,c),c.applyMatrix4(n);const h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;r.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:s})}}class CD extends pn{constructor(e,t,n,i,r,s,l,c,h){super(e,t,n,i,r,s,l,c,h);this.format=l!==void 0?l:ro,this.minFilter=s!==void 0?s:ri,this.magFilter=r!==void 0?r:ri,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}CD.prototype.isVideoTexture=!0;class PD extends pn{constructor(e,t,n,i,r,s,l,c,h,f,d,g){super(null,s,l,c,h,f,i,r,d,g);this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}PD.prototype.isCompressedTexture=!0;class ID extends pn{constructor(e,t,n,i,r,s,l,c,h){super(e,t,n,i,r,s,l,c,h);this.needsUpdate=!0}}ID.prototype.isCanvasTexture=!0;class DD extends pn{constructor(e,t,n,i,r,s,l,c,h,f){if(f=f!==void 0?f:ha,f!==ha&&f!==Dl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===ha&&(n=Ou),n===void 0&&f===Dl&&(n=Il);super(null,i,r,s,l,c,f,n,h);this.image={width:e,height:t},this.magFilter=l!==void 0?l:dn,this.minFilter=c!==void 0?c:dn,this.flipY=!1,this.generateMipmaps=!1}}DD.prototype.isDepthTexture=!0;new U;new U;new U;new cn;class ki{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;t?s=t:s=e*n[r-1];let l=0,c=r-1,h;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),h=n[i]-s,h<0)l=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,n[i]===s)return i/(r-1);const f=n[i],g=n[i+1]-f,p=(s-f)/g;return(i+p)/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),l=this.getPoint(r),c=t||(s.isVector2?new Ee:new U);return c.copy(l).sub(s).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new U,i=[],r=[],s=[],l=new U,c=new Ve;for(let p=0;p<=e;p++){const _=p/e;i[p]=this.getTangentAt(_,new U)}r[0]=new U,s[0]=new U;let h=Number.MAX_VALUE;const f=Math.abs(i[0].x),d=Math.abs(i[0].y),g=Math.abs(i[0].z);f<=h&&(h=f,n.set(1,0,0)),d<=h&&(h=d,n.set(0,1,0)),g<=h&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],l),s[0].crossVectors(i[0],r[0]);for(let p=1;p<=e;p++){if(r[p]=r[p-1].clone(),s[p]=s[p-1].clone(),l.crossVectors(i[p-1],i[p]),l.length()>Number.EPSILON){l.normalize();const _=Math.acos(si(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(c.makeRotationAxis(l,_))}s[p].crossVectors(i[p],r[p])}if(t===!0){let p=Math.acos(si(r[0].dot(r[e]),-1,1));p/=e,i[0].dot(l.crossVectors(r[0],r[e]))>0&&(p=-p);for(let _=1;_<=e;_++)r[_].applyMatrix4(c.makeRotationAxis(i[_],p*_)),s[_].crossVectors(i[_],r[_])}return{tangents:i,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vh extends ki{constructor(e=0,t=0,n=1,i=1,r=0,s=Math.PI*2,l=!1,c=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const n=t||new Ee,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);const l=this.aStartAngle+e*r;let c=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),g=c-this.aX,p=h-this.aY;c=g*f-p*d+this.aX,h=g*d+p*f+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}vh.prototype.isEllipseCurve=!0;class Ry extends vh{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s);this.type="ArcCurve"}}Ry.prototype.isArcCurve=!0;function Bp(){let a=0,e=0,t=0,n=0;function i(r,s,l,c){a=r,e=l,t=-3*r+3*s-2*l-c,n=2*r-2*s+l+c}return{initCatmullRom:function(r,s,l,c,h){i(s,l,h*(l-r),h*(c-s))},initNonuniformCatmullRom:function(r,s,l,c,h,f,d){let g=(s-r)/h-(l-r)/(h+f)+(l-s)/f,p=(l-s)/f-(c-s)/(f+d)+(c-l)/d;g*=f,p*=f,i(s,l,g,p)},calc:function(r){const s=r*r,l=s*r;return a+e*r+t*s+n*l}}}const xh=new U,Up=new Bp,zp=new Bp,kp=new Bp;class Cy extends ki{constructor(e=[],t=!1,n="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new U){const n=t,i=this.points,r=i.length,s=(r-(this.closed?0:1))*e;let l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:c===0&&l===r-1&&(l=r-2,c=1);let h,f;this.closed||l>0?h=i[(l-1)%r]:(xh.subVectors(i[0],i[1]).add(i[0]),h=xh);const d=i[l%r],g=i[(l+1)%r];if(this.closed||l+2<r?f=i[(l+2)%r]:(xh.subVectors(i[r-1],i[r-2]).add(i[r-1]),f=xh),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let _=Math.pow(h.distanceToSquared(d),p),x=Math.pow(d.distanceToSquared(g),p),b=Math.pow(g.distanceToSquared(f),p);x<1e-4&&(x=1),_<1e-4&&(_=x),b<1e-4&&(b=x),Up.initNonuniformCatmullRom(h.x,d.x,g.x,f.x,_,x,b),zp.initNonuniformCatmullRom(h.y,d.y,g.y,f.y,_,x,b),kp.initNonuniformCatmullRom(h.z,d.z,g.z,f.z,_,x,b)}else this.curveType==="catmullrom"&&(Up.initCatmullRom(h.x,d.x,g.x,f.x,this.tension),zp.initCatmullRom(h.y,d.y,g.y,f.y,this.tension),kp.initCatmullRom(h.z,d.z,g.z,f.z,this.tension));return n.set(Up.calc(c),zp.calc(c),kp.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new U().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Cy.prototype.isCatmullRomCurve3=!0;function Py(a,e,t,n,i){const r=(n-e)*.5,s=(i-t)*.5,l=a*a,c=a*l;return(2*t-2*n+r+s)*c+(-3*t+3*n-2*r-s)*l+r*a+t}function OD(a,e){const t=1-a;return t*t*e}function FD(a,e){return 2*(1-a)*a*e}function ND(a,e){return a*a*e}function Jl(a,e,t,n){return OD(a,e)+FD(a,t)+ND(a,n)}function BD(a,e){const t=1-a;return t*t*t*e}function UD(a,e){const t=1-a;return 3*t*t*a*e}function zD(a,e){return 3*(1-a)*a*a*e}function kD(a,e){return a*a*a*e}function Kl(a,e,t,n,i){return BD(a,e)+UD(a,t)+zD(a,n)+kD(a,i)}class Gp extends ki{constructor(e=new Ee,t=new Ee,n=new Ee,i=new Ee){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ee){const n=t,i=this.v0,r=this.v1,s=this.v2,l=this.v3;return n.set(Kl(e,i.x,r.x,s.x,l.x),Kl(e,i.y,r.y,s.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Gp.prototype.isCubicBezierCurve=!0;class Iy extends ki{constructor(e=new U,t=new U,n=new U,i=new U){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new U){const n=t,i=this.v0,r=this.v1,s=this.v2,l=this.v3;return n.set(Kl(e,i.x,r.x,s.x,l.x),Kl(e,i.y,r.y,s.y,l.y),Kl(e,i.z,r.z,s.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Iy.prototype.isCubicBezierCurve3=!0;class yh extends ki{constructor(e=new Ee,t=new Ee){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Ee;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}yh.prototype.isLineCurve=!0;class GD extends ki{constructor(e=new U,t=new U){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new U){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hp extends ki{constructor(e=new Ee,t=new Ee,n=new Ee){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ee){const n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(Jl(e,i.x,r.x,s.x),Jl(e,i.y,r.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Hp.prototype.isQuadraticBezierCurve=!0;class Dy extends ki{constructor(e=new U,t=new U,n=new U){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new U){const n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(Jl(e,i.x,r.x,s.x),Jl(e,i.y,r.y,s.y),Jl(e,i.z,r.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Dy.prototype.isQuadraticBezierCurve3=!0;class Vp extends ki{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new Ee){const n=t,i=this.points,r=(i.length-1)*e,s=Math.floor(r),l=r-s,c=i[s===0?s:s-1],h=i[s],f=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return n.set(Py(l,c.x,h.x,f.x,d.x),Py(l,c.y,h.y,f.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ee().fromArray(i))}return this}}Vp.prototype.isSplineCurve=!0;var Oy=Object.freeze({__proto__:null,ArcCurve:Ry,CatmullRomCurve3:Cy,CubicBezierCurve:Gp,CubicBezierCurve3:Iy,EllipseCurve:vh,LineCurve:yh,LineCurve3:GD,QuadraticBezierCurve:Hp,QuadraticBezierCurve3:Dy,SplineCurve:Vp});class HD extends ki{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new yh(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const s=i[r]-n,l=this.curves[r],c=l.getLength(),h=c===0?0:1-s/c;return l.getPointAt(h,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],l=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,c=s.getPoints(l);for(let h=0;h<c.length;h++){const f=c[h];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Oy[i.type]().fromJSON(i))}return this}}class Wp extends HD{constructor(e){super();this.type="Path",this.currentPoint=new Ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new yh(this.currentPoint.clone(),new Ee(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Hp(this.currentPoint.clone(),new Ee(e,t),new Ee(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){const l=new Gp(this.currentPoint.clone(),new Ee(e,t),new Ee(n,i),new Ee(r,s));return this.curves.push(l),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Vp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,l,c){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,n,i,r,s,l,c),this}absellipse(e,t,n,i,r,s,l,c){const h=new vh(e,t,n,i,r,s,l,c);if(this.curves.length>0){const d=h.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $l extends Wp{constructor(e){super(e);this.uuid=Bi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Wp().fromJSON(i))}return this}}const VD={triangulate:function(a,e,t=2){const n=e&&e.length,i=n?e[0]*t:a.length;let r=Fy(a,0,i,t,!0);const s=[];if(!r||r.next===r.prev)return s;let l,c,h,f,d,g,p;if(n&&(r=jD(a,e,r,t)),a.length>80*t){l=h=a[0],c=f=a[1];for(let _=t;_<i;_+=t)d=a[_],g=a[_+1],d<l&&(l=d),g<c&&(c=g),d>h&&(h=d),g>f&&(f=g);p=Math.max(h-l,f-c),p=p!==0?1/p:0}return Ql(r,s,t,l,c,p),s}};function Fy(a,e,t,n,i){let r,s;if(i===sO(a,e,t,n)>0)for(r=e;r<t;r+=n)s=Uy(r,a[r],a[r+1],s);else for(r=t-n;r>=e;r-=n)s=Uy(r,a[r],a[r+1],s);return s&&wh(s,s.next)&&(tc(s),s=s.next),s}function Rs(a,e){if(!a)return a;e||(e=a);let t=a,n;do if(n=!1,!t.steiner&&(wh(t,t.next)||Jt(t.prev,t,t.next)===0)){if(tc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Ql(a,e,t,n,i,r,s){if(!a)return;!s&&r&&QD(a,n,i,r);let l=a,c,h;for(;a.prev!==a.next;){if(c=a.prev,h=a.next,r?XD(a,n,i,r):WD(a)){e.push(c.i/t),e.push(a.i/t),e.push(h.i/t),tc(a),a=h.next,l=h.next;continue}if(a=h,a===l){s?s===1?(a=YD(Rs(a),e,t),Ql(a,e,t,n,i,r,2)):s===2&&qD(a,e,t,n,i,r):Ql(Rs(a),e,t,n,i,r,1);break}}}function WD(a){const e=a.prev,t=a,n=a.next;if(Jt(e,t,n)>=0)return!1;let i=a.next.next;for(;i!==a.prev;){if(Ha(e.x,e.y,t.x,t.y,n.x,n.y,i.x,i.y)&&Jt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function XD(a,e,t,n){const i=a.prev,r=a,s=a.next;if(Jt(i,r,s)>=0)return!1;const l=i.x<r.x?i.x<s.x?i.x:s.x:r.x<s.x?r.x:s.x,c=i.y<r.y?i.y<s.y?i.y:s.y:r.y<s.y?r.y:s.y,h=i.x>r.x?i.x>s.x?i.x:s.x:r.x>s.x?r.x:s.x,f=i.y>r.y?i.y>s.y?i.y:s.y:r.y>s.y?r.y:s.y,d=Xp(l,c,e,t,n),g=Xp(h,f,e,t,n);let p=a.prevZ,_=a.nextZ;for(;p&&p.z>=d&&_&&_.z<=g;){if(p!==a.prev&&p!==a.next&&Ha(i.x,i.y,r.x,r.y,s.x,s.y,p.x,p.y)&&Jt(p.prev,p,p.next)>=0||(p=p.prevZ,_!==a.prev&&_!==a.next&&Ha(i.x,i.y,r.x,r.y,s.x,s.y,_.x,_.y)&&Jt(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;p&&p.z>=d;){if(p!==a.prev&&p!==a.next&&Ha(i.x,i.y,r.x,r.y,s.x,s.y,p.x,p.y)&&Jt(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;_&&_.z<=g;){if(_!==a.prev&&_!==a.next&&Ha(i.x,i.y,r.x,r.y,s.x,s.y,_.x,_.y)&&Jt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function YD(a,e,t){let n=a;do{const i=n.prev,r=n.next.next;!wh(i,r)&&Ny(i,n,n.next,r)&&ec(i,r)&&ec(r,i)&&(e.push(i.i/t),e.push(n.i/t),e.push(r.i/t),tc(n),tc(n.next),n=a=r),n=n.next}while(n!==a);return Rs(n)}function qD(a,e,t,n,i,r){let s=a;do{let l=s.next.next;for(;l!==s.prev;){if(s.i!==l.i&&nO(s,l)){let c=By(s,l);s=Rs(s,s.next),c=Rs(c,c.next),Ql(s,e,t,n,i,r),Ql(c,e,t,n,i,r);return}l=l.next}s=s.next}while(s!==a)}function jD(a,e,t,n){const i=[];let r,s,l,c,h;for(r=0,s=e.length;r<s;r++)l=e[r]*n,c=r<s-1?e[r+1]*n:a.length,h=Fy(a,l,c,n,!1),h===h.next&&(h.steiner=!0),i.push(tO(h));for(i.sort(ZD),r=0;r<i.length;r++)JD(i[r],t),t=Rs(t,t.next);return t}function ZD(a,e){return a.x-e.x}function JD(a,e){if(e=KD(a,e),e){const t=By(e,a);Rs(e,e.next),Rs(t,t.next)}}function KD(a,e){let t=e;const n=a.x,i=a.y;let r=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const g=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>r){if(r=g,g===n){if(i===t.y)return t;if(i===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(n===r)return s;const l=s,c=s.x,h=s.y;let f=1/0,d;t=s;do n>=t.x&&t.x>=c&&n!==t.x&&Ha(i<h?n:r,i,c,h,i<h?r:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),ec(t,a)&&(d<f||d===f&&(t.x>s.x||t.x===s.x&&$D(s,t)))&&(s=t,f=d)),t=t.next;while(t!==l);return s}function $D(a,e){return Jt(a.prev,a,e.prev)<0&&Jt(e.next,a,a.next)<0}function QD(a,e,t,n){let i=a;do i.z===null&&(i.z=Xp(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==a);i.prevZ.nextZ=null,i.prevZ=null,eO(i)}function eO(a){let e,t,n,i,r,s,l,c,h=1;do{for(t=a,a=null,r=null,s=0;t;){for(s++,n=t,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(c=h;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,c--),r?r.nextZ=i:a=i,i.prevZ=r,r=i;t=n}r.nextZ=null,h*=2}while(s>1);return a}function Xp(a,e,t,n,i){return a=32767*(a-t)*i,e=32767*(e-n)*i,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function tO(a){let e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function Ha(a,e,t,n,i,r,s,l){return(i-s)*(e-l)-(a-s)*(r-l)>=0&&(a-s)*(n-l)-(t-s)*(e-l)>=0&&(t-s)*(r-l)-(i-s)*(n-l)>=0}function nO(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!iO(a,e)&&(ec(a,e)&&ec(e,a)&&rO(a,e)&&(Jt(a.prev,a,e.prev)||Jt(a,e.prev,e))||wh(a,e)&&Jt(a.prev,a,a.next)>0&&Jt(e.prev,e,e.next)>0)}function Jt(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function wh(a,e){return a.x===e.x&&a.y===e.y}function Ny(a,e,t,n){const i=Mh(Jt(a,e,t)),r=Mh(Jt(a,e,n)),s=Mh(Jt(t,n,a)),l=Mh(Jt(t,n,e));return!!(i!==r&&s!==l||i===0&&bh(a,t,e)||r===0&&bh(a,n,e)||s===0&&bh(t,a,n)||l===0&&bh(t,e,n))}function bh(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function Mh(a){return a>0?1:a<0?-1:0}function iO(a,e){let t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&Ny(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function ec(a,e){return Jt(a.prev,a,a.next)<0?Jt(a,e,a.next)>=0&&Jt(a,a.prev,e)>=0:Jt(a,e,a.prev)<0||Jt(a,a.next,e)<0}function rO(a,e){let t=a,n=!1;const i=(a.x+e.x)/2,r=(a.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&i<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==a);return n}function By(a,e){const t=new Yp(a.i,a.x,a.y),n=new Yp(e.i,e.x,e.y),i=a.next,r=e.prev;return a.next=e,e.prev=a,t.next=i,i.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function Uy(a,e,t,n){const i=new Yp(a,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function tc(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Yp(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sO(a,e,t,n){let i=0;for(let r=e,s=t-n;r<t;r+=n)i+=(a[s]-a[r])*(a[r+1]+a[s+1]),s=r;return i}class Cs{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5}static isClockWise(e){return Cs.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];zy(e),ky(n,e);let s=e.length;t.forEach(zy);for(let c=0;c<t.length;c++)i.push(s),s+=t[c].length,ky(n,t[c]);const l=VD.triangulate(n,i);for(let c=0;c<l.length;c+=3)r.push(l.slice(c,c+3));return r}}function zy(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function ky(a,e){for(let t=0;t<e.length;t++)a.push(e[t].x),a.push(e[t].y)}class Va extends Nt{constructor(e=new $l([new Ee(.5,.5),new Ee(-.5,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];s(h)}this.setAttribute("position",new rn(i,3)),this.setAttribute("uv",new rn(r,2)),this.computeVertexNormals();function s(l){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1;let d=t.depth!==void 0?t.depth:1,g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:p-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:oO;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let S,M=!1,A,R,T,N;v&&(S=v.getSpacedPoints(f),M=!0,g=!1,A=v.computeFrenetFrames(f,!1),R=new U,T=new U,N=new U),g||(b=0,p=0,_=0,x=0);const X=l.extractPoints(h);let H=X.shape;const O=X.holes;if(!Cs.isClockWise(H)){H=H.reverse();for(let Z=0,oe=O.length;Z<oe;Z++){const ce=O[Z];Cs.isClockWise(ce)&&(O[Z]=ce.reverse())}}const V=Cs.triangulateShape(H,O),Y=H;for(let Z=0,oe=O.length;Z<oe;Z++){const ce=O[Z];H=H.concat(ce)}function $(Z,oe,ce){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().multiplyScalar(ce).add(Z)}const W=H.length,ee=V.length;function re(Z,oe,ce){let Se,xe,I;const P=Z.x-oe.x,le=Z.y-oe.y,ye=ce.x-Z.x,we=ce.y-Z.y,Ae=P*P+le*le,We=P*we-le*ye;if(Math.abs(We)>Number.EPSILON){const ke=Math.sqrt(Ae),Xe=Math.sqrt(ye*ye+we*we),Be=oe.x-le/ke,q=oe.y+P/ke,Re=ce.x-we/Xe,_e=ce.y+ye/Xe,Ue=((Re-Be)*we-(_e-q)*ye)/(P*we-le*ye);Se=Be+P*Ue-Z.x,xe=q+le*Ue-Z.y;const Oe=Se*Se+xe*xe;if(Oe<=2)return new Ee(Se,xe);I=Math.sqrt(Oe/2)}else{let ke=!1;P>Number.EPSILON?ye>Number.EPSILON&&(ke=!0):P<-Number.EPSILON?ye<-Number.EPSILON&&(ke=!0):Math.sign(le)===Math.sign(we)&&(ke=!0),ke?(Se=-le,xe=P,I=Math.sqrt(Ae)):(Se=P,xe=le,I=Math.sqrt(Ae/2))}return new Ee(Se/I,xe/I)}const Le=[];for(let Z=0,oe=Y.length,ce=oe-1,Se=Z+1;Z<oe;Z++,ce++,Se++)ce===oe&&(ce=0),Se===oe&&(Se=0),Le[Z]=re(Y[Z],Y[ce],Y[Se]);const J=[];let ve,ze=Le.concat();for(let Z=0,oe=O.length;Z<oe;Z++){const ce=O[Z];ve=[];for(let Se=0,xe=ce.length,I=xe-1,P=Se+1;Se<xe;Se++,I++,P++)I===xe&&(I=0),P===xe&&(P=0),ve[Se]=re(ce[Se],ce[I],ce[P]);J.push(ve),ze=ze.concat(ve)}for(let Z=0;Z<b;Z++){const oe=Z/b,ce=p*Math.cos(oe*Math.PI/2),Se=_*Math.sin(oe*Math.PI/2)+x;for(let xe=0,I=Y.length;xe<I;xe++){const P=$(Y[xe],Le[xe],Se);F(P.x,P.y,-ce)}for(let xe=0,I=O.length;xe<I;xe++){const P=O[xe];ve=J[xe];for(let le=0,ye=P.length;le<ye;le++){const we=$(P[le],ve[le],Se);F(we.x,we.y,-ce)}}}const fe=_+x;for(let Z=0;Z<W;Z++){const oe=g?$(H[Z],ze[Z],fe):H[Z];M?(T.copy(A.normals[0]).multiplyScalar(oe.x),R.copy(A.binormals[0]).multiplyScalar(oe.y),N.copy(S[0]).add(T).add(R),F(N.x,N.y,N.z)):F(oe.x,oe.y,0)}for(let Z=1;Z<=f;Z++)for(let oe=0;oe<W;oe++){const ce=g?$(H[oe],ze[oe],fe):H[oe];M?(T.copy(A.normals[Z]).multiplyScalar(ce.x),R.copy(A.binormals[Z]).multiplyScalar(ce.y),N.copy(S[Z]).add(T).add(R),F(N.x,N.y,N.z)):F(ce.x,ce.y,d/f*Z)}for(let Z=b-1;Z>=0;Z--){const oe=Z/b,ce=p*Math.cos(oe*Math.PI/2),Se=_*Math.sin(oe*Math.PI/2)+x;for(let xe=0,I=Y.length;xe<I;xe++){const P=$(Y[xe],Le[xe],Se);F(P.x,P.y,d+ce)}for(let xe=0,I=O.length;xe<I;xe++){const P=O[xe];ve=J[xe];for(let le=0,ye=P.length;le<ye;le++){const we=$(P[le],ve[le],Se);M?F(we.x,we.y+S[f-1].y,S[f-1].x+ce):F(we.x,we.y,d+ce)}}}Me(),Te();function Me(){const Z=i.length/3;if(g){let oe=0,ce=W*oe;for(let Se=0;Se<ee;Se++){const xe=V[Se];k(xe[2]+ce,xe[1]+ce,xe[0]+ce)}oe=f+b*2,ce=W*oe;for(let Se=0;Se<ee;Se++){const xe=V[Se];k(xe[0]+ce,xe[1]+ce,xe[2]+ce)}}else{for(let oe=0;oe<ee;oe++){const ce=V[oe];k(ce[2],ce[1],ce[0])}for(let oe=0;oe<ee;oe++){const ce=V[oe];k(ce[0]+W*f,ce[1]+W*f,ce[2]+W*f)}}n.addGroup(Z,i.length/3-Z,0)}function Te(){const Z=i.length/3;let oe=0;z(Y,oe),oe+=Y.length;for(let ce=0,Se=O.length;ce<Se;ce++){const xe=O[ce];z(xe,oe),oe+=xe.length}n.addGroup(Z,i.length/3-Z,1)}function z(Z,oe){let ce=Z.length;for(;--ce>=0;){const Se=ce;let xe=ce-1;xe<0&&(xe=Z.length-1);for(let I=0,P=f+b*2;I<P;I++){const le=W*I,ye=W*(I+1),we=oe+Se+le,Ae=oe+xe+le,We=oe+xe+ye,ke=oe+Se+ye;ne(we,Ae,We,ke)}}}function F(Z,oe,ce){c.push(Z),c.push(oe),c.push(ce)}function k(Z,oe,ce){de(Z),de(oe),de(ce);const Se=i.length/3,xe=y.generateTopUV(n,i,Se-3,Se-2,Se-1);ge(xe[0]),ge(xe[1]),ge(xe[2])}function ne(Z,oe,ce,Se){de(Z),de(oe),de(Se),de(oe),de(ce),de(Se);const xe=i.length/3,I=y.generateSideWallUV(n,i,xe-6,xe-3,xe-2,xe-1);ge(I[0]),ge(I[1]),ge(I[3]),ge(I[1]),ge(I[2]),ge(I[3])}function de(Z){i.push(c[Z*3+0]),i.push(c[Z*3+1]),i.push(c[Z*3+2])}function ge(Z){r.push(Z.x),r.push(Z.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return aO(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const l=t[e.shapes[r]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Oy[i.type]().fromJSON(i)),new Va(n,e.options)}}const oO={generateTopUV:function(a,e,t,n,i){const r=e[t*3],s=e[t*3+1],l=e[n*3],c=e[n*3+1],h=e[i*3],f=e[i*3+1];return[new Ee(r,s),new Ee(l,c),new Ee(h,f)]},generateSideWallUV:function(a,e,t,n,i,r){const s=e[t*3],l=e[t*3+1],c=e[t*3+2],h=e[n*3],f=e[n*3+1],d=e[n*3+2],g=e[i*3],p=e[i*3+1],_=e[i*3+2],x=e[r*3],b=e[r*3+1],v=e[r*3+2];return Math.abs(l-f)<Math.abs(s-h)?[new Ee(s,1-c),new Ee(h,1-d),new Ee(g,1-_),new Ee(x,1-v)]:[new Ee(l,1-c),new Ee(f,1-d),new Ee(p,1-_),new Ee(b,1-v)]}};function aO(a,e,t){if(t.shapes=[],Array.isArray(a))for(let n=0,i=a.length;n<i;n++){const r=a[n];t.shapes.push(r.uuid)}else t.shapes.push(a.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class qp extends Nt{constructor(e=new $l([new Ee(0,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],s=[];let l=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(l,c,f),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new rn(i,3)),this.setAttribute("normal",new rn(r,3)),this.setAttribute("uv",new rn(s,2));function h(f){const d=i.length/3,g=f.extractPoints(t);let p=g.shape;const _=g.holes;Cs.isClockWise(p)===!1&&(p=p.reverse());for(let b=0,v=_.length;b<v;b++){const y=_[b];Cs.isClockWise(y)===!0&&(_[b]=y.reverse())}const x=Cs.triangulateShape(p,_);for(let b=0,v=_.length;b<v;b++){const y=_[b];p=p.concat(y)}for(let b=0,v=p.length;b<v;b++){const y=p[b];i.push(y.x,y.y,0),r.push(0,0,1),s.push(y.x,y.y)}for(let b=0,v=x.length;b<v;b++){const y=x[b],S=y[0]+d,M=y[1]+d,A=y[2]+d;n.push(S,M,A),c+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return lO(t,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const s=t[e.shapes[i]];n.push(s)}return new qp(n,e.curveSegments)}}function lO(a,e){if(e.shapes=[],Array.isArray(a))for(let t=0,n=a.length;t<n;t++){const i=a[t];e.shapes.push(i.uuid)}else e.shapes.push(a.uuid);return e}class Gy extends Nt{constructor(e=1,t=32,n=16,i=0,r=Math.PI*2,s=0,l=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(s+l,Math.PI);let h=0;const f=[],d=new U,g=new U,p=[],_=[],x=[],b=[];for(let v=0;v<=n;v++){const y=[],S=v/n;let M=0;v==0&&s==0?M=.5/t:v==n&&c==Math.PI&&(M=-.5/t);for(let A=0;A<=t;A++){const R=A/t;d.x=-e*Math.cos(i+R*r)*Math.sin(s+S*l),d.y=e*Math.cos(s+S*l),d.z=e*Math.sin(i+R*r)*Math.sin(s+S*l),_.push(d.x,d.y,d.z),g.copy(d).normalize(),x.push(g.x,g.y,g.z),b.push(R+M,1-S),y.push(h++)}f.push(y)}for(let v=0;v<n;v++)for(let y=0;y<t;y++){const S=f[v][y+1],M=f[v][y],A=f[v+1][y],R=f[v+1][y+1];(v!==0||s>0)&&p.push(S,M,R),(v!==n-1||c<Math.PI)&&p.push(M,A,R)}this.setIndex(p),this.setAttribute("position",new rn(_,3)),this.setAttribute("normal",new rn(x,3)),this.setAttribute("uv",new rn(b,2))}static fromJSON(e){return new Gy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cO extends mn{constructor(e){super();this.type="ShadowMaterial",this.color=new Ne(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}cO.prototype.isShadowMaterial=!0;class nc extends mn{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}nc.prototype.isMeshStandardMaterial=!0;class mo extends nc{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return si(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}mo.prototype.isMeshPhysicalMaterial=!0;class uO extends mn{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}uO.prototype.isMeshPhongMaterial=!0;class hO extends mn{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ne(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}hO.prototype.isMeshToonMaterial=!0;class fO extends mn{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}fO.prototype.isMeshNormalMaterial=!0;class dO extends mn{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}dO.prototype.isMeshLambertMaterial=!0;class pO extends mn{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ne(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}pO.prototype.isMeshMatcapMaterial=!0;class mO extends Ga{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}mO.prototype.isLineDashedMaterial=!0;const Yt={arraySlice:function(a,e,t){return Yt.isTypedArray(a)?new a.constructor(a.subarray(e,t!==void 0?t:a.length)):a.slice(e,t)},convertArray:function(a,e,t){return!a||!t&&a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){function e(i,r){return a[i]-a[r]}const t=a.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n},sortedArray:function(a,e,t){const n=a.length,i=new a.constructor(n);for(let r=0,s=0;s!==n;++r){const l=t[r]*e;for(let c=0;c!==e;++c)i[s++]=a[l+c]}return i},flattenJSON:function(a,e,t,n){let i=1,r=a[0];for(;r!==void 0&&r[n]===void 0;)r=a[i++];if(r===void 0)return;let s=r[n];if(s!==void 0)if(Array.isArray(s))do s=r[n],s!==void 0&&(e.push(r.time),t.push.apply(t,s)),r=a[i++];while(r!==void 0);else if(s.toArray!==void 0)do s=r[n],s!==void 0&&(e.push(r.time),s.toArray(t,t.length)),r=a[i++];while(r!==void 0);else do s=r[n],s!==void 0&&(e.push(r.time),t.push(s)),r=a[i++];while(r!==void 0)},subclip:function(a,e,t,n,i=30){const r=a.clone();r.name=e;const s=[];for(let c=0;c<r.tracks.length;++c){const h=r.tracks[c],f=h.getValueSize(),d=[],g=[];for(let p=0;p<h.times.length;++p){const _=h.times[p]*i;if(!(_<t||_>=n)){d.push(h.times[p]);for(let x=0;x<f;++x)g.push(h.values[p*f+x])}}d.length!==0&&(h.times=Yt.convertArray(d,h.times.constructor),h.values=Yt.convertArray(g,h.values.constructor),s.push(h))}r.tracks=s;let l=1/0;for(let c=0;c<r.tracks.length;++c)l>r.tracks[c].times[0]&&(l=r.tracks[c].times[0]);for(let c=0;c<r.tracks.length;++c)r.tracks[c].shift(-1*l);return r.resetDuration(),r},makeClipAdditive:function(a,e=0,t=a,n=30){n<=0&&(n=30);const i=t.tracks.length,r=e/n;for(let s=0;s<i;++s){const l=t.tracks[s],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const h=a.tracks.find(function(v){return v.name===l.name&&v.ValueTypeName===c});if(h===void 0)continue;let f=0;const d=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let g=0;const p=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=p/3);const _=l.times.length-1;let x;if(r<=l.times[0]){const v=f,y=d-f;x=Yt.arraySlice(l.values,v,y)}else if(r>=l.times[_]){const v=_*d+f,y=v+d-f;x=Yt.arraySlice(l.values,v,y)}else{const v=l.createInterpolant(),y=f,S=d-f;v.evaluate(r),x=Yt.arraySlice(v.resultBuffer,y,S)}c==="quaternion"&&new Hn().fromArray(x).normalize().conjugate().toArray(x);const b=h.times.length;for(let v=0;v<b;++v){const y=v*p+g;if(c==="quaternion")Hn.multiplyQuaternionsFlat(h.values,y,x,0,h.values,y);else{const S=p-g*2;for(let M=0;M<S;++M)h.values[y+M]-=x[M]}}}return a.blendMode=Kv,a}};class Hr{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===l)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=r)){const l=t[1];e<l&&(n=2,r=l);for(let c=n-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===c)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0;break n}break e}for(;n<s;){const l=n+s>>>1;e<t[l]?s=l:n=l+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Hr.prototype.beforeStart_=Hr.prototype.copySampleValue_;Hr.prototype.afterEnd_=Hr.prototype.copySampleValue_;class gO extends Hr{constructor(e,t,n,i){super(e,t,n,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:da,endingEnd:da}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,l=i[r],c=i[s];if(l===void 0)switch(this.getSettings_().endingStart){case pa:r=e,l=2*t-n;break;case Nu:r=i.length-2,l=t+i[r]-i[r+1];break;default:r=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case pa:s=e,c=2*n-t;break;case Nu:s=1,c=n+i[1]-i[0];break;default:s=e-1,c=t}const h=(n-t)*.5,f=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(c-n),this._offsetPrev=r*f,this._offsetNext=s*f}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,f=this._offsetPrev,d=this._offsetNext,g=this._weightPrev,p=this._weightNext,_=(n-t)/(i-t),x=_*_,b=x*_,v=-g*b+2*g*x-g*_,y=(1+g)*b+(-1.5-2*g)*x+(-.5+g)*_+1,S=(-1-p)*b+(1.5+p)*x+.5*_,M=p*b-p*x;for(let A=0;A!==l;++A)r[A]=v*s[f+A]+y*s[h+A]+S*s[c+A]+M*s[d+A];return r}}class Hy extends Hr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,f=(n-t)/(i-t),d=1-f;for(let g=0;g!==l;++g)r[g]=s[h+g]*d+s[c+g]*f;return r}}class _O extends Hr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class hr{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Yt.convertArray(t,this.TimeBufferType),this.values=Yt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Yt.convertArray(e.times,Array),values:Yt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new _O(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Hy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ol:t=this.InterpolantFactoryMethodDiscrete;break;case fa:t=this.InterpolantFactoryMethodLinear;break;case Hd:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ol;case this.InterpolantFactoryMethodLinear:return fa;case this.InterpolantFactoryMethodSmooth:return Hd}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;s!==-1&&n[s]>t;)--s;if(++s,r!==0||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const l=this.getValueSize();this.times=Yt.arraySlice(n,r,s),this.values=Yt.arraySlice(this.values,r*l,s*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let l=0;l!==r;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,s),e=!1;break}s=c}if(i!==void 0&&Yt.isTypedArray(i))for(let l=0,c=i.length;l!==c;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=Yt.arraySlice(this.times),t=Yt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Hd,r=e.length-1;let s=1;for(let l=1;l<r;++l){let c=!1;const h=e[l],f=e[l+1];if(h!==f&&(l!==1||h!==e[0]))if(i)c=!0;else{const d=l*n,g=d-n,p=d+n;for(let _=0;_!==n;++_){const x=t[d+_];if(x!==t[g+_]||x!==t[p+_]){c=!0;break}}}if(c){if(l!==s){e[s]=e[l];const d=l*n,g=s*n;for(let p=0;p!==n;++p)t[g+p]=t[d+p]}++s}}if(r>0){e[s]=e[r];for(let l=r*n,c=s*n,h=0;h!==n;++h)t[c+h]=t[l+h];++s}return s!==e.length?(this.times=Yt.arraySlice(e,0,s),this.values=Yt.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=Yt.arraySlice(this.times,0),t=Yt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}hr.prototype.TimeBufferType=Float32Array;hr.prototype.ValueBufferType=Float32Array;hr.prototype.DefaultInterpolation=fa;class Wa extends hr{}Wa.prototype.ValueTypeName="bool";Wa.prototype.ValueBufferType=Array;Wa.prototype.DefaultInterpolation=Ol;Wa.prototype.InterpolantFactoryMethodLinear=void 0;Wa.prototype.InterpolantFactoryMethodSmooth=void 0;class Vy extends hr{}Vy.prototype.ValueTypeName="color";class ic extends hr{}ic.prototype.ValueTypeName="number";class vO extends Hr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,l=this.valueSize,c=(n-t)/(i-t);let h=e*l;for(let f=h+l;h!==f;h+=4)Hn.slerpFlat(r,0,s,h-l,s,h,c);return r}}class go extends hr{InterpolantFactoryMethodLinear(e){return new vO(this.times,this.values,this.getValueSize(),e)}}go.prototype.ValueTypeName="quaternion";go.prototype.DefaultInterpolation=fa;go.prototype.InterpolantFactoryMethodSmooth=void 0;class Xa extends hr{}Xa.prototype.ValueTypeName="string";Xa.prototype.ValueBufferType=Array;Xa.prototype.DefaultInterpolation=Ol;Xa.prototype.InterpolantFactoryMethodLinear=void 0;Xa.prototype.InterpolantFactoryMethodSmooth=void 0;class rc extends hr{}rc.prototype.ValueTypeName="vector";class jp{constructor(e,t=-1,n,i=Vd){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Bi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,l=n.length;s!==l;++s)t.push(yO(n[s]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(hr.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,s=[];for(let l=0;l<r;l++){let c=[],h=[];c.push((l+r-1)%r,l,(l+1)%r),h.push(0,1,0);const f=Yt.getKeyframeOrder(c);c=Yt.sortedArray(c,1,f),h=Yt.sortedArray(h,1,f),!i&&c[0]===0&&(c.push(r),h.push(h[0])),s.push(new ic(".morphTargetInfluences["+t[l].name+"]",c,h).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const h=e[l],f=h.name.match(r);if(f&&f.length>1){const d=f[1];let g=i[d];g||(i[d]=g=[]),g.push(h)}}const s=[];for(const l in i)s.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,g,p,_,x){if(p.length!==0){const b=[],v=[];Yt.flattenJSON(p,b,v,_),b.length!==0&&x.push(new d(g,b,v))}},i=[],r=e.name||"default",s=e.fps||30,l=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let d=0;d<h.length;d++){const g=h[d].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const p={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let x=0;x<g[_].morphTargets.length;x++)p[g[_].morphTargets[x]]=-1;for(const x in p){const b=[],v=[];for(let y=0;y!==g[_].morphTargets.length;++y){const S=g[_];b.push(S.time),v.push(S.morphTarget===x?1:0)}i.push(new ic(".morphTargetInfluence["+x+"]",b,v))}c=p.length*(s||1)}else{const p=".bones["+t[d].name+"]";n(rc,p+".position",g,"pos",i),n(go,p+".quaternion",g,"rot",i),n(rc,p+".scale",g,"scl",i)}}return i.length===0?null:new this(r,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xO(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ic;case"vector":case"vector2":case"vector3":case"vector4":return rc;case"color":return Vy;case"quaternion":return go;case"bool":case"boolean":return Wa;case"string":return Xa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function yO(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xO(a.type);if(a.times===void 0){const t=[],n=[];Yt.flattenJSON(a.keys,t,n,"value"),a.times=t,a.values=n}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const Ya={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class wO{constructor(e,t,n){const i=this;let r=!1,s=0,l=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){l++,r===!1&&i.onStart!==void 0&&i.onStart(f,s,l),r=!0},this.itemEnd=function(f){s++,i.onProgress!==void 0&&i.onProgress(f,s,l),s===l&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,d){return h.push(f,d),this},this.removeHandler=function(f){const d=h.indexOf(f);return d!==-1&&h.splice(d,2),this},this.getHandler=function(f){for(let d=0,g=h.length;d<g;d+=2){const p=h[d],_=h[d+1];if(p.global&&(p.lastIndex=0),p.test(f))return _}return null}}}const bO=new wO;class fr{constructor(e){this.manager=e!==void 0?e:bO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Vr={};class sc extends fr{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Ya.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Vr[e]!==void 0){Vr[e].push({onLoad:t,onProgress:n,onError:i});return}Vr[e]=[],Vr[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(s).then(l=>{if(l.status===200||l.status===0){l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const c=Vr[e],h=l.body.getReader(),f=l.headers.get("Content-Length"),d=f?parseInt(f):0,g=d!==0;let p=0;return new ReadableStream({start(_){x();function x(){h.read().then(({done:b,value:v})=>{if(b)_.close();else{p+=v.byteLength;const y=new ProgressEvent("progress",{lengthComputable:g,loaded:p,total:d});for(let S=0,M=c.length;S<M;S++){const A=c[S];A.onProgress&&A.onProgress(y)}_.enqueue(v),x()}})}}})}else throw Error(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`)}).then(l=>{const c=new Response(l);switch(this.responseType){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,this.mimeType));case"json":return c.json();default:return c.text()}}).then(l=>{Ya.add(e,l);const c=Vr[e];delete Vr[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(l)}this.manager.itemEnd(e)}).catch(l=>{const c=Vr[e];delete Vr[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(l)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Wy extends fr{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Ya.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const l=zu("img");function c(){f(),Ya.add(e,this),t&&t(this),r.manager.itemEnd(e)}function h(d){f(),i&&i(d),r.manager.itemError(e),r.manager.itemEnd(e)}function f(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(e),l.src=e,l}}class MO extends fr{constructor(e){super(e)}load(e,t,n,i){const r=new nh,s=new Wy(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let l=0;function c(h){s.load(e[h],function(f){r.images[h]=f,l++,l===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let h=0;h<e.length;++h)c(h);return r}}class Xy extends fr{constructor(e){super(e)}load(e,t,n,i){const r=new pn,s=new Wy(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){r.image=l,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}}class dr extends Mt{constructor(e,t=1){super();this.type="Light",this.color=new Ne(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}dr.prototype.isLight=!0;class SO extends dr{constructor(e,t,n){super(e,n);this.type="HemisphereLight",this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.groundColor=new Ne(t)}copy(e){return dr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}SO.prototype.isHemisphereLight=!0;const Yy=new Ve,qy=new U,jy=new U;class Zp{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ee(512,512),this.map=null,this.mapPass=null,this.matrix=new Ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rh,this._frameExtents=new Ee(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;qy.setFromMatrixPosition(e.matrixWorld),t.position.copy(qy),jy.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(jy),t.updateMatrixWorld(),Yy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yy),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Zy extends Zp{constructor(){super(new Wn(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,n=Bl*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Zy.prototype.isSpotLightShadow=!0;class Jy extends dr{constructor(e,t,n=0,i=Math.PI/3,r=0,s=1){super(e,t);this.type="SpotLight",this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.target=new Mt,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.shadow=new Zy}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Jy.prototype.isSpotLight=!0;const Ky=new Ve,oc=new U,Jp=new U;class $y extends Zp{constructor(){super(new Wn(90,1,.5,500));this._frameExtents=new Ee(4,2),this._viewportCount=6,this._viewports=[new Ft(2,1,1,1),new Ft(0,1,1,1),new Ft(3,1,1,1),new Ft(1,1,1,1),new Ft(3,0,1,1),new Ft(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),oc.setFromMatrixPosition(e.matrixWorld),n.position.copy(oc),Jp.copy(n.position),Jp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Jp),n.updateMatrixWorld(),i.makeTranslation(-oc.x,-oc.y,-oc.z),Ky.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ky)}}$y.prototype.isPointLightShadow=!0;class Qy extends dr{constructor(e,t,n=0,i=1){super(e,t);this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new $y}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Qy.prototype.isPointLight=!0;class ew extends Zp{constructor(){super(new sh(-5,5,5,-5,.5,500))}}ew.prototype.isDirectionalLightShadow=!0;class tw extends dr{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Mt.DefaultUp),this.updateMatrix(),this.target=new Mt,this.shadow=new ew}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}tw.prototype.isDirectionalLight=!0;class TO extends dr{constructor(e,t){super(e,t);this.type="AmbientLight"}}TO.prototype.isAmbientLight=!0;class EO extends dr{constructor(e,t,n=10,i=10){super(e,t);this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}EO.prototype.isRectAreaLight=!0;class nw{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],1.092548*(n*i)),t.addScaledVector(s[5],1.092548*(i*r)),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],1.092548*(n*r)),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*r),t.addScaledVector(s[3],2*.511664*n),t.addScaledVector(s[4],2*.429043*n*i),t.addScaledVector(s[5],2*.429043*i*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],2*.429043*n*r),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}nw.prototype.isSphericalHarmonics3=!0;class Kp extends dr{constructor(e=new nw,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Kp.prototype.isLightProbe=!0;class Ps{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class AO extends Nt{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}AO.prototype.isInstancedBufferGeometry=!0;class iw extends fr{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Ya.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){Ya.add(e,c),t&&t(c),r.manager.itemEnd(e)}).catch(function(c){i&&i(c),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}iw.prototype.isImageBitmapLoader=!0;let Sh;const LO={getContext:function(){return Sh===void 0&&(Sh=new(window.AudioContext||window.webkitAudioContext)),Sh},setContext:function(a){Sh=a}};class RO extends fr{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new sc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);LO.getContext().decodeAudioData(c,function(f){t(f)})}catch(c){i?i(c):console.error(c),r.manager.itemError(e)}},n,i)}}class CO extends Kp{constructor(e,t,n=1){super(void 0,n);const i=new Ne().set(e),r=new Ne().set(t),s=new U(i.r,i.g,i.b),l=new U(r.r,r.g,r.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(s).sub(l).multiplyScalar(h)}}CO.prototype.isHemisphereLightProbe=!0;class PO extends Kp{constructor(e,t=1){super(void 0,t);const n=new Ne().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}PO.prototype.isAmbientLightProbe=!0;class TF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rw(){return(typeof performance=="undefined"?Date:performance).now()}class IO extends Mt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class DO{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,r,s;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let l=0;l!==i;++l)n[r+l]=n[l];s=t}else{s+=t;const l=t/s;this._mixBufferRegion(n,r,0,l,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){Hn.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const s=this._workIndex*r;Hn.multiplyQuaternionsFlat(e,s,e,t,e,n),Hn.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){const s=1-i;for(let l=0;l!==r;++l){const c=t+l;e[c]=e[c]*s+e[n+l]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){const l=t+s;e[l]=e[l]+e[n+s]*i}}}const $p="\\[\\]\\.:\\/",OO=new RegExp("["+$p+"]","g"),Qp="[^"+$p+"]",FO="[^"+$p.replace("\\.","")+"]",NO=/((?:WC+[\/:])*)/.source.replace("WC",Qp),BO=/(WCOD+)?/.source.replace("WCOD",FO),UO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qp),zO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qp),kO=new RegExp("^"+NO+BO+UO+zO+"$"),GO=["material","materials","bones"];class HO{constructor(e,t,n){const i=n||St.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class St{constructor(e,t,n){this.path=t,this.parsedPath=n||St.parseTrackName(t),this.node=St.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new St.Composite(e,t,n):new St(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OO,"")}static parseTrackName(e){const t=kO.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);GO.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let s=0;s<r.length;s++){const l=r[s];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=St.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const s=e[i];if(s===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}St.Composite=HO;St.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};St.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};St.prototype.GetterByBindingType=[St.prototype._getValue_direct,St.prototype._getValue_array,St.prototype._getValue_arrayElement,St.prototype._getValue_toArray];St.prototype.SetterByBindingTypeAndVersioning=[[St.prototype._setValue_direct,St.prototype._setValue_direct_setNeedsUpdate,St.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[St.prototype._setValue_array,St.prototype._setValue_array_setNeedsUpdate,St.prototype._setValue_array_setMatrixWorldNeedsUpdate],[St.prototype._setValue_arrayElement,St.prototype._setValue_arrayElement_setNeedsUpdate,St.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[St.prototype._setValue_fromArray,St.prototype._setValue_fromArray_setNeedsUpdate,St.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VO{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,s=r.length,l=new Array(s),c={endingStart:da,endingEnd:da};for(let h=0;h!==s;++h){const f=r[h].createInterpolant(null);l[h]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=wC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,r=e._clip.duration,s=r/i,l=i/r;e.warp(1,s,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,s=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=r,c[1]=r+n,h[0]=e/s,h[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const c=(e-r)*n;if(c<0||n===0)return;this._startTime=null,t=n*c}t*=this._updateTimeScale(e);const s=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case Kv:for(let f=0,d=c.length;f!==d;++f)c[f].evaluate(s),h[f].accumulateAdditive(l);break;case Vd:default:for(let f=0,d=c.length;f!==d;++f)c[f].evaluate(s),h[f].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;n!==null&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const s=n===bC;if(e===0)return r===-1?i:s&&(r&1)==1?t-i:i;if(n===yC){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,r+=Math.abs(l);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(s&&(r&1)==1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=pa,i.endingEnd=pa):(e?i.endingStart=this.zeroSlopeAtStart?pa:da:i.endingStart=Nu,t?i.endingEnd=this.zeroSlopeAtEnd?pa:da:i.endingEnd=Nu)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=r,c[0]=t,l[1]=r+e,c[1]=n,this}}class WO extends oo{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,l=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let f=h[c];f===void 0&&(f={},h[c]=f);for(let d=0;d!==r;++d){const g=i[d],p=g.name;let _=f[p];if(_!==void 0)s[d]=_;else{if(_=s[d],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,p));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;_=new DO(St.create(n,p,x),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,p),s[d]=_}l[d].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++==0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount==0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const l=s.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,l=s[r],c=l.knownActions,h=c[c.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,c[f]=h,c.pop(),e._byClipCacheIndex=null;const d=l.actionByRoot,g=(e._localRoot||this._root).uuid;delete d[g],c.length===0&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount==0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,l=s[i],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete l[r],Object.keys(l).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Hy(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let s=typeof e=="string"?jp.findByName(i,e):e;const l=s!==null?s.uuid:e,c=this._actionsByClip[l];let h=null;if(n===void 0&&(s!==null?n=s.blendMode:n=Vd),c!==void 0){const d=c.actionByRoot[r];if(d!==void 0&&d.blendMode===n)return d;h=c.knownActions[0],s===null&&(s=h._clip)}if(s===null)return null;const f=new VO(this,s,t,n);return this._bindAction(f,h),this._addInactiveAction(f,l,r),f}existingAction(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?jp.findByName(n,e):e,s=r?r.uuid:e,l=this._actionsByClip[s];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,r,s);const l=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)l[h].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const s=r.knownActions;for(let l=0,c=s.length;l!==c;++l){const h=s[l];this._deactivateAction(h);const f=h._cacheIndex,d=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const l=n[s].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const s in r){const l=r[s];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}WO.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class XO extends Fa{constructor(e,t,n=1){super(e,t);this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}XO.prototype.isInstancedInterleavedBuffer=!0;class EF{constructor(e,t,n=0,i=1/0){this.ray=new uo(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new fx,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return em(e,this,n,t),n.sort(sw),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)em(e[i],this,n,t);return n.sort(sw),n}}function sw(a,e){return a.distance-e.distance}function em(a,e,t,n){if(a.layers.test(e.layers)&&a.raycast(e,t),n===!0){const i=a.children;for(let r=0,s=i.length;r<s;r++)em(i[r],e,t,!0)}}const Is=new U,Th=new Ve,tm=new Ve;class YO extends mh{constructor(e){const t=ow(e),n=new Nt,i=[],r=[],s=new Ne(0,0,1),l=new Ne(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new rn(i,3)),n.setAttribute("color",new rn(r,3));const c=new Ga({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");tm.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<t.length;r++){const l=t[r];l.parent&&l.parent.isBone&&(Th.multiplyMatrices(tm,l.matrixWorld),Is.setFromMatrixPosition(Th),i.setXYZ(s,Is.x,Is.y,Is.z),Th.multiplyMatrices(tm,l.parent.matrixWorld),Is.setFromMatrixPosition(Th),i.setXYZ(s+1,Is.x,Is.y,Is.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function ow(a){const e=[];a&&a.isBone&&e.push(a);for(let t=0;t<a.children.length;t++)e.push.apply(e,ow(a.children[t]));return e}class qO extends mh{constructor(e=10,t=10,n=4473924,i=8947848){n=new Ne(n),i=new Ne(i);const r=t/2,s=e/t,l=e/2,c=[],h=[];for(let g=0,p=0,_=-l;g<=t;g++,_+=s){c.push(-l,0,_,l,0,_),c.push(_,0,-l,_,0,l);const x=g===r?n:i;x.toArray(h,p),p+=3,x.toArray(h,p),p+=3,x.toArray(h,p),p+=3,x.toArray(h,p),p+=3}const f=new Nt;f.setAttribute("position",new rn(c,3)),f.setAttribute("color",new rn(h,3));const d=new Ga({vertexColors:!0,toneMapped:!1});super(f,d);this.type="GridHelper"}}const jO=new Float32Array(1);new Int32Array(jO.buffer);ki.create=function(a,e){return console.log("THREE.Curve.create() has been deprecated"),a.prototype=Object.create(ki.prototype),a.prototype.constructor=a,a.prototype.getPoint=e,a};Wp.prototype.fromPoints=function(a){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(a)};qO.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};YO.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};fr.prototype.extractUrlBase=function(a){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ps.extractUrlBase(a)};fr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Ui.prototype.center=function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)};Ui.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ui.prototype.isIntersectionBox=function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)};Ui.prototype.isIntersectionSphere=function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)};Ui.prototype.size=function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)};co.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};rh.prototype.setFromMatrix=function(a){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(a)};En.prototype.flattenToArrayOffset=function(a,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,e)};En.prototype.multiplyVector3=function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)};En.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};En.prototype.applyToBufferAttribute=function(a){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)};En.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};En.prototype.getInverse=function(a){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(a).invert()};Ve.prototype.extractPosition=function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)};Ve.prototype.flattenToArrayOffset=function(a,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,e)};Ve.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new U().setFromMatrixColumn(this,3)};Ve.prototype.setRotationFromQuaternion=function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)};Ve.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ve.prototype.multiplyVector3=function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)};Ve.prototype.multiplyVector4=function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)};Ve.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ve.prototype.rotateAxis=function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)};Ve.prototype.crossVector=function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)};Ve.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ve.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ve.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ve.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ve.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ve.prototype.applyToBufferAttribute=function(a){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)};Ve.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ve.prototype.makeFrustum=function(a,e,t,n,i,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(a,e,n,t,i,r)};Ve.prototype.getInverse=function(a){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(a).invert()};Gr.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)};Hn.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)};Hn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};uo.prototype.isIntersectionBox=function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)};uo.prototype.isIntersectionPlane=function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)};uo.prototype.isIntersectionSphere=function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)};cn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};cn.prototype.barycoordFromPoint=function(a,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(a,e)};cn.prototype.midpoint=function(a){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(a)};cn.prototypenormal=function(a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(a)};cn.prototype.plane=function(a){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(a)};cn.barycoordFromPoint=function(a,e,t,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cn.getBarycoord(a,e,t,n,i)};cn.normal=function(a,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cn.getNormal(a,e,t,n)};$l.prototype.extractAllPoints=function(a){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(a)};$l.prototype.extrude=function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Va(this,a)};$l.prototype.makeGeometry=function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qp(this,a)};Ee.prototype.fromAttribute=function(a,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,e,t)};Ee.prototype.distanceToManhattan=function(a){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(a)};Ee.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};U.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};U.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};U.prototype.getPositionFromMatrix=function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)};U.prototype.getScaleFromMatrix=function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)};U.prototype.getColumnFromMatrix=function(a,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,a)};U.prototype.applyProjection=function(a){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(a)};U.prototype.fromAttribute=function(a,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,e,t)};U.prototype.distanceToManhattan=function(a){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(a)};U.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ft.prototype.fromAttribute=function(a,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,e,t)};Ft.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Mt.prototype.getChildByName=function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)};Mt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Mt.prototype.translate=function(a,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,a)};Mt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Mt.prototype.applyMatrix=function(a){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(a)};Object.defineProperties(Mt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Vn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Vn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),MC},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Cp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Wn.prototype.setLens=function(a,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(a)};Object.defineProperties(dr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}});Object.defineProperties(Zt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Bu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Bu)}}});Zt.prototype.setDynamic=function(a){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(a===!0?Bu:Fl),this};Zt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Zt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Nt.prototype.addIndex=function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)};Nt.prototype.addAttribute=function(a,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(a,new Zt(arguments[1],arguments[2]))):a==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(a,e)};Nt.prototype.addDrawCall=function(a,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,e)};Nt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Nt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Nt.prototype.removeAttribute=function(a){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(a)};Nt.prototype.applyMatrix=function(a){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(a)};Object.defineProperties(Nt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Fa.prototype.setDynamic=function(a){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(a===!0?Bu:Fl),this};Fa.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Va.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Va.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Va.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};ay.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(mn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ne}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===Pv}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(a){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=a}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(ho.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}});Rt.prototype.clearTarget=function(a,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(a),this.clear(e,t,n)};Rt.prototype.animate=function(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(a)};Rt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Rt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Rt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Rt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Rt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Rt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Rt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Rt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Rt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Rt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Rt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Rt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Rt.prototype.enableScissorTest=function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)};Rt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Rt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Rt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Rt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Rt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Rt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Rt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Rt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Rt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Rt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Rt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(a){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=a===!0?ar:In}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(sy.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(lr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}});IO.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new RO().load(a,function(n){e.setBuffer(n)}),this};vp.prototype.updateCubeMap=function(a,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(a,e)};vp.prototype.clear=function(a,e,t,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(a,e,t,n)};ga.crossOrigin=void 0;ga.loadTexture=function(a,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Xy;i.setCrossOrigin(this.crossOrigin);const r=i.load(a,t,void 0,n);return e&&(r.mapping=e),r};ga.loadTextureCube=function(a,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new MO;i.setCrossOrigin(this.crossOrigin);const r=i.load(a,t,void 0,n);return e&&(r.mapping=e),r};ga.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ga.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lv}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lv);var aw={exports:{}},lw={exports:{}};(function(a){(function(e,t){a.exports?a.exports=t():e.EvEmitter=t()})(typeof window!="undefined"?window:Ws,function(){function e(){}var t=e.prototype;return t.on=function(n,i){if(!(!n||!i)){var r=this._events=this._events||{},s=r[n]=r[n]||[];return s.indexOf(i)==-1&&s.push(i),this}},t.once=function(n,i){if(!(!n||!i)){this.on(n,i);var r=this._onceEvents=this._onceEvents||{},s=r[n]=r[n]||{};return s[i]=!0,this}},t.off=function(n,i){var r=this._events&&this._events[n];if(!(!r||!r.length)){var s=r.indexOf(i);return s!=-1&&r.splice(s,1),this}},t.emitEvent=function(n,i){var r=this._events&&this._events[n];if(!(!r||!r.length)){r=r.slice(0),i=i||[];for(var s=this._onceEvents&&this._onceEvents[n],l=0;l<r.length;l++){var c=r[l],h=s&&s[c];h&&(this.off(n,c),delete s[c]),c.apply(this,i)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})})(lw);/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(a){(function(e,t){a.exports?a.exports=t(e,lw.exports):e.imagesLoaded=t(e,e.EvEmitter)})(typeof window!="undefined"?window:Ws,function(t,n){var i=t.jQuery,r=t.console;function s(p,_){for(var x in _)p[x]=_[x];return p}var l=Array.prototype.slice;function c(p){if(Array.isArray(p))return p;var _=typeof p=="object"&&typeof p.length=="number";return _?l.call(p):[p]}function h(p,_,x){if(!(this instanceof h))return new h(p,_,x);var b=p;if(typeof p=="string"&&(b=document.querySelectorAll(p)),!b){r.error("Bad element for imagesLoaded "+(b||p));return}this.elements=c(b),this.options=s({},this.options),typeof _=="function"?x=_:s(this.options,_),x&&this.on("always",x),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))}h.prototype=Object.create(n.prototype),h.prototype.options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(p){p.nodeName=="IMG"&&this.addImage(p),this.options.background===!0&&this.addElementBackgroundImages(p);var _=p.nodeType;if(!(!_||!f[_])){for(var x=p.querySelectorAll("img"),b=0;b<x.length;b++){var v=x[b];this.addImage(v)}if(typeof this.options.background=="string"){var y=p.querySelectorAll(this.options.background);for(b=0;b<y.length;b++){var S=y[b];this.addElementBackgroundImages(S)}}}};var f={1:!0,9:!0,11:!0};h.prototype.addElementBackgroundImages=function(p){var _=getComputedStyle(p);if(!!_)for(var x=/url\((['"])?(.*?)\1\)/gi,b=x.exec(_.backgroundImage);b!==null;){var v=b&&b[2];v&&this.addBackground(v,p),b=x.exec(_.backgroundImage)}},h.prototype.addImage=function(p){var _=new d(p);this.images.push(_)},h.prototype.addBackground=function(p,_){var x=new g(p,_);this.images.push(x)},h.prototype.check=function(){var p=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function _(x,b,v){setTimeout(function(){p.progress(x,b,v)})}this.images.forEach(function(x){x.once("progress",_),x.check()})},h.prototype.progress=function(p,_,x){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!p.isLoaded,this.emitEvent("progress",[this,p,_]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,p),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+x,p,_)},h.prototype.complete=function(){var p=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(p,[this]),this.emitEvent("always",[this]),this.jqDeferred){var _=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[_](this)}};function d(p){this.img=p}d.prototype=Object.create(n.prototype),d.prototype.check=function(){var p=this.getIsImageComplete();if(p){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},d.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},d.prototype.confirm=function(p,_){this.isLoaded=p,this.emitEvent("progress",[this,this.img,_])},d.prototype.handleEvent=function(p){var _="on"+p.type;this[_]&&this[_](p)},d.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},d.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},d.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function g(p,_){this.url=p,this.element=_,this.img=new Image}return g.prototype=Object.create(d.prototype),g.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var p=this.getIsImageComplete();p&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},g.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},g.prototype.confirm=function(p,_){this.isLoaded=p,this.emitEvent("progress",[this,this.element,_])},h.makeJQueryPlugin=function(p){p=p||t.jQuery,!!p&&(i=p,i.fn.imagesLoaded=function(_,x){var b=new h(this,_,x);return b.jqDeferred.promise(i(this))})},h.makeJQueryPlugin(),h})})(aw);var AF=aw.exports,cw={exports:{}};(function(a,e){(function(n,i){a.exports=i()})(self,function(){return(()=>{var t={4672:s=>{const l={html:document.documentElement,body:document.body,window:{w:window.innerWidth,h:window.innerHeight}};s.exports=l},5336:s=>{s.exports=function(c,h){let f=null;return function(){clearTimeout(f);const d=arguments,g=this;f=setTimeout(function(){c.apply(g,d)},h)}}},6077:(s,l,c)=>{var h=c(111);s.exports=function(f){if(!h(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},1223:(s,l,c)=>{var h=c(5112),f=c(30),d=c(3070),g=h("unscopables"),p=Array.prototype;p[g]==null&&d.f(p,g,{configurable:!0,value:f(null)}),s.exports=function(_){p[g][_]=!0}},9670:(s,l,c)=>{var h=c(111);s.exports=function(f){if(!h(f))throw TypeError(String(f)+" is not an object");return f}},1318:(s,l,c)=>{var h=c(5656),f=c(7466),d=c(1400),g=function(p){return function(_,x,b){var v=h(_),y=f(v.length),S=d(b,y),M;if(p&&x!=x){for(;y>S;)if(M=v[S++],M!=M)return!0}else for(;y>S;S++)if((p||S in v)&&v[S]===x)return p||S||0;return!p&&-1}};s.exports={includes:g(!0),indexOf:g(!1)}},4326:s=>{var l={}.toString;s.exports=function(c){return l.call(c).slice(8,-1)}},9920:(s,l,c)=>{var h=c(6656),f=c(3887),d=c(1236),g=c(3070);s.exports=function(p,_){for(var x=f(_),b=g.f,v=d.f,y=0;y<x.length;y++){var S=x[y];h(p,S)||b(p,S,v(_,S))}}},8544:(s,l,c)=>{var h=c(7293);s.exports=!h(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},4994:(s,l,c)=>{var h=c(3383).IteratorPrototype,f=c(30),d=c(9114),g=c(8003),p=c(7497),_=function(){return this};s.exports=function(x,b,v){var y=b+" Iterator";return x.prototype=f(h,{next:d(1,v)}),g(x,y,!1,!0),p[y]=_,x}},8880:(s,l,c)=>{var h=c(9781),f=c(3070),d=c(9114);s.exports=h?function(g,p,_){return f.f(g,p,d(1,_))}:function(g,p,_){return g[p]=_,g}},9114:s=>{s.exports=function(l,c){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:c}}},654:(s,l,c)=>{var h=c(2109),f=c(4994),d=c(9518),g=c(7674),p=c(8003),_=c(8880),x=c(1320),b=c(5112),v=c(1913),y=c(7497),S=c(3383),M=S.IteratorPrototype,A=S.BUGGY_SAFARI_ITERATORS,R=b("iterator"),T="keys",N="values",X="entries",H=function(){return this};s.exports=function(O,te,V,Y,$,W,ee){f(V,te,Y);var re=function(k){if(k===$&&fe)return fe;if(!A&&k in ve)return ve[k];switch(k){case T:return function(){return new V(this,k)};case N:return function(){return new V(this,k)};case X:return function(){return new V(this,k)}}return function(){return new V(this)}},Le=te+" Iterator",J=!1,ve=O.prototype,ze=ve[R]||ve["@@iterator"]||$&&ve[$],fe=!A&&ze||re($),Me=te=="Array"&&ve.entries||ze,Te,z,F;if(Me&&(Te=d(Me.call(new O)),M!==Object.prototype&&Te.next&&(!v&&d(Te)!==M&&(g?g(Te,M):typeof Te[R]!="function"&&_(Te,R,H)),p(Te,Le,!0,!0),v&&(y[Le]=H))),$==N&&ze&&ze.name!==N&&(J=!0,fe=function(){return ze.call(this)}),(!v||ee)&&ve[R]!==fe&&_(ve,R,fe),y[te]=fe,$)if(z={values:re(N),keys:W?fe:re(T),entries:re(X)},ee)for(F in z)(A||J||!(F in ve))&&x(ve,F,z[F]);else h({target:te,proto:!0,forced:A||J},z);return z}},9781:(s,l,c)=>{var h=c(7293);s.exports=!h(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(s,l,c)=>{var h=c(7854),f=c(111),d=h.document,g=f(d)&&f(d.createElement);s.exports=function(p){return g?d.createElement(p):{}}},8324:s=>{s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},5268:(s,l,c)=>{var h=c(4326),f=c(7854);s.exports=h(f.process)=="process"},8113:(s,l,c)=>{var h=c(5005);s.exports=h("navigator","userAgent")||""},7392:(s,l,c)=>{var h=c(7854),f=c(8113),d=h.process,g=d&&d.versions,p=g&&g.v8,_,x;p?(_=p.split("."),x=_[0]+_[1]):f&&(_=f.match(/Edge\/(\d+)/),(!_||_[1]>=74)&&(_=f.match(/Chrome\/(\d+)/),_&&(x=_[1]))),s.exports=x&&+x},748:s=>{s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(s,l,c)=>{var h=c(7854),f=c(1236).f,d=c(8880),g=c(1320),p=c(3505),_=c(9920),x=c(4705);s.exports=function(b,v){var y=b.target,S=b.global,M=b.stat,A,R,T,N,X,H;if(S?R=h:M?R=h[y]||p(y,{}):R=(h[y]||{}).prototype,R)for(T in v){if(X=v[T],b.noTargetGet?(H=f(R,T),N=H&&H.value):N=R[T],A=x(S?T:y+(M?".":"#")+T,b.forced),!A&&N!==void 0){if(typeof X==typeof N)continue;_(X,N)}(b.sham||N&&N.sham)&&d(X,"sham",!0),g(R,T,X,b)}}},7293:s=>{s.exports=function(l){try{return!!l()}catch{return!0}}},5005:(s,l,c)=>{var h=c(857),f=c(7854),d=function(g){return typeof g=="function"?g:void 0};s.exports=function(g,p){return arguments.length<2?d(h[g])||d(f[g]):h[g]&&h[g][p]||f[g]&&f[g][p]}},7854:(s,l,c)=>{var h=function(f){return f&&f.Math==Math&&f};s.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof c.g=="object"&&c.g)||function(){return this}()||Function("return this")()},6656:(s,l,c)=>{var h=c(7908),f={}.hasOwnProperty;s.exports=function(g,p){return f.call(h(g),p)}},3501:s=>{s.exports={}},490:(s,l,c)=>{var h=c(5005);s.exports=h("document","documentElement")},4664:(s,l,c)=>{var h=c(9781),f=c(7293),d=c(317);s.exports=!h&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},8361:(s,l,c)=>{var h=c(7293),f=c(4326),d="".split;s.exports=h(function(){return!Object("z").propertyIsEnumerable(0)})?function(g){return f(g)=="String"?d.call(g,""):Object(g)}:Object},2788:(s,l,c)=>{var h=c(5465),f=Function.toString;typeof h.inspectSource!="function"&&(h.inspectSource=function(d){return f.call(d)}),s.exports=h.inspectSource},9909:(s,l,c)=>{var h=c(8536),f=c(7854),d=c(111),g=c(8880),p=c(6656),_=c(5465),x=c(6200),b=c(3501),v="Object already initialized",y=f.WeakMap,S,M,A,R=function(V){return A(V)?M(V):S(V,{})},T=function(V){return function(Y){var $;if(!d(Y)||($=M(Y)).type!==V)throw TypeError("Incompatible receiver, "+V+" required");return $}};if(h){var N=_.state||(_.state=new y),X=N.get,H=N.has,O=N.set;S=function(V,Y){if(H.call(N,V))throw new TypeError(v);return Y.facade=V,O.call(N,V,Y),Y},M=function(V){return X.call(N,V)||{}},A=function(V){return H.call(N,V)}}else{var te=x("state");b[te]=!0,S=function(V,Y){if(p(V,te))throw new TypeError(v);return Y.facade=V,g(V,te,Y),Y},M=function(V){return p(V,te)?V[te]:{}},A=function(V){return p(V,te)}}s.exports={set:S,get:M,has:A,enforce:R,getterFor:T}},4705:(s,l,c)=>{var h=c(7293),f=/#|\.prototype\./,d=function(b,v){var y=p[g(b)];return y==x?!0:y==_?!1:typeof v=="function"?h(v):!!v},g=d.normalize=function(b){return String(b).replace(f,".").toLowerCase()},p=d.data={},_=d.NATIVE="N",x=d.POLYFILL="P";s.exports=d},111:s=>{s.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},1913:s=>{s.exports=!1},3383:(s,l,c)=>{var h=c(7293),f=c(9518),d=c(8880),g=c(6656),p=c(5112),_=c(1913),x=p("iterator"),b=!1,v=function(){return this},y,S,M;[].keys&&(M=[].keys(),"next"in M?(S=f(f(M)),S!==Object.prototype&&(y=S)):b=!0);var A=y==null||h(function(){var R={};return y[x].call(R)!==R});A&&(y={}),(!_||A)&&!g(y,x)&&d(y,x,v),s.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:b}},7497:s=>{s.exports={}},133:(s,l,c)=>{var h=c(5268),f=c(7392),d=c(7293);s.exports=!!Object.getOwnPropertySymbols&&!d(function(){return!Symbol.sham&&(h?f===38:f>37&&f<41)})},8536:(s,l,c)=>{var h=c(7854),f=c(2788),d=h.WeakMap;s.exports=typeof d=="function"&&/native code/.test(f(d))},30:(s,l,c)=>{var h=c(9670),f=c(6048),d=c(748),g=c(3501),p=c(490),_=c(317),x=c(6200),b=">",v="<",y="prototype",S="script",M=x("IE_PROTO"),A=function(){},R=function(O){return v+S+b+O+v+"/"+S+b},T=function(O){O.write(R("")),O.close();var te=O.parentWindow.Object;return O=null,te},N=function(){var O=_("iframe"),te="java"+S+":",V;return O.style.display="none",p.appendChild(O),O.src=String(te),V=O.contentWindow.document,V.open(),V.write(R("document.F=Object")),V.close(),V.F},X,H=function(){try{X=document.domain&&new ActiveXObject("htmlfile")}catch{}H=X?T(X):N();for(var O=d.length;O--;)delete H[y][d[O]];return H()};g[M]=!0,s.exports=Object.create||function(te,V){var Y;return te!==null?(A[y]=h(te),Y=new A,A[y]=null,Y[M]=te):Y=H(),V===void 0?Y:f(Y,V)}},6048:(s,l,c)=>{var h=c(9781),f=c(3070),d=c(9670),g=c(1956);s.exports=h?Object.defineProperties:function(_,x){d(_);for(var b=g(x),v=b.length,y=0,S;v>y;)f.f(_,S=b[y++],x[S]);return _}},3070:(s,l,c)=>{var h=c(9781),f=c(4664),d=c(9670),g=c(7593),p=Object.defineProperty;l.f=h?p:function(x,b,v){if(d(x),b=g(b,!0),d(v),f)try{return p(x,b,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(x[b]=v.value),x}},1236:(s,l,c)=>{var h=c(9781),f=c(5296),d=c(9114),g=c(5656),p=c(7593),_=c(6656),x=c(4664),b=Object.getOwnPropertyDescriptor;l.f=h?b:function(y,S){if(y=g(y),S=p(S,!0),x)try{return b(y,S)}catch{}if(_(y,S))return d(!f.f.call(y,S),y[S])}},8006:(s,l,c)=>{var h=c(6324),f=c(748),d=f.concat("length","prototype");l.f=Object.getOwnPropertyNames||function(p){return h(p,d)}},5181:(s,l)=>{l.f=Object.getOwnPropertySymbols},9518:(s,l,c)=>{var h=c(6656),f=c(7908),d=c(6200),g=c(8544),p=d("IE_PROTO"),_=Object.prototype;s.exports=g?Object.getPrototypeOf:function(x){return x=f(x),h(x,p)?x[p]:typeof x.constructor=="function"&&x instanceof x.constructor?x.constructor.prototype:x instanceof Object?_:null}},6324:(s,l,c)=>{var h=c(6656),f=c(5656),d=c(1318).indexOf,g=c(3501);s.exports=function(p,_){var x=f(p),b=0,v=[],y;for(y in x)!h(g,y)&&h(x,y)&&v.push(y);for(;_.length>b;)h(x,y=_[b++])&&(~d(v,y)||v.push(y));return v}},1956:(s,l,c)=>{var h=c(6324),f=c(748);s.exports=Object.keys||function(g){return h(g,f)}},5296:(s,l)=>{var c={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,f=h&&!c.call({1:2},1);l.f=f?function(g){var p=h(this,g);return!!p&&p.enumerable}:c},7674:(s,l,c)=>{var h=c(9670),f=c(6077);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,g={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(g,[]),d=g instanceof Array}catch{}return function(x,b){return h(x),f(b),d?p.call(x,b):x.__proto__=b,x}}():void 0)},3887:(s,l,c)=>{var h=c(5005),f=c(8006),d=c(5181),g=c(9670);s.exports=h("Reflect","ownKeys")||function(_){var x=f.f(g(_)),b=d.f;return b?x.concat(b(_)):x}},857:(s,l,c)=>{var h=c(7854);s.exports=h},1320:(s,l,c)=>{var h=c(7854),f=c(8880),d=c(6656),g=c(3505),p=c(2788),_=c(9909),x=_.get,b=_.enforce,v=String(String).split("String");(s.exports=function(y,S,M,A){var R=A?!!A.unsafe:!1,T=A?!!A.enumerable:!1,N=A?!!A.noTargetGet:!1,X;if(typeof M=="function"&&(typeof S=="string"&&!d(M,"name")&&f(M,"name",S),X=b(M),X.source||(X.source=v.join(typeof S=="string"?S:""))),y===h){T?y[S]=M:g(S,M);return}else R?!N&&y[S]&&(T=!0):delete y[S];T?y[S]=M:f(y,S,M)})(Function.prototype,"toString",function(){return typeof this=="function"&&x(this).source||p(this)})},4488:s=>{s.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},3505:(s,l,c)=>{var h=c(7854),f=c(8880);s.exports=function(d,g){try{f(h,d,g)}catch{h[d]=g}return g}},8003:(s,l,c)=>{var h=c(3070).f,f=c(6656),d=c(5112),g=d("toStringTag");s.exports=function(p,_,x){p&&!f(p=x?p:p.prototype,g)&&h(p,g,{configurable:!0,value:_})}},6200:(s,l,c)=>{var h=c(2309),f=c(9711),d=h("keys");s.exports=function(g){return d[g]||(d[g]=f(g))}},5465:(s,l,c)=>{var h=c(7854),f=c(3505),d="__core-js_shared__",g=h[d]||f(d,{});s.exports=g},2309:(s,l,c)=>{var h=c(1913),f=c(5465);(s.exports=function(d,g){return f[d]||(f[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.11.1",mode:h?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},1400:(s,l,c)=>{var h=c(9958),f=Math.max,d=Math.min;s.exports=function(g,p){var _=h(g);return _<0?f(_+p,0):d(_,p)}},5656:(s,l,c)=>{var h=c(8361),f=c(4488);s.exports=function(d){return h(f(d))}},9958:s=>{var l=Math.ceil,c=Math.floor;s.exports=function(h){return isNaN(h=+h)?0:(h>0?c:l)(h)}},7466:(s,l,c)=>{var h=c(9958),f=Math.min;s.exports=function(d){return d>0?f(h(d),9007199254740991):0}},7908:(s,l,c)=>{var h=c(4488);s.exports=function(f){return Object(h(f))}},7593:(s,l,c)=>{var h=c(111);s.exports=function(f,d){if(!h(f))return f;var g,p;if(d&&typeof(g=f.toString)=="function"&&!h(p=g.call(f))||typeof(g=f.valueOf)=="function"&&!h(p=g.call(f))||!d&&typeof(g=f.toString)=="function"&&!h(p=g.call(f)))return p;throw TypeError("Can't convert object to primitive value")}},9711:s=>{var l=0,c=Math.random();s.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++l+c).toString(36)}},3307:(s,l,c)=>{var h=c(133);s.exports=h&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},5112:(s,l,c)=>{var h=c(7854),f=c(2309),d=c(6656),g=c(9711),p=c(133),_=c(3307),x=f("wks"),b=h.Symbol,v=_?b:b&&b.withoutSetter||g;s.exports=function(y){return(!d(x,y)||!(p||typeof x[y]=="string"))&&(p&&d(b,y)?x[y]=b[y]:x[y]=v("Symbol."+y)),x[y]}},6992:(s,l,c)=>{var h=c(5656),f=c(1223),d=c(7497),g=c(9909),p=c(654),_="Array Iterator",x=g.set,b=g.getterFor(_);s.exports=p(Array,"Array",function(v,y){x(this,{type:_,target:h(v),index:0,kind:y})},function(){var v=b(this),y=v.target,S=v.kind,M=v.index++;return!y||M>=y.length?(v.target=void 0,{value:void 0,done:!0}):S=="keys"?{value:M,done:!1}:S=="values"?{value:y[M],done:!1}:{value:[M,y[M]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},3948:(s,l,c)=>{var h=c(7854),f=c(8324),d=c(6992),g=c(8880),p=c(5112),_=p("iterator"),x=p("toStringTag"),b=d.values;for(var v in f){var y=h[v],S=y&&y.prototype;if(S){if(S[_]!==b)try{g(S,_,b)}catch{S[_]=b}if(S[x]||g(S,x,v),f[v]){for(var M in d)if(S[M]!==d[M])try{g(S,M,d[M])}catch{S[M]=d[M]}}}}}},n={};function i(s){var l=n[s];if(l!==void 0)return l.exports;var c=n[s]={exports:{}};return t[s](c,c.exports,i),c.exports}(()=>{i.n=s=>{var l=s&&s.__esModule?()=>s.default:()=>s;return i.d(l,{a:l}),l}})(),(()=>{i.d=(s,l)=>{for(var c in l)i.o(l,c)&&!i.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:l[c]})}})(),(()=>{i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),(()=>{i.o=(s,l)=>Object.prototype.hasOwnProperty.call(s,l)})();var r={};return(()=>{i.d(r,{default:()=>Te});var s=i(5336),l=i.n(s),c=i(4672),h=i.n(c);function f(){if(!(this instanceof f))return new f;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var d=window.document.documentElement,g=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector;f.prototype.matchesSelector=function(z,F){return g.call(z,F)},f.prototype.querySelectorAll=function(z,F){return F.querySelectorAll(z)},f.prototype.indexes=[];var p=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;f.prototype.indexes.push({name:"ID",selector:function(F){var k;if(k=F.match(p))return k[0].slice(1)},element:function(F){if(F.id)return[F.id]}});var _=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;f.prototype.indexes.push({name:"CLASS",selector:function(F){var k;if(k=F.match(_))return k[0].slice(1)},element:function(F){var k=F.className;if(k){if(typeof k=="string")return k.split(/\s/);if(typeof k=="object"&&"baseVal"in k)return k.baseVal.split(/\s/)}}});var x=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;f.prototype.indexes.push({name:"TAG",selector:function(F){var k;if(k=F.match(x))return k[0].toUpperCase()},element:function(F){return[F.nodeName.toUpperCase()]}}),f.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}};var b;typeof window.Map=="function"?b=window.Map:b=function(){function z(){this.map={}}return z.prototype.get=function(F){return this.map[F+" "]},z.prototype.set=function(F,k){this.map[F+" "]=k},z}();var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function y(z,F){z=z.slice(0).concat(z.default);var k=z.length,ne,de,ge,Z,oe=F,ce,Se,xe=[];do if(v.exec(""),(ge=v.exec(oe))&&(oe=ge[3],ge[2]||!oe)){for(ne=0;ne<k;ne++)if(Se=z[ne],ce=Se.selector(ge[1])){for(de=xe.length,Z=!1;de--;)if(xe[de].index===Se&&xe[de].key===ce){Z=!0;break}Z||xe.push({index:Se,key:ce});break}}while(ge);return xe}function S(z,F){var k,ne,de;for(k=0,ne=z.length;k<ne;k++)if(de=z[k],F.isPrototypeOf(de))return de}f.prototype.logDefaultIndexUsed=function(){},f.prototype.add=function(z,F){var k,ne,de,ge,Z,oe,ce,Se,xe=this.activeIndexes,I=this.selectors,P=this.selectorObjects;if(typeof z=="string"){for(k={id:this.uid++,selector:z,data:F},P[k.id]=k,ce=y(this.indexes,z),ne=0;ne<ce.length;ne++)Se=ce[ne],ge=Se.key,de=Se.index,Z=S(xe,de),Z||(Z=Object.create(de),Z.map=new b,xe.push(Z)),de===this.indexes.default&&this.logDefaultIndexUsed(k),oe=Z.map.get(ge),oe||(oe=[],Z.map.set(ge,oe)),oe.push(k);this.size++,I.push(z)}},f.prototype.remove=function(z,F){if(typeof z=="string"){var k,ne,de,ge,Z,oe,ce,Se,xe=this.activeIndexes,I=this.selectors=[],P=this.selectorObjects,le={},ye=arguments.length===1;for(k=y(this.indexes,z),de=0;de<k.length;de++)for(ne=k[de],ge=xe.length;ge--;)if(oe=xe[ge],ne.index.isPrototypeOf(oe)){if(ce=oe.map.get(ne.key),ce)for(Z=ce.length;Z--;)Se=ce[Z],Se.selector===z&&(ye||Se.data===F)&&(ce.splice(Z,1),le[Se.id]=!0);break}for(de in le)delete P[de],this.size--;for(de in P)I.push(P[de].selector)}};function M(z,F){return z.id-F.id}f.prototype.queryAll=function(z){if(!this.selectors.length)return[];var F={},k=[],ne=this.querySelectorAll(this.selectors.join(", "),z),de,ge,Z,oe,ce,Se,xe,I;for(de=0,Z=ne.length;de<Z;de++)for(ce=ne[de],Se=this.matches(ce),ge=0,oe=Se.length;ge<oe;ge++)I=Se[ge],F[I.id]?xe=F[I.id]:(xe={id:I.id,selector:I.selector,data:I.data,elements:[]},F[I.id]=xe,k.push(xe)),xe.elements.push(ce);return k.sort(M)},f.prototype.matches=function(z){if(!z)return[];var F,k,ne,de,ge,Z,oe,ce,Se,xe,I,P=this.activeIndexes,le={},ye=[];for(F=0,de=P.length;F<de;F++)if(oe=P[F],ce=oe.element(z),ce){for(k=0,ge=ce.length;k<ge;k++)if(Se=oe.map.get(ce[k]))for(ne=0,Z=Se.length;ne<Z;ne++)xe=Se[ne],I=xe.id,!le[I]&&this.matchesSelector(z,xe.selector)&&(le[I]=!0,ye.push(xe))}return ye.sort(M)};const A={},R={},T=["mouseenter","mouseleave"];function N(z){R[z]===void 0&&(R[z]=[])}function X(z,F){if(R[z])for(let k=0;k<R[z].length;k++)R[z][k](...F)}function H(z){return typeof z=="string"?document.querySelectorAll(z):z}function O(z){let F=te(A[z.type],z.target);if(F.length)for(let k=0;k<F.length;k++)for(let ne=0;ne<F[k].stack.length;ne++)T.indexOf(z.type)!==-1?(V(z,F[k].delegatedTarget),z.target===F[k].delegatedTarget&&F[k].stack[ne].data(z)):(V(z,F[k].delegatedTarget),F[k].stack[ne].data(z))}function te(z,F){const k=[];let ne=F;do{if(ne.nodeType!==1)break;const de=z.matches(ne);de.length&&k.push({delegatedTarget:ne,stack:de})}while(ne=ne.parentElement);return k}function V(z,F){Object.defineProperty(z,"currentTarget",{configurable:!0,enumerable:!0,get:()=>F})}function Y(z){return JSON.parse(JSON.stringify(z))}class ${bindAll(F,k){k===void 0&&(k=Object.getOwnPropertyNames(Object.getPrototypeOf(F)));for(let ne=0;ne<k.length;ne++)F[k[ne]]=F[k[ne]].bind(F)}on(F,k,ne,de){if(typeof k=="function"&&ne===void 0){N(F),R[F].push(k);return}const ge=F.split(" ");for(let Z=0;Z<ge.length;Z++){if(k.nodeType&&k.nodeType===1||k===window||k===document){k.addEventListener(ge[Z],ne,de);continue}k=H(k);for(let oe=0;oe<k.length;oe++)k[oe].addEventListener(ge[Z],ne,de)}}delegate(F,k,ne){const de=F.split(" ");for(let ge=0;ge<de.length;ge++){let Z=A[de[ge]];Z===void 0&&(Z=new f,A[de[ge]]=Z,T.indexOf(de[ge])!==-1?document.addEventListener(de[ge],O,!0):document.addEventListener(de[ge],O)),Z.add(k,ne)}}off(F,k,ne,de){if(k===void 0){R[F]=[];return}if(typeof k=="function"){N(F);for(let Z=0;Z<R[F].length;Z++)R[F][Z]===k&&R[F].splice(Z,1);return}const ge=F.split(" ");for(let Z=0;Z<ge.length;Z++){const oe=A[ge[Z]];if(oe!==void 0&&(oe.remove(k,ne),oe.size===0)){delete A[ge[Z]],document.removeEventListener(ge[Z],O);continue}if(k.removeEventListener!==void 0){k.removeEventListener(ge[Z],ne,de);continue}k=H(k);for(let ce=0;ce<k.length;ce++)k[ce].removeEventListener(ge[Z],ne,de)}}emit(F,...k){X(F,k)}debugDelegated(){return Y(A)}debugBus(){return Y(R)}}const W=new $;function ee(z,F,k){return F in z?Object.defineProperty(z,F,{value:k,enumerable:!0,configurable:!0,writable:!0}):z[F]=k,z}class re{constructor(F={}){ee(this,"onRaf",()=>{W.emit(re.INTERNALRAF),!this.options.disableRaf&&requestAnimationFrame(this.onRaf)}),this.options=F,this.addEvents()}addEvents(){this.options.disableRaf||requestAnimationFrame(this.onRaf),this.options.disableResize||W.on("resize",window,l()(()=>{this.onResize()},150)),this.onScroll(),"ontouchstart"in document.documentElement&&(h().isTouch=!0,this.detectMouse())}onScroll(){W.on("wheel",window,F=>{W.emit(re.WHEEL,{event:F})},{passive:!1}),W.on("scroll",window,F=>{W.emit(re.INTERNALSCROLL,{event:F})},{passive:!0})}onResize({width:F,height:k}={}){h().window.w=F||window.innerWidth,h().window.h=k||window.innerHeight,W.emit(re.RESIZE)}detectMouse(){window.addEventListener("mousemove",function F(k){(Math.abs(k.movementX)>0||Math.abs(k.movementY)>0)&&(h().isTouch=!1,W.emit(re.MOUSEDETECTED),window.removeEventListener("mousemove",F))})}}ee(re,"INTERNALRAF","raf:internal"),ee(re,"EXTERNALRAF","raf:external"),ee(re,"WHEEL","wheel"),ee(re,"INTERNALSCROLL","scroll:internal"),ee(re,"EXTERNALSCROLL","scroll:external"),ee(re,"RESIZE","resize"),ee(re,"MOUSEDETECTED","mouseDetected"),ee(re,"SCROLLEND","scrollEnd"),i(3948);function Le(z,F,k){return F in z?Object.defineProperty(z,F,{value:k,enumerable:!0,configurable:!0,writable:!0}):z[F]=k,z}class J{constructor(F){Le(this,"onMouseMove",k=>{!this.mouseDown||(this.mousePos=k.clientY,this.position-=this.prevMousePos-this.mousePos,this.position=Math.min(Math.max(this.position,0),this.maxY),this.prevMousePos=this.mousePos,this.controller.targetPos=this.position/this.maxY*this.controller.maxScroll,this.controller.clamp(),this.controller.syncScroll=!0,this.transform(),W.emit(re.EXTERNALSCROLL,-this.controller.targetPos))}),Le(this,"onMouseDown",k=>{this.mousePos=this.prevMousePos=k.clientY,this.mouseDown=!0,h().body.style.userSelect="none",this.el.classList.add("active")}),Le(this,"onMouseUp",()=>{this.mouseDown=!1,h().body.style.removeProperty("user-select"),this.el.classList.remove("active")}),this.controller=F,this.addHTML(),this.el=document.querySelector(this.controller.options.scrollbarEl),this.handle=document.querySelector(this.controller.options.scrollbarHandleEl),this.position=0,this.mousePos=0,this.prevMousePos=0,this.addStyles(),this.addEvents()}transform(){let F;this.mouseDown?F=this.position:(F=-this.controller.targetPos/-this.controller.maxScroll*(h().window.h-this.handleHeight),this.position=F),this.handle.style.transform="translate3d(0, ".concat(F,"px, 0)")}show(){this.el.classList.add("show")}hide(){this.el.classList.remove("show")}addEvents(){W.on("mousedown",this.handle,this.onMouseDown),W.on("mousemove",window,this.onMouseMove),W.on("mouseup",window,this.onMouseUp)}onResize(){if(this.scale=(-this.controller.maxScroll+h().window.h)/h().window.h,this.scale<=1){this.handle.style.height=0;return}this.trueSize=h().window.h/this.scale,this.handleHeight=Math.max(this.trueSize,40),this.handle.style.height="".concat(this.handleHeight,"px"),this.maxY=h().window.h-this.handleHeight}addHTML(){if(document.querySelector(this.controller.options.scrollbarEl))return;const F=document.createElement("div");F.classList.add(this.controller.options.scrollbarEl.substring(1)),F.innerHTML='<div class="'.concat(this.controller.options.scrollbarHandleEl.substring(1),'"><div></div></div>'),document.body.appendChild(F)}addStyles(){if(!this.controller.options.disableNativeScrollbar&&!this.controller.options.scrollbarStyles)return;let F="";this.controller.options.disableNativeScrollbar&&(F+="html{scrollbar-width:none;}body{-ms-overflow-style:none;}body::-webkit-scrollbar{width:0;height:0;}"),this.controller.options.scrollbarStyles&&(F+="".concat(this.controller.options.scrollbarEl," {position:fixed;top:0;right:0;width:20px;height:100%;z-index:900;}.is-touch ").concat(this.controller.options.scrollbarEl," {display:none;}").concat(this.controller.options.scrollbarEl," > div {padding:6px 0;width:10px;height:0;margin:0 auto;visibility:hidden;}").concat(this.controller.options.scrollbarEl," > div > div {width:100%;height:100%;border-radius:10px;opacity:0.3;background-color:#000;}").concat(this.controller.options.scrollbarEl," > div > div:hover {opacity:0.9;}").concat(this.controller.options.scrollbarEl,":hover > div, ").concat(this.controller.options.scrollbarEl,".show > div, ").concat(this.controller.options.scrollbarEl,".active > div {visibility:visible;}").concat(this.controller.options.scrollbarEl,".active > div > div {opacity:0.9;}"));const k=document.createElement("style");k.styleSheet?k.styleSheet.cssText=F:k.appendChild(document.createTextNode(F)),document.getElementsByTagName("head")[0].appendChild(k)}destroy(){W.off("mousedown",this.handle,this.onMouseDown),W.off("mousemove",window,this.onMouseMove),W.off("mouseup",window,this.onMouseUp)}}function ve(z,F,k){return F in z?Object.defineProperty(z,F,{value:k,enumerable:!0,configurable:!0,writable:!0}):z[F]=k,z}class ze{constructor(F={}){ve(this,"onScroll",({event:k})=>{if(this.scrolling||(this.options.customScrollbar&&this.scrollbar.show(),this.toggleIframes(),this.scrolling=!0),!h().isTouch&&k.type==="wheel")k.preventDefault(),this.syncScroll=!0,this.targetPos+=k.deltaY*-1;else{if(this.preventResizeScroll){this.preventResizeScroll=!1;return}h().isTouch&&this.options.touchScrollType==="scrollTop"?this.targetPos=this.horizontalScroll?-this.containerElement.scrollLeft:-this.containerElement.scrollTop:this.targetPos=-window.scrollY,h().isTouch&&this.options.touchScrollType!=="transform"&&(this.currentPos=this.targetPos)}this.clamp(),this.options.customScrollbar&&this.scrollbar.transform(),W.emit(re.EXTERNALSCROLL,-this.targetPos)}),ve(this,"onRAF",()=>{if(this.testFps&&this.options.limitLerpRate&&(this.time=performance.now()*.001,this.delta=Math.min((this.time-this.startTime)*60,1),this.startTime=this.time),!this.render)return;Math.abs(this.targetPos-this.currentPos)<.5?(this.currentPos=this.targetPos,this.scrolling&&!this.syncScroll&&(this.scrolling=!1,this.options.customScrollbar&&this.scrollbar.hide(),this.toggleIframes(!0),W.emit(re.SCROLLEND,-this.targetPos)),this.syncScroll&&(window.scrollTo(0,-this.targetPos),this.syncScroll=!1)):this.currentPos+=(this.targetPos-this.currentPos)*this.ease*this.delta;const k=this.horizontalScroll?this.currentPos:0,ne=this.horizontalScroll?0:this.currentPos;this.applyTransform(k,ne),W.emit(re.EXTERNALRAF,{targetPos:-this.targetPos,currentPos:-this.currentPos})}),ve(this,"onResize",()=>{if(this.scrollElementsLength>1){const ne=this.scrollElements[this.scrollElementsLength-1],de=window.getComputedStyle(ne),ge=parseFloat(this.horizontalScroll?de.marginRight:de.marginBottom),Z=ne.getBoundingClientRect(),oe=this.horizontalScroll?Z.right:Z.bottom;this.scrollLength=oe+ge-this.currentPos}else this.scrollLength=this.horizontalScroll?this.scrollElements[0].scrollWidth:this.scrollElements[0].scrollHeight;const k=this.horizontalScroll?h().window.w:h().window.h;this.maxScroll=this.scrollLength>k?-(this.scrollLength-k):0,this.clamp(),this.firstResize||(this.preventResizeScroll=!0),h().body.style.height=this.scrollLength+"px",this.options.customScrollbar&&this.scrollbar.onResize(),this.firstResize=!1}),ve(this,"toggleFixedContainer",()=>{this.containerElement.style.position="static";const k=this.currentPos;this.applyTransform(0,0),requestAnimationFrame(()=>{this.containerElement.style.position="fixed";const ne=this.horizontalScroll?k:0,de=this.horizontalScroll?0:k;this.applyTransform(ne,de)})}),this.options=F,this.targetPos=this.currentPos=this.prevScrollPos=this.maxScroll=0,this.enabled=!1,this.render=!1,this.scrolling=!1,this.syncScroll=!1,this.horizontalScroll=!1,this.firstResize=!0,this.preventResizeScroll=!1,this.ease=h().isTouch?this.options.touchEase:this.options.ease,this.originalScrollbarSetting=this.options.customScrollbar,this.testFps=!0,this.delta=1,this.time=this.startTime=performance.now(),this.setElements(),h().isTouch?(this.options.customScrollbar=!1,this.options.touchScrollType==="transform"?this.setupSmoothScroll():this.options.touchScrollType==="scrollTop"&&(document.documentElement.classList.add("asscroll-touch"),this.addTouchStyles(),W.on("scroll",this.containerElement,k=>{W.emit(re.INTERNALSCROLL,{event:k})},{passive:!0}))):this.setupSmoothScroll(),this.addEvents()}setElements(){this.containerElement=typeof this.options.containerElement=="string"?document.querySelector(this.options.containerElement):this.options.containerElement,this.containerElement===null&&console.error("ASScroll: could not find container element"),this.containerElement.setAttribute("asscroll-container",""),this.scrollElements=typeof this.options.scrollElements=="string"?document.querySelectorAll(this.options.scrollElements):this.options.scrollElements,this.scrollElements.length&&(this.scrollElements=[...this.scrollElements]),this.scrollElements=this.scrollElements.length?this.scrollElements:[this.containerElement.firstElementChild],this.scrollElementsLength=this.scrollElements.length,this.scrollElements.forEach(F=>F.setAttribute("asscroll",""))}setupSmoothScroll(){Object.assign(this.containerElement.style,{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",contain:"content"}),this.options.customScrollbar&&(this.scrollbar=new J(this)),W.on(re.INTERNALRAF,this.onRAF),W.on(re.RESIZE,this.onResize),this.options.limitLerpRate&&setTimeout(()=>{this.testFps=!1,this.delta=Math.round(this.delta*10)*.1},2e3)}applyTransform(F,k){for(let ne=0;ne<this.scrollElementsLength;ne++)this.scrollElements[ne].style.transform="translate3d(".concat(F,"px, ").concat(k,"px, 0px)")}enable({newScrollElements:F=!1,reset:k=!1,restore:ne=!1,horizontalScroll:de=!1}={}){this.enabled||(this.enabled=!0,this.render=!0,this.horizontalScroll=de,F&&(this.scrollElements=F.length?[...F]:[F],this.scrollElementsLength=this.scrollElements.length,this.scrollElements.forEach(ge=>ge.setAttribute("asscroll",""))),this.iframes=this.containerElement.querySelectorAll("iframe"),h().isTouch&&this.options.touchScrollType!=="transform"?(h().body.style.removeProperty("height"),this.maxScroll=-this.containerElement.scrollHeight,k&&(this.targetPos=this.currentPos=0,this.scrollTo(0,!1))):(this.firstResize=!0,k&&(this.targetPos=this.currentPos=0,this.applyTransform(0,0)),this.onResize()),ne&&this.scrollTo(this.prevScrollPos,!1),W.on(re.WHEEL,this.onScroll),W.on(re.INTERNALSCROLL,this.onScroll))}disable({inputOnly:F=!1}={}){!this.enabled||(this.enabled=!1,F||(this.render=!1),W.off(re.WHEEL,this.onScroll),W.off(re.INTERNALSCROLL,this.onScroll),this.prevScrollPos=this.targetPos,h().body.style.height="0px")}clamp(){this.targetPos=Math.max(Math.min(this.targetPos,0),this.maxScroll)}scrollTo(F,k=!0){this.targetPos=F,h().isTouch&&this.options.touchScrollType!=="transform"&&(this.horizontalScroll?this.containerElement.scrollTo(-this.targetPos,0):this.containerElement.scrollTo(0,-this.targetPos)),this.clamp(),this.syncScroll=!0,k&&W.emit(re.EXTERNALSCROLL,-this.targetPos)}toggleIframes(F){for(let k=0;k<this.iframes.length;k++)this.iframes[k].style.pointerEvents=F?"auto":"none"}blockScrollEvent(F){F.stopPropagation()}addEvents(){W.on(re.MOUSEDETECTED,()=>{this.options.touchScrollType!=="transform"&&(this.options.customScrollbar=this.originalScrollbarSetting,this.ease=this.options.ease,this.setupSmoothScroll(),this.onResize())}),h().isTouch||(W.on("mouseleave",document,()=>{window.scrollTo(0,-this.targetPos)}),W.on("keydown",window,F=>{(F.key==="ArrowUp"||F.key==="ArrowDown"||F.key==="PageUp"||F.key==="PageDown"||F.key==="Home"||F.key==="End"||F.key==="Tab")&&window.scrollTo(0,-this.targetPos),F.key==="Tab"&&this.toggleFixedContainer()}),W.delegate("click",'a[href^="#"]',this.toggleFixedContainer),W.delegate("wheel",this.options.blockScrollClass,this.blockScrollEvent))}addTouchStyles(){const F=".asscroll-touch [asscroll-container] {position:absolute;top:0;left:0;right:0;bottom:-0.1px;overflow-y: auto;} .asscroll-touch [asscroll] {margin-bottom:0.1px;}",k=document.createElement("style");k.styleSheet?k.styleSheet.cssText=F:k.appendChild(document.createTextNode(F)),document.getElementsByTagName("head")[0].appendChild(k)}}function fe(z,F,k){return F in z?Object.defineProperty(z,F,{value:k,enumerable:!0,configurable:!0,writable:!0}):z[F]=k,z}class Me{constructor(F={}){fe(this,"update",()=>{this.events.onRaf()}),fe(this,"resize",Ae=>{this.events.onResize(Ae)});const{containerElement:k="[asscroll-container]",scrollElements:ne="[asscroll]",ease:de=.075,touchEase:ge=1,touchScrollType:Z="none",scrollbarEl:oe=".asscrollbar",scrollbarHandleEl:ce=".asscrollbar__handle",customScrollbar:Se=!0,scrollbarStyles:xe=!0,disableNativeScrollbar:I=!0,disableRaf:P=!1,disableResize:le=!1,limitLerpRate:ye=!0,blockScrollClass:we=".asscroll-block"}=F;this.events=new re({disableRaf:P,disableResize:le}),this.controller=new ze({containerElement:k,scrollElements:ne,ease:de,touchEase:ge,customScrollbar:Se,scrollbarEl:oe,scrollbarHandleEl:ce,scrollbarStyles:xe,disableNativeScrollbar:I,touchScrollType:Z,limitLerpRate:ye,blockScrollClass:we})}enable(F){F!==void 0&&typeof F!="object"&&console.warn("ASScroll: Please pass an object with your parameters. Since 2.0"),this.controller.enable(F)}disable(F){F!==void 0&&typeof F!="object"&&console.warn("ASScroll: Please pass an object with your parameters. Since 2.0"),this.controller.disable(F)}on(F,k){if(typeof k!="function"){console.error("ASScroll: Function not provided as second parameter");return}if(F==="scroll"){W.on(re.EXTERNALSCROLL,k);return}if(F==="update"){W.on(re.EXTERNALRAF,k);return}if(F==="scrollEnd"){W.on(re.SCROLLEND,k);return}console.warn('ASScroll: "'.concat(F,'" is not a valid event'))}off(F,k){if(typeof k!="function"){console.error("ASScroll: Function not provided as second parameter");return}if(F==="scroll"){W.off(re.EXTERNALSCROLL,k);return}if(F==="update"){W.off(re.EXTERNALRAF,k);return}if(F==="scrollEnd"){W.off(re.SCROLLEND,k);return}console.warn('ASScroll: "'.concat(F,'" is not a valid event'))}scrollTo(F,k=!0){this.controller.scrollTo(-F,k)}get targetPos(){return-this.controller.targetPos}get currentPos(){return-this.controller.currentPos}set currentPos(F){this.controller.targetPos=this.controller.currentPos=-F}get maxScroll(){return-this.controller.maxScroll}get containerElement(){return this.controller.containerElement}get scrollElements(){return this.controller.scrollElements}get isHorizontal(){return this.controller.horizontalScroll}get scrollPos(){}get smoothScrollPos(){}onRaf(){}onResize(){}}const Te=Me})(),r=r.default,r})()})})(cw);var LF=EA(cw.exports);class RF extends fr{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $O(t)}),this.register(function(t){return new rF(t)}),this.register(function(t){return new sF(t)}),this.register(function(t){return new QO(t)}),this.register(function(t){return new eF(t)}),this.register(function(t){return new tF(t)}),this.register(function(t){return new nF(t)}),this.register(function(t){return new iF(t)}),this.register(function(t){return new JO(t)}),this.register(function(t){return new oF(t)})}load(e,t,n,i){const r=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=Ps.extractUrlBase(e),this.manager.itemStart(e);const l=function(h){i?i(h):console.error(h),r.manager.itemError(e),r.manager.itemEnd(e)},c=new sc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{r.parse(h,s,function(f){t(f),r.manager.itemEnd(e)},l)}catch(f){l(f)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const s={},l={};if(typeof e=="string")r=e;else if(Ps.decodeText(new Uint8Array(e,0,4))===uw){try{s[ft.KHR_BINARY_GLTF]=new aF(e)}catch(d){i&&i(d);return}r=s[ft.KHR_BINARY_GLTF].content}else r=Ps.decodeText(new Uint8Array(e));const c=JSON.parse(r);if(c.asset===void 0||c.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new xF(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](h);l[d.name]=d,s[d.name]=!0}if(c.extensionsUsed)for(let f=0;f<c.extensionsUsed.length;++f){const d=c.extensionsUsed[f],g=c.extensionsRequired||[];switch(d){case ft.KHR_MATERIALS_UNLIT:s[d]=new KO;break;case ft.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[d]=new uF;break;case ft.KHR_DRACO_MESH_COMPRESSION:s[d]=new lF(c,this.dracoLoader);break;case ft.KHR_TEXTURE_TRANSFORM:s[d]=new cF;break;case ft.KHR_MESH_QUANTIZATION:s[d]=new hF;break;default:g.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}h.setExtensions(s),h.setPlugins(l),h.parse(n,i)}}function ZO(){let a={};return{get:function(e){return a[e]},add:function(e,t){a[e]=t},remove:function(e){delete a[e]},removeAll:function(){a={}}}}const ft={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class JO{constructor(e){this.parser=e,this.name=ft.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let h;const f=new Ne(16777215);c.color!==void 0&&f.fromArray(c.color);const d=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new tw(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Qy(f),h.distance=d;break;case"spot":h=new Jy(f),h.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),i=Promise.resolve(h),t.cache.add(n,i),i}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return n._getNodeRef(t.cache,l,c)})}}class KO{constructor(){this.name=ft.KHR_MATERIALS_UNLIT}getMaterialType(){return ws}extendParams(e,t,n){const i=[];e.color=new Ne(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const s=r.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}r.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(i)}}class $O{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const l=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ee(l,l)}return Promise.all(r)}}class QO{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ne(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture)),s.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class eF{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class tF{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;const l=s.attenuationColor||[1,1,1];return t.attenuationColor=new Ne(l[0],l[1],l[2]),Promise.all(r)}}class nF{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class iF{constructor(e){this.parser=e,this.name=ft.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const l=s.specularColorFactor||[1,1,1];return t.specularColor=new Ne(l[0],l[1],l[2]),s.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture).then(function(c){c.encoding=ar})),Promise.all(r)}}class rF{constructor(e){this.parser=e,this.name=ft.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=n.images[r.source],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s,l)}}class sF{constructor(e){this.parser=e,this.name=ft.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const s=r.extensions[t],l=i.images[s.source];let c=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,l,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class oF{constructor(e){this.name=ft.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,s.ready]).then(function(l){const c=i.byteOffset||0,h=i.byteLength||0,f=i.count,d=i.byteStride,g=new ArrayBuffer(f*d),p=new Uint8Array(l[0],c,h);return s.decodeGltfBuffer(new Uint8Array(g),f,d,p,i.mode,i.filter),g})}else return null}}const uw="glTF",ac=12,hw={JSON:1313821514,BIN:5130562};class aF{constructor(e){this.name=ft.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ac);if(this.header={magic:Ps.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==uw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-ac,i=new DataView(e,ac);let r=0;for(;r<n;){const s=i.getUint32(r,!0);r+=4;const l=i.getUint32(r,!0);if(r+=4,l===hw.JSON){const c=new Uint8Array(e,ac+r,s);this.content=Ps.decodeText(c)}else if(l===hw.BIN){const c=ac+r;this.body=e.slice(c,c+s)}r+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class lF{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ft.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,l={},c={},h={};for(const f in s){const d=im[f]||f.toLowerCase();l[d]=s[f]}for(const f in e.attributes){const d=im[f]||f.toLowerCase();if(s[f]!==void 0){const g=n.accessors[e.attributes[f]],p=lc[g.componentType];h[d]=p,c[d]=g.normalized===!0}}return t.getDependency("bufferView",r).then(function(f){return new Promise(function(d){i.decodeDracoFile(f,function(g){for(const p in g.attributes){const _=g.attributes[p],x=c[p];x!==void 0&&(_.normalized=x)}d(g)},l,h)})})}}class cF{constructor(){this.name=ft.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class nm extends nc{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),l={specular:{value:new Ne().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=l,this.onBeforeCompile=function(c){for(const h in l)c.uniforms[h]=l[h];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return l.specular.value},set:function(c){l.specular.value=c}},specularMap:{get:function(){return l.specularMap.value},set:function(c){l.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(c){l.glossiness.value=c}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(c){l.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class uF{constructor(){this.name=ft.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return nm}extendParams(e,t,n){const i=t.extensions[this.name];e.color=new Ne(1,1,1),e.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const s=i.diffuseFactor;e.color.fromArray(s),e.opacity=s[3]}if(i.diffuseTexture!==void 0&&r.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new Ne(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Ne(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const s=i.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",s)),r.push(n.assignTexture(e,"specularMap",s))}return Promise.all(r)}createMaterial(e){const t=new nm(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=so,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class hF{constructor(){this.name=ft.KHR_MESH_QUANTIZATION}}class _o extends Hr{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let s=0;s!==i;s++)t[s]=n[r+s];return t}}_o.prototype.beforeStart_=_o.prototype.copySampleValue_;_o.prototype.afterEnd_=_o.prototype.copySampleValue_;_o.prototype.interpolate_=function(a,e,t,n){const i=this.resultBuffer,r=this.sampleValues,s=this.valueSize,l=s*2,c=s*3,h=n-e,f=(t-e)/h,d=f*f,g=d*f,p=a*c,_=p-c,x=-2*g+3*d,b=g-d,v=1-x,y=b-d+f;for(let S=0;S!==s;S++){const M=r[_+S+s],A=r[_+S+l]*h,R=r[p+S+s],T=r[p+S]*h;i[S]=v*M+y*A+x*R+b*T}return i};const fF=new Hn;class dF extends _o{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return fF.fromArray(r).normalize().toArray(r),r}}const Wr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},lc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fw={9728:dn,9729:ri,9984:kd,9985:kv,9986:Gd,9987:ca},dw={33071:ii,33648:Du,10497:la},pw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},im={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ds={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pF={CUBICSPLINE:void 0,LINEAR:fa,STEP:Ol},rm={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mF(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new nc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:oa})),a.DefaultMaterial}function cc(a,e,t){for(const n in t.extensions)a[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function vo(a,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(a.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gF(a,e,t){let n=!1,i=!1;for(let l=0,c=e.length;l<c;l++){const h=e[l];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(i=!0),n&&i)break}if(!n&&!i)return Promise.resolve(a);const r=[],s=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];if(n){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):a.attributes.position;r.push(f)}if(i){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):a.attributes.normal;s.push(f)}}return Promise.all([Promise.all(r),Promise.all(s)]).then(function(l){const c=l[0],h=l[1];return n&&(a.morphAttributes.position=c),i&&(a.morphAttributes.normal=h),a.morphTargetsRelative=!0,a})}function _F(a,e){if(a.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)a.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(a.morphTargetInfluences.length===t.length){a.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)a.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vF(a){const e=a.extensions&&a.extensions[ft.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+mw(e.attributes):t=a.indices+":"+mw(a.attributes)+":"+a.mode,t}function mw(a){let e="";const t=Object.keys(a).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+a[t[n]]+";";return e}function sm(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class xF{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ZO,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new iw(this.options.manager):this.textureLoader=new Xy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){const l={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:n,userData:{}};cc(r,l,i),vo(l,i),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i].joints;for(let l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const s=e[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(s,l)=>{const c=this.associations.get(s);c!=null&&this.associations.set(l,c);for(const[h,f]of s.children.entries())r(f,l.children[h])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(r,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[ft.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(r,s){n.load(Ps.resolveURL(t.uri,i.path),r,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const r=[];return i.bufferView!==void 0?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),i.sparse!==void 0&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(s){const l=s[0],c=pw[i.type],h=lc[i.componentType],f=h.BYTES_PER_ELEMENT,d=f*c,g=i.byteOffset||0,p=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,_=i.normalized===!0;let x,b;if(p&&p!==d){const v=Math.floor(g/p),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let S=t.cache.get(y);S||(x=new h(l,v*p,i.count*p/f),S=new Fa(x,p/f),t.cache.add(y,S)),b=new Na(S,c,g%p/f,_)}else l===null?x=new h(i.count*c):x=new h(l,g,i.count*c),b=new Zt(x,c,_);if(i.sparse!==void 0){const v=pw.SCALAR,y=lc[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,M=i.sparse.values.byteOffset||0,A=new y(s[1],S,i.sparse.count*v),R=new h(s[2],M,i.sparse.count*c);l!==null&&(b=new Zt(b.array.slice(),b.itemSize,b.normalized));for(let T=0,N=A.length;T<N;T++){const X=A[T];if(b.setX(X,R[T*c]),c>=2&&b.setY(X,R[T*c+1]),c>=3&&b.setZ(X,R[T*c+2]),c>=4&&b.setW(X,R[T*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e],r=t.images[i.source];let s=this.textureLoader;if(r.uri){const l=n.manager.getHandler(r.uri);l!==null&&(s=l)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const i=this,r=this.json,s=this.options,l=r.textures[e],c=(t.uri||t.bufferView)+":"+l.sampler;if(this.textureCache[c])return this.textureCache[c];const h=self.URL||self.webkitURL;let f=t.uri||"",d=!1;if(t.bufferView!==void 0)f=i.getDependency("bufferView",t.bufferView).then(function(p){d=!0;const _=new Blob([p],{type:t.mimeType});return f=h.createObjectURL(_),f});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(f).then(function(p){return new Promise(function(_,x){let b=_;n.isImageBitmapLoader===!0&&(b=function(v){const y=new pn(v);y.needsUpdate=!0,_(y)}),n.load(Ps.resolveURL(p,s.path),b,void 0,x)})}).then(function(p){d===!0&&h.revokeObjectURL(f),p.flipY=!1,l.name&&(p.name=l.name);const x=(r.samplers||{})[l.sampler]||{};return p.magFilter=fw[x.magFilter]||ri,p.minFilter=fw[x.minFilter]||ca,p.wrapS=dw[x.wrapS]||la,p.wrapT=dw[x.wrapT]||la,i.associations.set(p,{textures:e}),p}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",f),null});return this.textureCache[c]=g,g}assignTexture(e,t,n){const i=this;return this.getDependency("texture",n.index).then(function(r){if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[ft.KHR_TEXTURE_TRANSFORM]){const s=n.extensions!==void 0?n.extensions[ft.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const l=i.associations.get(r);r=i.extensions[ft.KHR_TEXTURE_TRANSFORM].extendTexture(r,s),i.associations.set(r,l)}}return e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new Fp,mn.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new Ga,mn.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(l,c)),n=c}if(i||r||s){let l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),i&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),s&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=n.clone(),r&&(c.vertexColors=!0),s&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return nc}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let s;const l={},c=r.extensions||{},h=[];if(c[ft.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=i[ft.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=d.getMaterialType(),h.push(d.extendParams(l,r,t))}else if(c[ft.KHR_MATERIALS_UNLIT]){const d=i[ft.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),h.push(d.extendParams(l,r,t))}else{const d=r.pbrMetallicRoughness||{};if(l.color=new Ne(1,1,1),l.opacity=1,Array.isArray(d.baseColorFactor)){const g=d.baseColorFactor;l.color.fromArray(g),l.opacity=g[3]}d.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",d.baseColorTexture)),l.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,l.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",d.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,l)})))}r.doubleSided===!0&&(l.side=no);const f=r.alphaMode||rm.OPAQUE;if(f===rm.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.format=ro,l.transparent=!1,f===rm.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&s!==ws&&(h.push(t.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Ee(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;l.normalScale.set(d,d)}return r.occlusionTexture!==void 0&&s!==ws&&(h.push(t.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&s!==ws&&(l.emissive=new Ne().fromArray(r.emissiveFactor)),r.emissiveTexture!==void 0&&s!==ws&&h.push(t.assignTexture(l,"emissiveMap",r.emissiveTexture)),Promise.all(h).then(function(){let d;return s===nm?d=i[ft.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):d=new s(l),r.name&&(d.name=r.name),d.map&&(d.map.encoding=ar),d.emissiveMap&&(d.emissiveMap.encoding=ar),vo(d,r),t.associations.set(d,{materials:e}),r.extensions&&cc(i,d,r),d})}createUniqueName(e){const t=St.sanitizeNodeName(e||"");let n=t;for(let i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(l){return n[ft.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return _w(c,l,t)})}const s=[];for(let l=0,c=e.length;l<c;l++){const h=e[l],f=vF(h),d=i[f];if(d)s.push(d.promise);else{let g;h.extensions&&h.extensions[ft.KHR_DRACO_MESH_COMPRESSION]?g=r(h):g=_w(new Nt,h,t),i[f]={primitive:h,promise:g},s.push(g)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],s=r.primitives,l=[];for(let c=0,h=s.length;c<h;c++){const f=s[c].material===void 0?mF(this.cache):this.getDependency("material",s[c].material);l.push(f)}return l.push(t.loadGeometries(s)),Promise.all(l).then(function(c){const h=c.slice(0,c.length-1),f=c[c.length-1],d=[];for(let p=0,_=f.length;p<_;p++){const x=f[p],b=s[p];let v;const y=h[p];if(b.mode===Wr.TRIANGLES||b.mode===Wr.TRIANGLE_STRIP||b.mode===Wr.TRIANGLE_FAN||b.mode===void 0)v=r.isSkinnedMesh===!0?new Cp(x,y):new Vn(x,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),b.mode===Wr.TRIANGLE_STRIP?v.geometry=vw(v.geometry,SC):b.mode===Wr.TRIANGLE_FAN&&(v.geometry=vw(v.geometry,$v));else if(b.mode===Wr.LINES)v=new mh(x,y);else if(b.mode===Wr.LINE_STRIP)v=new ph(x,y);else if(b.mode===Wr.LINE_LOOP)v=new Ty(x,y);else if(b.mode===Wr.POINTS)v=new Ay(x,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(v.geometry.morphAttributes).length>0&&_F(v,r),v.name=t.createUniqueName(r.name||"mesh_"+e),vo(v,r),b.extensions&&cc(i,v,b),t.assignFinalMaterial(v),d.push(v)}for(let p=0,_=d.length;p<_;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(d.length===1)return d[0];const g=new Ls;t.associations.set(g,{meshes:e});for(let p=0,_=d.length;p<_;p++)g.add(d[p]);return g})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Wn(WC.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new sh(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),vo(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return n.inverseBindMatrices=i,n})}loadAnimation(e){const n=this.json.animations[e],i=[],r=[],s=[],l=[],c=[];for(let h=0,f=n.channels.length;h<f;h++){const d=n.channels[h],g=n.samplers[d.sampler],p=d.target,_=p.node!==void 0?p.node:p.id,x=n.parameters!==void 0?n.parameters[g.input]:g.input,b=n.parameters!==void 0?n.parameters[g.output]:g.output;i.push(this.getDependency("node",_)),r.push(this.getDependency("accessor",x)),s.push(this.getDependency("accessor",b)),l.push(g),c.push(p)}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(l),Promise.all(c)]).then(function(h){const f=h[0],d=h[1],g=h[2],p=h[3],_=h[4],x=[];for(let v=0,y=f.length;v<y;v++){const S=f[v],M=d[v],A=g[v],R=p[v],T=_[v];if(S===void 0)continue;S.updateMatrix(),S.matrixAutoUpdate=!0;let N;switch(Ds[T.path]){case Ds.weights:N=ic;break;case Ds.rotation:N=go;break;case Ds.position:case Ds.scale:default:N=rc;break}const X=S.name?S.name:S.uuid,H=R.interpolation!==void 0?pF[R.interpolation]:fa,O=[];Ds[T.path]===Ds.weights?S.traverse(function(V){V.isMesh===!0&&V.morphTargetInfluences&&O.push(V.name?V.name:V.uuid)}):O.push(X);let te=A.array;if(A.normalized){const V=sm(te.constructor),Y=new Float32Array(te.length);for(let $=0,W=te.length;$<W;$++)Y[$]=te[$]*V;te=Y}for(let V=0,Y=O.length;V<Y;V++){const $=new N(O[V]+"."+Ds[T.path],M.array,te,H);R.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(ee){const re=this instanceof go?dF:_o;return new re(this.times,this.values,this.getValueSize()/3,ee)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),x.push($)}}const b=n.name?n.name:"animation_"+e;return new jp(b,void 0,x)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(r){const s=n._getNodeRef(n.meshCache,i.mesh,r);return i.weights!==void 0&&s.traverse(function(l){if(!!l.isMesh)for(let c=0,h=i.weights.length;c<h;c++)l.morphTargetInfluences[c]=i.weights[c]}),s})}loadNode(e){const t=this.json,n=this.extensions,i=this,r=t.nodes[e],s=r.name?i.createUniqueName(r.name):"";return function(){const l=[],c=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&l.push(c),r.camera!==void 0&&l.push(i.getDependency("camera",r.camera).then(function(h){return i._getNodeRef(i.cameraCache,r.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),Promise.all(l)}().then(function(l){let c;if(r.isBone===!0?c=new Pp:l.length>1?c=new Ls:l.length===1?c=l[0]:c=new Mt,c!==l[0])for(let h=0,f=l.length;h<f;h++)c.add(l[h]);if(r.name&&(c.userData.name=r.name,c.name=s),vo(c,r),r.extensions&&cc(n,c,r),r.matrix!==void 0){const h=new Ve;h.fromArray(r.matrix),c.applyMatrix4(h)}else r.translation!==void 0&&c.position.fromArray(r.translation),r.rotation!==void 0&&c.quaternion.fromArray(r.rotation),r.scale!==void 0&&c.scale.fromArray(r.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,n=this.extensions,i=this.json.scenes[e],r=this,s=new Ls;i.name&&(s.name=r.createUniqueName(i.name)),vo(s,i),i.extensions&&cc(n,s,i);const l=i.nodes||[],c=[];for(let h=0,f=l.length;h<f;h++)c.push(gw(l[h],s,t,r));return Promise.all(c).then(function(){const h=f=>{const d=new Map;for(const[g,p]of r.associations)(g instanceof mn||g instanceof pn)&&d.set(g,p);return f.traverse(g=>{const p=r.associations.get(g);p!=null&&d.set(g,p)}),d};return r.associations=h(s),s})}}function gw(a,e,t,n){const i=t.nodes[a];return n.getDependency("node",a).then(function(r){if(i.skin===void 0)return r;let s;return n.getDependency("skin",i.skin).then(function(l){s=l;const c=[];for(let h=0,f=s.joints.length;h<f;h++)c.push(n.getDependency("node",s.joints[h]));return Promise.all(c)}).then(function(l){return r.traverse(function(c){if(!c.isMesh)return;const h=[],f=[];for(let d=0,g=l.length;d<g;d++){const p=l[d];if(p){h.push(p);const _=new Ve;s.inverseBindMatrices!==void 0&&_.fromArray(s.inverseBindMatrices.array,d*16),f.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',s.joints[d])}c.bind(new Ip(h,f),c.matrixWorld)}),r})}).then(function(r){e.add(r);const s=[];if(i.children){const l=i.children;for(let c=0,h=l.length;c<h;c++){const f=l[c];s.push(gw(f,r,t,n))}}return Promise.all(s)})}function yF(a,e,t){const n=e.attributes,i=new Ui;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],c=l.min,h=l.max;if(c!==void 0&&h!==void 0){if(i.set(new U(c[0],c[1],c[2]),new U(h[0],h[1],h[2])),l.normalized){const f=sm(lc[l.componentType]);i.min.multiplyScalar(f),i.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const l=new U,c=new U;for(let h=0,f=r.length;h<f;h++){const d=r[h];if(d.POSITION!==void 0){const g=t.json.accessors[d.POSITION],p=g.min,_=g.max;if(p!==void 0&&_!==void 0){if(c.setX(Math.max(Math.abs(p[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(p[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(p[2]),Math.abs(_[2]))),g.normalized){const x=sm(lc[g.componentType]);c.multiplyScalar(x)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}a.boundingBox=i;const s=new co;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,a.boundingSphere=s}function _w(a,e,t){const n=e.attributes,i=[];function r(s,l){return t.getDependency("accessor",s).then(function(c){a.setAttribute(l,c)})}for(const s in n){const l=im[s]||s.toLowerCase();l in a.attributes||i.push(r(n[s],l))}if(e.indices!==void 0&&!a.index){const s=t.getDependency("accessor",e.indices).then(function(l){a.setIndex(l)});i.push(s)}return vo(a,e),yF(a,e,t),Promise.all(i).then(function(){return e.targets!==void 0?gF(a,e.targets,t):a})}function vw(a,e){let t=a.getIndex();if(t===null){const s=[],l=a.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)s.push(c);a.setIndex(s),t=a.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const n=t.count-2,i=[];if(e===$v)for(let s=1;s<=n;s++)i.push(t.getX(0)),i.push(t.getX(s)),i.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2==0?(i.push(t.getX(s)),i.push(t.getX(s+1)),i.push(t.getX(s+2))):(i.push(t.getX(s+2)),i.push(t.getX(s+1)),i.push(t.getX(s)));i.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=a.clone();return r.setIndex(i),r}const om=new WeakMap;class CF extends fr{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new sc(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,s=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,l).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const h=t.attributeTypes[c];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=h.name)}const n=JSON.stringify(t);if(om.has(e)){const c=om.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,s=e.byteLength,l=this._getWorker(r,s).then(c=>(i=c,new Promise((h,f)=>{i._callbacks[r]={resolve:h,reject:f},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),om.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new Nt;e.index&&t.setIndex(new Zt(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,s=i.array,l=i.itemSize;t.setAttribute(r,new Zt(s,l))}return t}_loadLibrary(e,t){const n=new sc(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(e,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=wF.toString(),s=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){const s=r.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function wF(){let a,e;onmessage=function(s){const l=s.data;switch(l.type){case"init":a=l.decoderConfig,e=new Promise(function(f){a.onModuleLoaded=function(d){f({draco:d})},DracoDecoderModule(a)});break;case"decode":const c=l.buffer,h=l.taskConfig;e.then(f=>{const d=f.draco,g=new d.Decoder,p=new d.DecoderBuffer;p.Init(new Int8Array(c),c.byteLength);try{const _=t(d,g,p,h),x=_.attributes.map(b=>b.array.buffer);_.index&&x.push(_.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:_},x)}catch(_){console.error(_),self.postMessage({type:"error",id:l.id,error:_.message})}finally{d.destroy(p),d.destroy(g)}});break}};function t(s,l,c,h){const f=h.attributeIDs,d=h.attributeTypes;let g,p;const _=l.GetEncodedGeometryType(c);if(_===s.TRIANGULAR_MESH)g=new s.Mesh,p=l.DecodeBufferToMesh(c,g);else if(_===s.POINT_CLOUD)g=new s.PointCloud,p=l.DecodeBufferToPointCloud(c,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const x={index:null,attributes:[]};for(const b in f){const v=self[d[b]];let y,S;if(h.useUniqueIDs)S=f[b],y=l.GetAttributeByUniqueId(g,S);else{if(S=l.GetAttributeId(g,s[f[b]]),S===-1)continue;y=l.GetAttribute(g,S)}x.attributes.push(i(s,l,g,b,v,y))}return _===s.TRIANGULAR_MESH&&(x.index=n(s,l,g)),s.destroy(g),x}function n(s,l,c){const f=c.num_faces()*3,d=f*4,g=s._malloc(d);l.GetTrianglesUInt32Array(c,d,g);const p=new Uint32Array(s.HEAPF32.buffer,g,f).slice();return s._free(g),{array:p,itemSize:1}}function i(s,l,c,h,f,d){const g=d.num_components(),_=c.num_points()*g,x=_*f.BYTES_PER_ELEMENT,b=r(s,f),v=s._malloc(x);l.GetAttributeDataArrayForAllPoints(c,d,b,x,v);const y=new f(s.HEAPF32.buffer,v,_).slice();return s._free(v),{name:h,array:y,itemSize:g}}function r(s,l){switch(l){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}export{LF as A,TF as C,CF as D,MF as E,Ls as G,Vn as M,Wn as P,EF as R,ay as S,Xy as T,Ee as V,Rt as W,SF as a,Gy as b,ho as c,yp as d,Ht as e,RF as f,HL as g,no as h,AF as i,mo as j,Ne as k,V_ as l};
